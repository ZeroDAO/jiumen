import{d,w as $}from"./svelte-71ed60be.js";import{c as I}from"./deepmerge-84b6eb8e.js";import{o as S}from"./intl-messageformat-1d260046.js";const u={},Z=(e,n,t)=>t&&(n in u||(u[n]={}),e in u[n]||(u[n][e]=t),t),A=(e,n)=>{if(n==null)return;if(n in u&&e in u[n])return u[n][e];const t=v(n);for(let o=0;o<t.length;o++){const i=C(t[o],e);if(i)return Z(e,n,i)}};let E;const p=$({});function P(e){return e in E}function C(e,n){if(!P(e))return null;const t=function(o){return E[o]||null}(e);return function(o,i){if(i==null)return;if(i in o)return o[i];const l=i.split(".");let r=o;for(let s=0;s<l.length;s++)if(typeof r=="object"){if(s>0){const m=l.slice(s,l.length).join(".");if(m in r){r=r[m];break}}r=r[l[s]]}else r=void 0;return r}(t,n)}function G(e,...n){delete u[e],p.update(t=>(t[e]=I.all([t[e]||{},...n]),t))}d([p],([e])=>Object.keys(e));p.subscribe(e=>E=e);const y={};function z(e){return y[e]}function j(e){return e!=null&&v(e).some(n=>{var t;return(t=z(n))===null||t===void 0?void 0:t.size})}function J(e,n){return Promise.all(n.map(o=>(function(i,l){y[i].delete(l),y[i].size===0&&delete y[i]}(e,o),o().then(i=>i.default||i)))).then(o=>G(e,...o))}const h={};function F(e){if(!j(e))return e in h?h[e]:Promise.resolve();const n=function(t){return v(t).map(o=>{const i=z(o);return[o,i?[...i]:[]]}).filter(([,o])=>o.length>0)}(e);return h[e]=Promise.all(n.map(([t,o])=>J(t,o))).then(()=>{if(j(e))return F(e);delete h[e]}),h[e]}function U({locale:e,id:n}){console.warn(`[svelte-i18n] The message "${n}" was not found in "${v(e).join('", "')}".${j(c())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const w={fallbackLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function f(){return w}function ie(e){const{formats:n,...t}=e,o=e.initialLocale||e.fallbackLocale;return t.warnOnMissingMessages&&(delete t.warnOnMissingMessages,t.handleMissingMessage==null?t.handleMissingMessage=U:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(w,t,{initialLocale:o}),n&&("number"in n&&Object.assign(w.formats.number,n.number),"date"in n&&Object.assign(w.formats.date,n.date),"time"in n&&Object.assign(w.formats.time,n.time)),g.set(o)}const k=$(!1);let T;const M=$(null);function x(e){return e.split("-").map((n,t,o)=>o.slice(0,t+1).join("-")).reverse()}function v(e,n=f().fallbackLocale){const t=x(e);return n?[...new Set([...t,...x(n)])]:t}function c(){return T??void 0}M.subscribe(e=>{T=e??void 0,typeof window<"u"&&e!=null&&document.documentElement.setAttribute("lang",e)});const g={...M,set:e=>{if(e&&function(n){if(n==null)return;const t=v(n);for(let o=0;o<t.length;o++){const i=t[o];if(P(i))return i}}(e)&&j(e)){const{loadingDelay:n}=f();let t;return typeof window<"u"&&c()!=null&&n?t=window.setTimeout(()=>k.set(!0),n):k.set(!0),F(e).then(()=>{M.set(e)}).finally(()=>{clearTimeout(t),k.set(!1)})}return M.set(e)}},re=()=>typeof window>"u"?null:window.navigator.language||window.navigator.languages[0],O=e=>{const n=Object.create(null);return t=>{const o=JSON.stringify(t);return o in n?n[o]:n[o]=e(t)}},b=(e,n)=>{const{formats:t}=f();if(e in t&&n in t[e])return t[e][n];throw new Error(`[svelte-i18n] Unknown "${n}" ${e} format.`)},V=O(({locale:e,format:n,...t})=>{if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(t=b("number",n)),new Intl.NumberFormat(e,t)}),q=O(({locale:e,format:n,...t})=>{if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?t=b("date",n):Object.keys(t).length===0&&(t=b("date","short")),new Intl.DateTimeFormat(e,t)}),B=O(({locale:e,format:n,...t})=>{if(e==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?t=b("time",n):Object.keys(t).length===0&&(t=b("time","short")),new Intl.DateTimeFormat(e,t)}),H=({locale:e=c(),...n}={})=>V({locale:e,...n}),K=({locale:e=c(),...n}={})=>q({locale:e,...n}),Q=({locale:e=c(),...n}={})=>B({locale:e,...n}),R=O((e,n=c())=>new S(e,n,f().formats,{ignoreTag:f().ignoreTag})),W=(e,n={})=>{var t,o,i,l;let r=n;typeof e=="object"&&(r=e,e=r.id);const{values:s,locale:m=c(),default:D}=r;if(m==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let a=A(e,m);if(a){if(typeof a!="string")return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof a}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),a}else a=(l=(i=(o=(t=f()).handleMissingMessage)===null||o===void 0?void 0:o.call(t,{locale:m,id:e,defaultValue:D}))!==null&&i!==void 0?i:D)!==null&&l!==void 0?l:e;if(!s)return a;let L=a;try{L=R(a,m).format(s)}catch(N){N instanceof Error&&console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,N.message)}return L},X=(e,n)=>Q(n).format(e),_=(e,n)=>K(n).format(e),Y=(e,n)=>H(n).format(e),ee=(e,n=c())=>A(e,n),le=d([g,p],()=>W);d([g],()=>X);d([g],()=>_);d([g],()=>Y);d([g,p],()=>ee);export{ie as O,le as X,G as m,g as x,re as z};
