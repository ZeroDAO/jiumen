import{c as qe}from"./@antv-806868f3.js";var $e,We;function ye(){return We||(We=1,$e={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}),$e}var be={},Oe,Je;function Me(){return Je||(Je=1,Oe={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}),Oe}var Ce={},Te={},Qe;function xt(){if(Qe)return Te;Qe=1;const Z=qe,t=4294967292,e=4294967293,o=4294967294,h=4294967295,C=[0,1,3,7,15,31,63,127,255,511,1023],B=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),T=[];x.forEach(n=>{T.push(n.charCodeAt(0))}),Te.utf8={encode(n){const i=[];return n.forEach(s=>{if(s>=0&&s<=127)i.push(s);else if(s<=2047)i.push(192+(s>>6&C[5])),i.push(128+(s&C[6]));else if(s<55296||s>57343&&s<=65535)i.push(224+(s>>12&C[4])),i.push(128+(s>>6&C[6])),i.push(128+(s&C[6]));else if(s>=65536&&s<=1114111){const a=s>>16&C[5];i.push(240+(a>>2)),i.push(128+((a&C[2])<<4)+(s>>12&C[4])),i.push(128+(s>>6&C[6])),i.push(128+(s&C[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${s}`)}),Buffer.from(i)},decode(n,i){function s(j,w){if((w&192)!==128)return e;const L=((j&C[5])<<6)+(w&C[6]);return L<128?t:L}function a(j,w,L){if((L&192)!==128||(w&192)!==128)return e;const O=((j&C[4])<<12)+((w&C[6])<<6)+(L&C[6]);return O<2048?t:O>=55296&&O<=57343?o:O}function u(j,w,L,O){if((O&192)!==128||(L&192)!==128||(w&192)!==128)return e;const p=(((j&C[3])<<2)+(w>>4&C[2])<<16)+((w&C[4])<<12)+((L&C[6])<<6)+(O&C[6]);return p<65536?t:p>1114111?o:p}let S,l,b,U,v,V;const f=n.length;let K=i?3:0;const X=[];for(;K<f;){l=n[K],S=h;const j=!0;for(;j;){if(l>=0&&l<=127){S=l,V=1;break}if(b=K+1,b<f&&l>=194&&l<=223){S=s(l,n[b]),V=2;break}if(U=K+2,U<f&&l>=224&&l<=239){S=a(l,n[b],n[U]),V=3;break}if(v=K+3,v<f&&l>=240&&l<=244){S=u(l,n[b],n[U],n[v]),V=4;break}break}if(S>1114111){const w=`byte[${K}]`;throw S===h?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${w}`):S===e?new RangeError(`utf8.decode: illegal trailing byte found at: ${w}`):S===o?new RangeError(`utf8.decode: code point out of range found at: ${w}`):S===t?new RangeError(`utf8.decode: non-shortest form found at: ${w}`):new RangeError(`utf8.decode: unrecognized error found at: ${w}`)}X.push(S),K+=V}return X}},Te.utf16be={encode(n){const i=[];let s,a,u;for(let S=0;S<n.length;S+=1)if(s=n[S],s>=0&&s<=55295||s>=57344&&s<=65535)i.push(s>>8&C[8]),i.push(s&C[8]);else if(s>=65536&&s<=1114111)u=s-65536,a=55296+(u>>10),u=56320+(u&C[10]),i.push(a>>8&C[8]),i.push(a&C[8]),i.push(u>>8&C[8]),i.push(u&C[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${S}]: ${s}`);return Buffer.from(i)},decode(n,i){if(n.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${n.length}`);const s=[],a=n.length;let u=i?2:0,S=0,l,b,U,v,V,f;for(;u<a;){for(;;){if(U=u+1,U<a){if(V=(n[u]<<8)+n[U],V<55296||V>57343){l=V,b=2;break}if(v=u+3,v<a&&(f=(n[u+2]<<8)+n[v],V<=56319&&f>=56320&&f<=57343)){l=65536+(V-55296<<10)+(f-56320),b=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${u}]`)}s[S++]=l,u+=b}return s}},Te.utf16le={encode(n){const i=[];let s,a,u;for(let S=0;S<n.length;S+=1)if(s=n[S],s>=0&&s<=55295||s>=57344&&s<=65535)i.push(s&C[8]),i.push(s>>8&C[8]);else if(s>=65536&&s<=1114111)u=s-65536,a=55296+(u>>10),u=56320+(u&C[10]),i.push(a&C[8]),i.push(a>>8&C[8]),i.push(u&C[8]),i.push(u>>8&C[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${S}]: ${s}`);return Buffer.from(i)},decode(n,i){if(n.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${n.length}`);const s=[],a=n.length;let u=i?2:0,S=0,l,b,U,v,V,f;for(;u<a;){for(;;){if(U=u+1,U<a){if(V=(n[U]<<8)+n[u],V<55296||V>57343){l=V,b=2;break}if(v=u+3,v<a&&(f=(n[v]<<8)+n[u+2],V<=56319&&f>=56320&&f<=57343)){l=65536+(V-55296<<10)+(f-56320),b=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${u}]`)}s[S++]=l,u+=b}return s}},Te.utf32be={encode(n){const i=Buffer.alloc(n.length*4);let s=0;return n.forEach(a=>{if(a>=55296&&a<=57343||a>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${s/4}]: ${a}`);i[s++]=a>>24&C[8],i[s++]=a>>16&C[8],i[s++]=a>>8&C[8],i[s++]=a&C[8]}),i},decode(n,i){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${n.length}`);const s=[];let a=i?4:0;for(;a<n.length;a+=4){const u=(n[a]<<24)+(n[a+1]<<16)+(n[a+2]<<8)+n[a+3];if(u>=55296&&u<=57343||u>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${a/4}]: ${u}`);s.push(u)}return s}},Te.utf32le={encode(n){const i=Buffer.alloc(n.length*4);let s=0;return n.forEach(a=>{if(a>=55296&&a<=57343||a>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${s/4}]: ${a}`);i[s++]=a&C[8],i[s++]=a>>8&C[8],i[s++]=a>>16&C[8],i[s++]=a>>24&C[8]}),i},decode(n,i){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${n.length}`);const s=[];let a=i?4:0;for(;a<n.length;a+=4){const u=(n[a+3]<<24)+(n[a+2]<<16)+(n[a+1]<<8)+n[a];if(u>=55296&&u<=57343||u>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${a/4}]: ${u}`);s.push(u)}return s}},Te.uint7={encode(n){const i=Buffer.alloc(n.length);for(let s=0;s<n.length;s+=1){if(n[s]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${s}]: ${n[s]}`);i[s]=n[s]}return i},decode(n){const i=[];for(let s=0;s<n.length;s+=1){if(n[s]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${s}]: ${n[s]}`);i[s]=n[s]}return i}},Te.uint8={encode(n){const i=Buffer.alloc(n.length);for(let s=0;s<n.length;s+=1){if(n[s]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${s}]: ${n[s]}`);i[s]=n[s]}return i},decode(n){const i=[];for(let s=0;s<n.length;s+=1)i[s]=n[s];return i}},Te.uint16be={encode(n){const i=Buffer.alloc(n.length*2);let s=0;return n.forEach(a=>{if(a>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${s/2}]: ${a}`);i[s++]=a>>8&C[8],i[s++]=a&C[8]}),i},decode(n){if(n.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${n.length}`);const i=[];for(let s=0;s<n.length;s+=2)i.push((n[s]<<8)+n[s+1]);return i}},Te.uint16le={encode(n){const i=Buffer.alloc(n.length*2);let s=0;return n.forEach(a=>{if(a>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${s/2}]: ${a}`);i[s++]=a&C[8],i[s++]=a>>8&C[8]}),i},decode(n){if(n.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${n.length}`);const i=[];for(let s=0;s<n.length;s+=2)i.push((n[s+1]<<8)+n[s]);return i}},Te.uint32be={encode(n){const i=Buffer.alloc(n.length*4);let s=0;return n.forEach(a=>{i[s++]=a>>24&C[8],i[s++]=a>>16&C[8],i[s++]=a>>8&C[8],i[s++]=a&C[8]}),i},decode(n){if(n.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${n.length}`);const i=[];for(let s=0;s<n.length;s+=4)i.push((n[s]<<24)+(n[s+1]<<16)+(n[s+2]<<8)+n[s+3]);return i}},Te.uint32le={encode(n){const i=Buffer.alloc(n.length*4);let s=0;return n.forEach(a=>{i[s++]=a&C[8],i[s++]=a>>8&C[8],i[s++]=a>>16&C[8],i[s++]=a>>24&C[8]}),i},decode(n){if(n.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${n.length}`);const i=[];for(let s=0;s<n.length;s+=4)i.push((n[s+3]<<24)+(n[s+2]<<16)+(n[s+1]<<8)+n[s]);return i}},Te.string={encode(n){return Z.utf16le.encode(n).toString("utf16le")},decode(n){return Z.utf16le.decode(Buffer.from(n,"utf16le"),0)}},Te.escaped={encode(n){const i=[];for(let s=0;s<n.length;s+=1){const a=n[s];if(a===96)i.push(a),i.push(a);else if(a===10)i.push(a);else if(a>=32&&a<=126)i.push(a);else{let u="";if(a>=0&&a<=31)u+=`\`x${B[a]}`;else if(a>=127&&a<=255)u+=`\`x${B[a]}`;else if(a>=256&&a<=65535)u+=`\`u${B[a>>8&C[8]]}${B[a&C[8]]}`;else if(a>=65536&&a<=4294967295){u+="`u{";const l=a>>24&C[8];l>0&&(u+=B[l]),u+=`${B[a>>16&C[8]]+B[a>>8&C[8]]+B[a&C[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer.from(u).forEach(l=>{i.push(l)})}}return Buffer.from(i)},decode(n){function i(f){return f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102}function s(f,K,X){const j={char:null,nexti:f+2,error:!0};if(f+1<K&&i(X[f])&&i(X[f+1])){const w=String.fromCodePoint(X[f],X[f+1]);j.char=parseInt(w,16),Number.isNaN(j.char)||(j.error=!1)}return j}function a(f,K,X){const j={char:null,nexti:f+4,error:!0};if(f+3<K&&i(X[f])&&i(X[f+1])&&i(X[f+2])&&i(X[f+3])){const w=String.fromCodePoint(X[f],X[f+1],X[f+2],X[f+3]);j.char=parseInt(w,16),Number.isNaN(j.char)||(j.error=!1)}return j}function u(f,K,X){const j={char:null,nexti:f+4,error:!0};let w="";for(;f<K&&i(X[f]);)w+=String.fromCodePoint(X[f]),f+=1;return j.char=parseInt(w,16),X[f]===125&&!Number.isNaN(j.char)&&(j.error=!1),j.nexti=f+1,j}const S=[],l=n.length;let b,U,v,V=0;for(;V<l;){for(;;){if(v=!0,n[V]!==96){S.push(n[V]),V+=1,v=!1;break}if(b=V+1,b>=l)break;if(n[b]===96){S.push(96),V+=2,v=!1;break}if(n[b]===120){if(U=s(b+1,l,n),U.error)break;S.push(U.char),V=U.nexti,v=!1;break}if(n[b]===117){if(n[b+1]===123){if(U=u(b+2,l,n),U.error)break;S.push(U.char),V=U.nexti,v=!1;break}if(U=a(b+1,l,n),U.error)break;S.push(U.char),V=U.nexti,v=!1;break}break}if(v)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${V}]`)}return S}};const $=13,g=10;return Te.lineEnds={crlf(n){const i=[];let s=0;for(;s<n.length;)switch(n[s]){case $:s+1<n.length&&n[s+1]===g?s+=2:s+=1,i.push($),i.push(g);break;case g:i.push($),i.push(g),s+=1;break;default:i.push(n[s]),s+=1;break}return i.length>0&&i[i.length-1]!==g&&(i.push($),i.push(g)),i},lf(n){const i=[];let s=0;for(;s<n.length;)switch(n[s]){case $:s+1<n.length&&n[s+1]===g?s+=2:s+=1,i.push(g);break;case g:i.push(g),s+=1;break;default:i.push(n[s]),s+=1;break}return i.length>0&&i[i.length-1]!==g&&i.push(g),i}},Te.base64={encode(n){if(n.length===0)return Buffer.alloc(0);let i,s,a,u=n.length%3;u=u>0?3-u:0;let S=(n.length+u)/3;const l=Buffer.alloc(S*4);u>0&&(S-=1),i=0,s=0;for(let b=0;b<S;b+=1)a=n[i++]<<16,a+=n[i++]<<8,a+=n[i++],l[s++]=T[a>>18&C[6]],l[s++]=T[a>>12&C[6]],l[s++]=T[a>>6&C[6]],l[s++]=T[a&C[6]];if(u===0)return l;if(u===1)return a=n[i++]<<16,a+=n[i]<<8,l[s++]=T[a>>18&C[6]],l[s++]=T[a>>12&C[6]],l[s++]=T[a>>6&C[6]],l[s]=T[64],l;if(u===2)return a=n[i]<<16,l[s++]=T[a>>18&C[6]],l[s++]=T[a>>12&C[6]],l[s++]=T[64],l[s]=T[64],l},decode(n){function i(V){const f=[];let K=0;for(let X=0;X<V.length;X+=1){const j=V[X],w=!0;for(;w&&!(j===32||j===9||j===10||j===13);){if(j>=65&&j<=90){f.push(j-65);break}if(j>=97&&j<=122){f.push(j-71);break}if(j>=48&&j<=57){f.push(j+4);break}if(j===43){f.push(62);break}if(j===47){f.push(63);break}if(j===61){f.push(64),K+=1;break}throw new RangeError(`base64.decode: invalid character buf[${X}]: ${j}`)}}if(f.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${f.length}`);switch(K){case 0:break;case 1:if(f[f.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(f[f.length-1]!==64||f[f.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${K}`)}return{tail:K,buf:Buffer.from(f)}}if(n.length===0)return Buffer.alloc(0);const s=i(n),{tail:a}=s,u=s.buf;let S,l,b,U=u.length/4;const v=Buffer.alloc(U*3-a);a>0&&(U-=1),l=0,S=0;for(let V=0;V<U;V+=1)b=u[S++]<<18,b+=u[S++]<<12,b+=u[S++]<<6,b+=u[S++],v[l++]=b>>16&C[8],v[l++]=b>>8&C[8],v[l++]=b&C[8];return a===1&&(b=u[S++]<<18,b+=u[S++]<<12,b+=u[S]<<6,v[l++]=b>>16&C[8],v[l]=b>>8&C[8]),a===2&&(b=u[S++]<<18,b+=u[S++]<<12,v[l]=b>>16&C[8]),v},toString(n){if(n.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${n.length}`);let i="",s=0;function a(S,l,b,U){switch(s){case 76:i+=`\r
${S}${l}${b}${U}`,s=4;break;case 75:i+=`${S}\r
${l}${b}${U}`,s=3;break;case 74:i+=`${S+l}\r
${b}${U}`,s=2;break;case 73:i+=`${S+l+b}\r
${U}`,s=1;break;default:i+=S+l+b+U,s+=4;break}}function u(S){return S>=65&&S<=90||S>=97&&S<=122||S>=48&&S<=57||S===43||S===47||S===61}for(let S=0;S<n.length;S+=4){for(let l=S;l<S+4;l+=1)if(!u(n[l]))throw new RangeError(`base64.toString: buf[${l}]: ${n[l]} : not valid base64 character code`);a(String.fromCharCode(n[S]),String.fromCharCode(n[S+1]),String.fromCharCode(n[S+2]),String.fromCharCode(n[S+3]))}return i}},Te}var Ze;function Et(){if(Ze)return Ce;Ze=1;const Z=qe,t=xt(),e="UTF8",o="UTF16",h="UTF16BE",C="UTF16LE",B="UTF32",x="UTF32BE",T="UTF32LE",$="UINT7",g="ASCII",n="BINARY",i="UINT8",s="UINT16",a="UINT16LE",u="UINT16BE",S="UINT32",l="UINT32LE",b="UINT32BE",U="ESCAPED",v="STRING",V=function(p){p.type=e;const y=p.data;p.bom=0,y.length>=3&&y[0]===239&&y[1]===187&&y[2]===191&&(p.bom=3)},f=function(p){const y=p.data;switch(p.bom=0,p.type){case o:p.type=h,y.length>=2&&(y[0]===254&&y[1]===255?p.bom=2:y[0]===255&&y[1]===254&&(p.type=C,p.bom=2));break;case h:if(p.type=h,y.length>=2){if(y[0]===254&&y[1]===255)p.bom=2;else if(y[0]===255&&y[1]===254)throw new TypeError(`src type: "${h}" specified but BOM is for "${C}"`)}break;case C:if(p.type=C,y.length>=0){if(y[0]===254&&y[1]===255)throw new TypeError(`src type: "${C}" specified but BOM is for "${h}"`);y[0]===255&&y[1]===254&&(p.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${p.type}" unrecognized`)}},K=function(p){const y=p.data;switch(p.bom=0,p.type){case B:p.type=x,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(p.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(p.type=T,p.bom=4));break;case x:if(p.type=x,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(p.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0))throw new TypeError(`src type: ${x} specified but BOM is for ${T}"`);break;case T:if(p.type=T,y.length>=4){if(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255)throw new TypeError(`src type: "${T}" specified but BOM is for "${x}"`);y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(p.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${p.type}" unrecognized`)}},X=function(p,y){function te(Q){const ae={type:"",base64:!1},Y=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(Q);return Y&&(Y[2]&&(ae.type=Y[2].toUpperCase()),Y[1]&&(ae.base64=!0)),ae}if(typeof p!="string"||p==="")throw new TypeError(`type: "${p}" not recognized`);const W=te(p.toUpperCase());if(W.base64){if(W.type===v)throw new TypeError(`type: "${p} "BASE64:" prefix not allowed with type ${v}`);if(Buffer.isBuffer(y))W.data=t.base64.decode(y);else if(typeof y=="string"){const Q=Buffer.from(y,"ascii");W.data=t.base64.decode(Q)}else throw new TypeError(`type: "${p} unrecognized data type: typeof(data): ${typeof y}`)}else W.data=y;switch(W.type){case e:V(W);break;case o:case h:case C:f(W);break;case B:case x:case T:K(W);break;case s:W.type=u;break;case S:W.type=b;break;case g:W.type=$;break;case n:W.type=i;break;case $:case i:case a:case u:case l:case b:case v:case U:break;default:throw new TypeError(`type: "${p}" not recognized`)}if(W.type===v){if(typeof W.data!="string")throw new TypeError(`type: "${p}" but data is not a string`)}else if(!Buffer.isBuffer(W.data))throw new TypeError(`type: "${p}" but data is not a Buffer`);return W},j=function(p,y){function te(Q){let ae,pe;const Y={crlf:!1,lf:!1,base64:!1,type:""},J=!0;for(;J;){if(pe=Q,ae=Q.slice(0,5),ae==="CRLF:"){Y.crlf=!0,pe=Q.slice(5);break}if(ae=Q.slice(0,3),ae==="LF:"){Y.lf=!0,pe=Q.slice(3);break}break}return ae=pe.split(":"),ae.length===1?Y.type=ae[0]:ae.length===2&&ae[1]==="BASE64"&&(Y.base64=!0,Y.type=ae[0]),Y}if(!Array.isArray(y))throw new TypeError(`dst chars: not array: "${typeof y}`);if(typeof p!="string")throw new TypeError(`dst type: not string: "${typeof p}`);const W=te(p.toUpperCase());switch(W.type){case e:case h:case C:case x:case T:case $:case i:case a:case u:case l:case b:case U:break;case v:if(W.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${v}`);break;case g:W.type=$;break;case n:W.type=i;break;case o:W.type=h;break;case B:W.type=x;break;case s:W.type=u;break;case S:W.type=b;break;default:throw new TypeError(`dst type unrecognized: "${p}" : must have form [crlf:|lf:]type[:base64]`)}return W},w=function(p,y){switch(p){case e:return t.utf8.encode(y);case h:return t.utf16be.encode(y);case C:return t.utf16le.encode(y);case x:return t.utf32be.encode(y);case T:return t.utf32le.encode(y);case $:return t.uint7.encode(y);case i:return t.uint8.encode(y);case u:return t.uint16be.encode(y);case a:return t.uint16le.encode(y);case b:return t.uint32be.encode(y);case l:return t.uint32le.encode(y);case v:return t.string.encode(y);case U:return t.escaped.encode(y);default:throw new TypeError(`encode type "${p}" not recognized`)}},L=function(p){switch(p.type){case e:return t.utf8.decode(p.data,p.bom);case C:return t.utf16le.decode(p.data,p.bom);case h:return t.utf16be.decode(p.data,p.bom);case x:return t.utf32be.decode(p.data,p.bom);case T:return t.utf32le.decode(p.data,p.bom);case $:return t.uint7.decode(p.data);case i:return t.uint8.decode(p.data);case u:return t.uint16be.decode(p.data);case a:return t.uint16le.decode(p.data);case b:return t.uint32be.decode(p.data);case l:return t.uint32le.decode(p.data);case v:return t.string.decode(p.data);case U:return t.escaped.decode(p.data);default:throw new TypeError(`decode type "${p.type}" not recognized`)}};return Ce.decode=function(p,y){const te=X(p,y);return L(te)},Ce.encode=function(p,y){let te,W;const Q=j(p,y);return Q.crlf?(te=t.lineEnds.crlf(y),W=w(Q.type,te)):Q.lf?(te=t.lineEnds.lf(y),W=w(Q.type,te)):W=w(Q.type,y),Q.base64&&(W=t.base64.encode(W)),W},Ce.convert=function(p,y,te){return Z.encode(te,Z.decode(p,y))},Ce}var Re,et;function yt(){return et||(et=1,Re=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}),Re}var tt;function Ae(){if(tt)return be;tt=1;const Z=Me(),t=Et(),e=yt(),o=ye(),h="utilities.js: ",C=qe,B=function(T,$,g){let n,i=$;const s=!0;for(;s;){if(T<=0){i=0,n=0;break}if(typeof i!="number"){i=0,n=T;break}if(i>=T){i=T,n=T;break}if(typeof g!="number"){n=T;break}if(n=i+g,n>T){n=T;break}break}return{beg:i,end:n}};be.htmlToPage=function(T,$){let g;if(typeof T!="string")throw new Error(`${h}htmlToPage: input HTML is not a string`);typeof $!="string"?g="htmlToPage":g=$;let n="";return n+=`<!DOCTYPE html>
`,n+=`<html lang="en">
`,n+=`<head>
`,n+=`<meta charset="utf-8">
`,n+=`<title>${g}</title>
`,n+=`<style>
`,n+=e(),n+=`</style>
`,n+=`</head>
<body>
`,n+=`<p>${new Date}</p>
`,n+=T,n+=`</body>
</html>
`,n},be.parserResultToHtml=function(T,$){let g=null;typeof $=="string"&&$!==""&&(g=$);let n,i;T.success===!0?n=`<span class="${Z.CLASS_MATCH}">true</span>`:n=`<span class="${Z.CLASS_NOMATCH}">false</span>`,T.state===o.EMPTY?i=`<span class="${Z.CLASS_EMPTY}">EMPTY</span>`:T.state===o.MATCH?i=`<span class="${Z.CLASS_MATCH}">MATCH</span>`:T.state===o.NOMATCH?i=`<span class="${Z.CLASS_NOMATCH}">NOMATCH</span>`:i=`<span class="${Z.CLASS_NOMATCH}">unrecognized</span>`;let s="";return s+=`<table class="${Z.CLASS_STATE}">
`,g&&(s+=`<caption>${g}</caption>
`),s+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,s+=`<tr><td>parser success</td><td>${n}</td>
`,s+=`<td><span class="${Z.CLASS_MATCH}">true</span> if the parse succeeded,
`,s+=` <span class="${Z.CLASS_NOMATCH}">false</span> otherwise`,s+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,s+=`<tr><td>parser state</td><td>${i}</td>
`,s+=`<td><span class="${Z.CLASS_EMPTY}">EMPTY</span>, `,s+=`<span class="${Z.CLASS_MATCH}">MATCH</span> or 
`,s+=`<span class="${Z.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,s+=`<tr><td>string length</td><td>${T.length}</td><td>length of the input (sub)string</td></tr>
`,s+=`<tr><td>matched length</td><td>${T.matched}</td><td>number of input string characters matched</td></tr>
`,s+=`<tr><td>max matched</td><td>${T.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,s+=`<tr><td>max tree depth</td><td>${T.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,s+=`<tr><td>node hits</td><td>${T.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,s+=`<tr><td>input length</td><td>${T.inputLength}</td><td>length of full input string</td></tr>
`,s+=`<tr><td>sub-string begin</td><td>${T.subBegin}</td><td>sub-string first character index</td></tr>
`,s+=`<tr><td>sub-string end</td><td>${T.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,s+=`<tr><td>sub-string length</td><td>${T.subLength}</td><td>sub-string length</td></tr>
`,s+=`</table>
`,s},be.charsToString=function(T,$,g){let n,i;if(typeof $=="number"){if($>=T.length)return"";n=$<0?0:$}else n=0;if(typeof g=="number"){if(g<=0)return"";i=g>T.length-n?T.length:n+g}else i=T.length;return n<i?t.encode("UTF16LE",T.slice(n,i)).toString("utf16le"):""},be.stringToChars=function(T){return t.decode("STRING",T)},be.opcodeToString=function(T){let $="unknown";switch(T){case o.ALT:$="ALT";break;case o.CAT:$="CAT";break;case o.RNM:$="RNM";break;case o.UDT:$="UDT";break;case o.AND:$="AND";break;case o.NOT:$="NOT";break;case o.REP:$="REP";break;case o.TRG:$="TRG";break;case o.TBS:$="TBS";break;case o.TLS:$="TLS";break;case o.BKR:$="BKR";break;case o.BKA:$="BKA";break;case o.BKN:$="BKN";break;case o.ABG:$="ABG";break;case o.AEN:$="AEN";break;default:throw new Error("unrecognized opcode")}return $},be.stateToString=function(T){let $="unknown";switch(T){case o.ACTIVE:$="ACTIVE";break;case o.MATCH:$="MATCH";break;case o.EMPTY:$="EMPTY";break;case o.NOMATCH:$="NOMATCH";break;default:throw new Error("unrecognized state")}return $},be.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],be.charToHex=function(T){let $=T.toString(16).toUpperCase();switch($.length){case 1:case 3:case 7:$=`0${$}`;break;case 2:case 6:$=`00${$}`;break;case 4:break;case 5:$=`000${$}`;break;default:throw new Error("unrecognized option")}return $},be.charsToDec=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToDec: input must be an array of integers`);const i=B(T.length,$,g);if(i.end>i.beg){n+=T[i.beg];for(let s=i.beg+1;s<i.end;s+=1)n+=`,${T[s]}`}return n},be.charsToHex=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToHex: input must be an array of integers`);const i=B(T.length,$,g);if(i.end>i.beg){n+=`\\x${C.charToHex(T[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)n+=`,\\x${C.charToHex(T[s])}`}return n},be.charsToHtmlEntities=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToHex: input must be an array of integers`);const i=B(T.length,$,g);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)n+=`&#x${T[s].toString(16)};`;return n};function x(T){return!(T>=55296&&T<=57343||T>1114111)}return be.charsToUnicode=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToUnicode: input must be an array of integers`);const i=B(T.length,$,g);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)x(T[s])?n+=`&#${T[s]};`:n+=` U+${C.charToHex(T[s])}`;return n},be.charsToJsUnicode=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToJsUnicode: input must be an array of integers`);const i=B(T.length,$,g);if(i.end>i.beg){n+=`\\u${C.charToHex(T[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)n+=`,\\u${C.charToHex(T[s])}`}return n},be.charsToAscii=function(T,$,g){let n="";if(!Array.isArray(T))throw new Error(`${h}charsToAscii: input must be an array of integers`);const i=B(T.length,$,g);for(let s=i.beg;s<i.end;s+=1){const a=T[s];a>=32&&a<=126?n+=String.fromCharCode(a):n+=`\\x${C.charToHex(a)}`}return n},be.charsToAsciiHtml=function(T,$,g){if(!Array.isArray(T))throw new Error(`${h}charsToAsciiHtml: input must be an array of integers`);let n="",i;const s=B(T.length,$,g);for(let a=s.beg;a<s.end;a+=1)i=T[a],i<32||i===127?n+=`<span class="${Z.CLASS_CTRLCHAR}">${C.asciiChars[i]}</span>`:i>127?n+=`<span class="${Z.CLASS_CTRLCHAR}">U+${C.charToHex(i)}</span>`:n+=C.asciiChars[i];return n},be.stringToAsciiHtml=function(T){const $=t.decode("STRING",T);return this.charsToAsciiHtml($)},be}var Le,nt;function At(){return nt||(nt=1,Le=function(){const t=ye(),e=Ae(),o="ast.js: ",h=this;let C=null,B=null,x=null,T=0;const $=[],g=[],n=[],i=[];this.callbacks=[],this.astObject="astObject",this.init=function(u,S,l){n.length=0,i.length=0,$.length=0,T=0,C=u,B=S,x=l;let b;const U=[];for(b=0;b<C.length;b+=1)U.push(C[b].lower);for(b=0;b<B.length;b+=1)U.push(B[b].lower);for(T=C.length+B.length,b=0;b<T;b+=1)$[b]=!1,g[b]=null;for(const v in h.callbacks){const V=v.toLowerCase();if(b=U.indexOf(V),b<0)throw new Error(`${o}init: node '${v}' not a rule or udt name`);typeof h.callbacks[v]=="function"&&($[b]=!0,g[b]=h.callbacks[v]),h.callbacks[v]===!0&&($[b]=!0)}},this.ruleDefined=function(u){return $[u]!==!1},this.udtDefined=function(u){return $[C.length+u]!==!1},this.down=function(u,S){const l=i.length;return n.push(l),i.push({name:S,thisIndex:l,thatIndex:null,state:t.SEM_PRE,callbackIndex:u,phraseIndex:null,phraseLength:null,stack:n.length}),l},this.up=function(u,S,l,b){const U=i.length,v=n.pop();return i.push({name:S,thisIndex:U,thatIndex:v,state:t.SEM_POST,callbackIndex:u,phraseIndex:l,phraseLength:b,stack:n.length}),i[v].thatIndex=U,i[v].phraseIndex=l,i[v].phraseLength=b,U},this.translate=function(u){let S,l,b;for(let U=0;U<i.length;U+=1)b=i[U],l=g[b.callbackIndex],b.state===t.SEM_PRE?l!==null&&(S=l(t.SEM_PRE,x,b.phraseIndex,b.phraseLength,u),S===t.SEM_SKIP&&(U=b.thatIndex)):l!==null&&l(t.SEM_POST,x,b.phraseIndex,b.phraseLength,u)},this.setLength=function(u){i.length=u,u>0?n.length=i[u-1].stack:n.length=0},this.getLength=function(){return i.length};function s(a){let u="";for(let S=0;S<a;S+=1)u+=" ";return u}this.toXml=function(u){let S=e.charsToDec,l="decimal integer character codes";if(typeof u=="string"&&u.length>=3){const v=u.slice(0,3).toLowerCase();v==="asc"?(S=e.charsToAscii,l="ASCII for printing characters, hex for non-printing"):v==="hex"?(S=e.charsToHex,l="hexadecimal integer character codes"):v==="uni"&&(S=e.charsToUnicode,l="Unicode UTF-32 integer character codes")}let b="",U=0;return b+=`<?xml version="1.0" encoding="utf-8"?>
`,b+=`<root nodes="${i.length/2}" characters="${x.length}">
`,b+=`<!-- input string, ${l} -->
`,b+=s(U+2),b+=S(x),b+=`
`,i.forEach(v=>{v.state===t.SEM_PRE?(U+=1,b+=s(U),b+=`<node name="${v.name}" index="${v.phraseIndex}" length="${v.phraseLength}">
`,b+=s(U+2),b+=S(x,v.phraseIndex,v.phraseLength),b+=`
`):(b+=s(U),b+=`</node><!-- name="${v.name}" -->
`,U-=1)}),b+=`</root>
`,b},this.phrases=function(){const u={};let S,l;for(S=0;S<i.length;S+=1)l=i[S],l.state===t.SEM_PRE&&(Array.isArray(u[l.name])||(u[l.name]=[]),u[l.name].push({index:l.phraseIndex,length:l.phraseLength}));return u}}),Le}var Ne,rt;function kt(){return rt||(rt=1,Ne=function(){const t="circular-buffer.js: ";let e=-1,o=0;this.init=function(C){if(typeof C!="number"||C<=0)throw new Error(`${t}init: circular buffer size must an integer > 0`);o=Math.ceil(C),e=-1},this.increment=function(){return e+=1,(e+o)%o},this.maxSize=function(){return o},this.items=function(){return e+1},this.getListIndex=function(C){return e===-1||C<0||C>e||e-C>=o?-1:(C+o)%o},this.forEach=function(C){if(e!==-1){if(e<o){for(let B=0;B<=e;B+=1)C(B,B);return}for(let B=e-o+1;B<=e;B+=1){const x=(B+o)%o;C(x,B)}}}}),Ne}var Be,st;function wt(){return st||(st=1,Be=function(){const t=ye(),e=Ae(),o="parser.js: ",h=this;let C;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let B=null,x=null,T,$,g,n,i=0,s=0,a=0,u=null,S=null,l=null,b=null,U=null,v=0,V=1/0,f=1/0;const K=function(E,r,d){const F=`${o}evaluateRule(): `;if(E>=l.length)throw new Error(`${F}rule index: ${E} out of range`);if(r>=g)throw new Error(`${F}phrase index: ${r} out of range`);const{length:P}=B;B.push({type:t.RNM,index:E}),C(P,r,d),B.pop()},X=function(R,E,r){const d=`${o}evaluateUdt(): `;if(R>=b.length)throw new Error(`${d}udt index: ${R} out of range`);if(E>=g)throw new Error(`${d}phrase index: ${E} out of range`);const{length:F}=B;B.push({type:t.UDT,empty:b[R].empty,index:R}),C(F,E,r),B.pop()},j=function(){i=0,s=0,a=0,v=0,n=[{lookAround:t.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],l=null,b=null,x=null,T=0,$=0,g=0,u=null,S=null,U=null,B=null},w=function(){const R=[],E=function(){const d={};l.forEach(F=>{F.isBkr&&(d[F.lower]=null)}),b.length>0&&b.forEach(F=>{F.isBkr&&(d[F.lower]=null)}),R.push(d)},r=function(){const d=R[R.length-1],F={};for(const P in d)F[P]=d[P];return F};this.push=function(){R.push(r())},this.pop=function(F){let P=F;if(P||(P=R.length-1),P<1||P>R.length)throw new Error(`${o}backRef.pop(): bad length: ${P}`);return R.length=P,R[R.length-1]},this.length=function(){return R.length},this.savePhrase=function(F,P,z){R[R.length-1][F]={phraseIndex:P,phraseLength:z}},this.getPhrase=function(d){return R[R.length-1][d]},E()},L=function(){const E=this;this.state=t.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=n[n.length-1],this.uFrame=new w,this.pFrame=new w,this.evaluateRule=K,this.evaluateUdt=X,this.refresh=function(){E.state=t.ACTIVE,E.phraseLength=0,E.lookAround=n[n.length-1]}},O=function(){return n[n.length-1]},p=function(){return n.length>1},y=function(){return n[n.length-1].lookAround===t.LOOKAROUND_BEHIND},te=function(){const R=`${o}initializeAst(): `,E=!0;for(;E;){if(h.ast===void 0){h.ast=null;break}if(h.ast===null)break;if(h.ast.astObject!=="astObject")throw new Error(`${R}ast object not recognized`);break}h.ast!==null&&h.ast.init(l,b,x)},W=function(){const R=`${o}initializeTrace(): `,E=!0;for(;E;){if(h.trace===void 0){h.trace=null;break}if(h.trace===null)break;if(h.trace.traceObject!=="traceObject")throw new Error(`${R}trace object not recognized`);break}h.trace!==null&&h.trace.init(l,b,x)},Q=function(){const R=`${o}initializeStats(): `,E=!0;for(;E;){if(h.stats===void 0){h.stats=null;break}if(h.stats===null)break;if(h.stats.statsObject!=="statsObject")throw new Error(`${R}stats object not recognized`);break}h.stats!==null&&h.stats.init(l,b)},ae=function(R){const E=`${o}initializeGrammar(): `;if(!R)throw new Error(`${E}grammar object undefined`);if(R.grammarObject!=="grammarObject")throw new Error(`${E}bad grammar object`);l=R.rules,b=R.udts},pe=function(R){const E=`${o}initializeStartRule(): `;let r=null;if(typeof R=="number"){if(R>=l.length)throw new Error(`${E}start rule index too large: max: ${l.length}: index: ${R}`);r=R}else if(typeof R=="string"){const d=R.toLowerCase();for(let F=0;F<l.length;F+=1)if(d===l[F].lower){r=l[F].index;break}if(r===null)throw new Error(`${E}start rule name '${R}' not recognized`)}else throw new Error(`${E}type of start rule '${typeof R}' not recognized`);return r},Y=function(E,r,d){const F=`${o}initializeInputChars(): `;let P=E,z=r,se=d;if(P===void 0)throw new Error(`${F}input string is undefined`);if(P===null)throw new Error(`${F}input string is null`);if(typeof P=="string")P=e.stringToChars(P);else if(!Array.isArray(P))throw new Error(`${F}input string is not a string or array`);if(P.length>0&&typeof P[0]!="number")throw new Error(`${F}input string not an array of integers`);if(typeof z!="number")z=0;else if(z=Math.floor(z),z<0||z>P.length)throw new Error(`${F}input beginning index out of range: ${z}`);if(typeof se!="number")se=P.length-z;else if(se=Math.floor(se),se<0||se>P.length-z)throw new Error(`${F}input length out of range: ${se}`);x=P,T=z,$=se,g=T+$},J=function(){const R=`${o}initializeCallbacks(): `;let E;for(u=[],S=[],E=0;E<l.length;E+=1)u[E]=null;for(E=0;E<b.length;E+=1)S[E]=null;let r;const d=[];for(E=0;E<l.length;E+=1)d.push(l[E].lower);for(E=0;E<b.length;E+=1)d.push(b[E].lower);for(const F in h.callbacks){if(E=d.indexOf(F.toLowerCase()),E<0)throw new Error(`${R}syntax callback '${F}' not a rule or udt name`);if(r=h.callbacks[F],r||(r=null),typeof r=="function"||r===null)E<l.length?u[E]=r:S[E-l.length]=r;else throw new Error(`${R}syntax callback[${F}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(E=0;E<b.length;E+=1)if(S[E]===null)throw new Error(`${R}all UDT callbacks must be defined. UDT callback[${b[E].lower}] not a function reference`)};this.setMaxTreeDepth=function(R){if(typeof R!="number")throw new Error(`parser: max tree depth must be integer > 0: ${R}`);if(V=Math.floor(R),V<=0)throw new Error(`parser: max tree depth must be integer > 0: ${R}`)},this.setMaxNodeHits=function(R){if(typeof R!="number")throw new Error(`parser: max node hits must be integer > 0: ${R}`);if(f=Math.floor(R),f<=0)throw new Error(`parser: max node hits must be integer > 0: ${R}`)};const q=function(R,E,r){let d;const F=`${o}parse(): `;ae(R);const P=pe(E);J(),W(),Q(),te();const z=new L;switch(r!=null&&(U=r),B=[{type:t.RNM,index:P}],C(0,T,z),B=null,z.state){case t.ACTIVE:throw new Error(`${F}final state should never be 'ACTIVE'`);case t.NOMATCH:d=!1;break;case t.EMPTY:case t.MATCH:z.phraseLength===$?d=!0:d=!1;break;default:throw new Error("unrecognized state")}return{success:d,state:z.state,length:$,matched:z.phraseLength,maxMatched:v,maxTreeDepth:s,nodeHits:a,inputLength:x.length,subBegin:T,subEnd:g,subLength:$}};this.parseSubstring=function(E,r,d,F,P,z){return j(),Y(d,F,P),q(E,r,z)},this.parse=function(E,r,d,F){return j(),Y(d,0,d.length),q(E,r,F)};const k=function(R,E,r){const d=B[R];for(let F=0;F<d.children.length&&(C(d.children[F],E,r),r.state===t.NOMATCH);F+=1);},ue=function(R,E,r){let d,F,P,z;const se=B[R],de=r.uFrame.length(),fe=r.pFrame.length();h.ast&&(F=h.ast.getLength()),d=!0,P=E,z=0;for(let le=0;le<se.children.length;le+=1)if(C(se.children[le],P,r),r.state===t.NOMATCH){d=!1;break}else P+=r.phraseLength,z+=r.phraseLength;d?(r.state=z===0?t.EMPTY:t.MATCH,r.phraseLength=z):(r.state=t.NOMATCH,r.phraseLength=0,r.uFrame.pop(de),r.pFrame.pop(fe),h.ast&&h.ast.setLength(F))},me=function(R,E,r){let d,F,P,z;const se=B[R];F=E,P=0,z=0;const de=r.uFrame.length(),fe=r.pFrame.length();h.ast&&(d=h.ast.getLength());const le=!0;for(;le&&!(F>=g||(C(R+1,F,r),r.state===t.NOMATCH)||r.state===t.EMPTY||(z+=1,P+=r.phraseLength,F+=r.phraseLength,z===se.max)););r.state===t.EMPTY||z>=se.min?(r.state=P===0?t.EMPTY:t.MATCH,r.phraseLength=P):(r.state=t.NOMATCH,r.phraseLength=0,r.uFrame.pop(de),r.pFrame.pop(fe),h.ast&&h.ast.setLength(d))},Ee=function(R,E,r,d){if(E.phraseLength>r){let F=`${o}opRNM(${R.name}): callback function error: `;throw F+=`sysData.phraseLength: ${E.phraseLength}`,F+=` must be <= remaining chars: ${r}`,new Error(F)}switch(E.state){case t.ACTIVE:if(d!==!0)throw new Error(`${o}opRNM(${R.name}): callback function return error. ACTIVE state not allowed.`);break;case t.EMPTY:E.phraseLength=0;break;case t.MATCH:E.phraseLength===0&&(E.state=t.EMPTY);break;case t.NOMATCH:E.phraseLength=0;break;default:throw new Error(`${o}opRNM(${R.name}): callback function return error. Unrecognized return state: ${E.state}`)}},ce=function(R,E,r){let d,F,P,z,se,de;const fe=B[R],le=l[fe.index],ge=u[le.index],ke=!p();if(ke&&(F=h.ast&&h.ast.ruleDefined(fe.index),F&&(d=h.ast.getLength(),h.ast.down(fe.index,l[fe.index].name)),z=r.uFrame.length(),se=r.pFrame.length(),r.uFrame.push(),r.pFrame.push(),de=r.pFrame,r.pFrame=new w),ge===null)P=B,B=le.opcodes,C(0,E,r),B=P;else{const Xe=g-E;r.ruleIndex=le.index,ge(r,x,E,U),Ee(le,r,Xe,!0),r.state===t.ACTIVE&&(P=B,B=le.opcodes,C(0,E,r),B=P,r.ruleIndex=le.index,ge(r,x,E,U),Ee(le,r,Xe,!1))}ke&&(F&&(r.state===t.NOMATCH?h.ast.setLength(d):h.ast.up(fe.index,le.name,E,r.phraseLength)),r.pFrame=de,r.state===t.NOMATCH?(r.uFrame.pop(z),r.pFrame.pop(se)):le.isBkr&&(r.pFrame.savePhrase(le.lower,E,r.phraseLength),r.uFrame.savePhrase(le.lower,E,r.phraseLength)))},A=function(R,E,r){if(E.phraseLength>r){let d=`${o}opUDT(${R.name}): callback function error: `;throw d+=`sysData.phraseLength: ${E.phraseLength}`,d+=` must be <= remaining chars: ${r}`,new Error(d)}switch(E.state){case t.ACTIVE:throw new Error(`${o}opUDT(${R.name}): callback function return error. ACTIVE state not allowed.`);case t.EMPTY:if(R.empty===!1)throw new Error(`${o}opUDT(${R.name}): callback function return error. May not return EMPTY.`);E.phraseLength=0;break;case t.MATCH:if(E.phraseLength===0){if(R.empty===!1)throw new Error(`${o}opUDT(${R.name}): callback function return error. May not return EMPTY.`);E.state=t.EMPTY}break;case t.NOMATCH:E.phraseLength=0;break;default:throw new Error(`${o}opUDT(${R.name}): callback function return error. Unrecognized return state: ${E.state}`)}},m=function(R,E,r){let d,F,P,z,se,de;const fe=B[R],le=b[fe.index];r.UdtIndex=le.index;const ge=!p();ge&&(P=h.ast&&h.ast.udtDefined(fe.index),P&&(F=l.length+fe.index,d=h.ast.getLength(),h.ast.down(F,le.name)),z=r.uFrame.length(),se=r.pFrame.length(),r.uFrame.push(),r.pFrame.push(),de=r.pFrame,r.pFrame=new w);const ke=g-E;S[fe.index](r,x,E,U),A(le,r,ke),ge&&(P&&(r.state===t.NOMATCH?h.ast.setLength(d):h.ast.up(F,le.name,E,r.phraseLength)),r.pFrame=de,r.state===t.NOMATCH?(r.uFrame.pop(z),r.pFrame.pop(se)):le.isBkr&&(r.pFrame.savePhrase(le.lower,E,r.phraseLength),r.uFrame.savePhrase(le.lower,E,r.phraseLength)))},N=function(R,E,r){n.push({lookAround:t.LOOKAROUND_AHEAD,anchor:E,charsEnd:g,charsLength:$}),g=x.length,$=x.length-T,C(R+1,E,r);const d=n.pop();switch(g=d.charsEnd,$=d.charsLength,r.phraseLength=0,r.state){case t.EMPTY:r.state=t.EMPTY;break;case t.MATCH:r.state=t.EMPTY;break;case t.NOMATCH:r.state=t.NOMATCH;break;default:throw new Error(`opAND: invalid state ${r.state}`)}},D=function(R,E,r){n.push({lookAround:t.LOOKAROUND_AHEAD,anchor:E,charsEnd:g,charsLength:$}),g=x.length,$=x.length-T,C(R+1,E,r);const d=n.pop();switch(g=d.charsEnd,$=d.charsLength,r.phraseLength=0,r.state){case t.EMPTY:case t.MATCH:r.state=t.NOMATCH;break;case t.NOMATCH:r.state=t.EMPTY;break;default:throw new Error(`opNOT: invalid state ${r.state}`)}},ee=function(R,E,r){const d=B[R];r.state=t.NOMATCH,E<g&&d.min<=x[E]&&x[E]<=d.max&&(r.state=t.MATCH,r.phraseLength=1)},ne=function(R,E,r){let d;const F=B[R],P=F.string.length;if(r.state=t.NOMATCH,E+P<=g){for(d=0;d<P;d+=1)if(x[E+d]!==F.string[d])return;r.state=t.MATCH,r.phraseLength=P}},ie=function(R,E,r){let d,F;const P=B[R];r.state=t.NOMATCH;const z=P.string.length;if(z===0){r.state=t.EMPTY;return}if(E+z<=g){for(d=0;d<z;d+=1)if(F=x[E+d],F>=65&&F<=90&&(F+=32),F!==P.string[d])return;r.state=t.MATCH,r.phraseLength=z}},H=function(R,E,r){r.state=t.NOMATCH,r.phraseLength=0,r.state=E===0?t.EMPTY:t.NOMATCH},G=function(R,E,r){r.state=t.NOMATCH,r.phraseLength=0,r.state=E===x.length?t.EMPTY:t.NOMATCH},M=function(R,E,r){let d,F,P,z;const se=B[R];r.state=t.NOMATCH,se.index<l.length?z=l[se.index].lower:z=b[se.index-l.length].lower;const de=se.bkrMode===t.BKR_MODE_PM?r.pFrame.getPhrase(z):r.uFrame.getPhrase(z),fe=se.bkrCase===t.BKR_MODE_CI;if(de===null)return;const le=de.phraseIndex,ge=de.phraseLength;if(ge===0){r.state=t.EMPTY;return}if(E+ge<=g){if(fe){for(d=0;d<ge;d+=1)if(F=x[E+d],P=x[le+d],F>=65&&F<=90&&(F+=32),P>=65&&P<=90&&(P+=32),F!==P)return;r.state=t.MATCH,r.phraseLength=ge}else for(d=0;d<ge;d+=1)if(F=x[E+d],P=x[le+d],F!==P)return;r.state=t.MATCH,r.phraseLength=ge}},I=function(R,E,r){switch(n.push({lookAround:t.LOOKAROUND_BEHIND,anchor:E}),C(R+1,E,r),n.pop(),r.phraseLength=0,r.state){case t.EMPTY:r.state=t.EMPTY;break;case t.MATCH:r.state=t.EMPTY;break;case t.NOMATCH:r.state=t.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${r.state}`)}},c=function(R,E,r){switch(n.push({lookAround:t.LOOKAROUND_BEHIND,anchor:E}),C(R+1,E,r),n.pop(),r.phraseLength=0,r.state){case t.EMPTY:case t.MATCH:r.state=t.NOMATCH;break;case t.NOMATCH:r.state=t.EMPTY;break;default:throw new Error(`opBKN: invalid state ${r.state}`)}},_=function(R,E,r){let d,F,P,z;const se=B[R],de=r.uFrame.length(),fe=r.pFrame.length();h.ast&&(F=h.ast.getLength()),d=!0,P=E,z=0;for(let le=se.children.length-1;le>=0;le-=1)if(C(se.children[le],P,r),P-=r.phraseLength,z+=r.phraseLength,r.state===t.NOMATCH){d=!1;break}d?(r.state=z===0?t.EMPTY:t.MATCH,r.phraseLength=z):(r.state=t.NOMATCH,r.phraseLength=0,r.uFrame.pop(de),r.pFrame.pop(fe),h.ast&&h.ast.setLength(F))},re=function(R,E,r){let d,F,P,z;const se=B[R];F=E,P=0,z=0;const de=r.uFrame.length(),fe=r.pFrame.length();h.ast&&(d=h.ast.getLength());const le=!0;for(;le&&!(F<=0||(C(R+1,F,r),r.state===t.NOMATCH)||r.state===t.EMPTY||(z+=1,P+=r.phraseLength,F-=r.phraseLength,z===se.max)););r.state===t.EMPTY||z>=se.min?(r.state=P===0?t.EMPTY:t.MATCH,r.phraseLength=P):(r.state=t.NOMATCH,r.phraseLength=0,r.uFrame.pop(de),r.pFrame.pop(fe),h.ast&&h.ast.setLength(d))},oe=function(R,E,r){const d=B[R];if(r.state=t.NOMATCH,r.phraseLength=0,E>0){const F=x[E-1];d.min<=F&&F<=d.max&&(r.state=t.MATCH,r.phraseLength=1)}},he=function(R,E,r){let d;const F=B[R];r.state=t.NOMATCH;const P=F.string.length,z=E-P;if(z>=0){for(d=0;d<P;d+=1)if(x[z+d]!==F.string[d])return;r.state=t.MATCH,r.phraseLength=P}},xe=function(R,E,r){let d;const F=B[R];r.state=t.NOMATCH;const P=F.string.length;if(P===0){r.state=t.EMPTY;return}const z=E-P;if(z>=0){for(let se=0;se<P;se+=1)if(d=x[z+se],d>=65&&d<=90&&(d+=32),d!==F.string[se])return;r.state=t.MATCH,r.phraseLength=P}},Se=function(R,E,r){let d,F,P,z;const se=B[R];r.state=t.NOMATCH,r.phraseLength=0,se.index<l.length?z=l[se.index].lower:z=b[se.index-l.length].lower;const de=se.bkrMode===t.BKR_MODE_PM?r.pFrame.getPhrase(z):r.uFrame.getPhrase(z),fe=se.bkrCase===t.BKR_MODE_CI;if(de===null)return;const le=de.phraseIndex,ge=de.phraseLength;if(ge===0){r.state=t.EMPTY,r.phraseLength=0;return}const ke=E-ge;if(ke>=0){if(fe){for(d=0;d<ge;d+=1)if(F=x[ke+d],P=x[le+d],F>=65&&F<=90&&(F+=32),P>=65&&P<=90&&(P+=32),F!==P)return;r.state=t.MATCH,r.phraseLength=ge}else for(d=0;d<ge;d+=1)if(F=x[ke+d],P=x[le+d],F!==P)return;r.state=t.MATCH,r.phraseLength=ge}};C=function(E,r,d){let F=!0;const P=B[E];if(a+=1,a>f)throw new Error(`parser: maximum number of node hits exceeded: ${f}`);if(i+=1,i>s&&(s=i,s>V))throw new Error(`parser: maximum parse tree depth exceeded: ${V}`);if(d.refresh(),h.trace!==null){const z=O();h.trace.down(P,d.state,r,d.phraseLength,z.anchor,z.lookAround)}if(y())switch(P.type){case t.ALT:k(E,r,d);break;case t.CAT:_(E,r,d);break;case t.REP:re(E,r,d);break;case t.RNM:ce(E,r,d);break;case t.UDT:m(E,r,d);break;case t.AND:N(E,r,d);break;case t.NOT:D(E,r,d);break;case t.TRG:oe(E,r,d);break;case t.TBS:he(E,r,d);break;case t.TLS:xe(E,r,d);break;case t.BKR:Se(E,r,d);break;case t.BKA:I(E,r,d);break;case t.BKN:c(E,r,d);break;case t.ABG:H(E,r,d);break;case t.AEN:G(E,r,d);break;default:F=!1;break}else switch(P.type){case t.ALT:k(E,r,d);break;case t.CAT:ue(E,r,d);break;case t.REP:me(E,r,d);break;case t.RNM:ce(E,r,d);break;case t.UDT:m(E,r,d);break;case t.AND:N(E,r,d);break;case t.NOT:D(E,r,d);break;case t.TRG:ee(E,r,d);break;case t.TBS:ne(E,r,d);break;case t.TLS:ie(E,r,d);break;case t.BKR:M(E,r,d);break;case t.BKA:I(E,r,d);break;case t.BKN:c(E,r,d);break;case t.ABG:H(E,r,d);break;case t.AEN:G(E,r,d);break;default:F=!1;break}if(!p()&&r+d.phraseLength>v&&(v=r+d.phraseLength),h.stats!==null&&h.stats.collect(P,d),h.trace!==null){const z=O();h.trace.up(P,d.state,r,d.phraseLength,z.anchor,z.lookAround)}return i-=1,F}}),Be}var _e,it;function Ct(){return it||(it=1,_e=function(){const t=ye(),e=Ae(),o=Me(),h="stats.js: ";let C=[],B=[];const x=[];let T;const $=[],g=[];this.statsObject="statsObject";const n="stats",i=function(f,K){return f.lower<K.lower?-1:f.lower>K.lower?1:0},s=function(f,K){return f.total<K.total?1:f.total>K.total?-1:i(f,K)},a=function(f,K){return f.index<K.index?-1:f.index>K.index?1:0},u=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},S=function(){x.length=0,T=new u,x[t.ALT]=new u,x[t.CAT]=new u,x[t.REP]=new u,x[t.RNM]=new u,x[t.TRG]=new u,x[t.TBS]=new u,x[t.TLS]=new u,x[t.UDT]=new u,x[t.AND]=new u,x[t.NOT]=new u,x[t.BKR]=new u,x[t.BKA]=new u,x[t.BKN]=new u,x[t.ABG]=new u,x[t.AEN]=new u,$.length=0;for(let f=0;f<C.length;f+=1)$.push({empty:0,match:0,nomatch:0,total:0,name:C[f].name,lower:C[f].lower,index:C[f].index});if(B.length>0){g.length=0;for(let f=0;f<B.length;f+=1)g.push({empty:0,match:0,nomatch:0,total:0,name:B[f].name,lower:B[f].lower,index:B[f].index})}},l=function(f,K){switch(f.total+=1,K){case t.EMPTY:f.empty+=1;break;case t.MATCH:f.match+=1;break;case t.NOMATCH:f.nomatch+=1;break;default:throw new Error(`${h}collect(): incStat(): unrecognized state: ${K}`)}},b=function(f,K){let X="";return X+="<tr>",X+=`<td class="${o.CLASS_ACTIVE}">${f}</td>`,X+=`<td class="${o.CLASS_EMPTY}">${K.empty}</td>`,X+=`<td class="${o.CLASS_MATCH}">${K.match}</td>`,X+=`<td class="${o.CLASS_NOMATCH}">${K.nomatch}</td>`,X+=`<td class="${o.CLASS_ACTIVE}">${K.total}</td>`,X+=`</tr>
`,X},U=function(){let f="";return f+=b("ALT",x[t.ALT]),f+=b("CAT",x[t.CAT]),f+=b("REP",x[t.REP]),f+=b("RNM",x[t.RNM]),f+=b("TRG",x[t.TRG]),f+=b("TBS",x[t.TBS]),f+=b("TLS",x[t.TLS]),f+=b("UDT",x[t.UDT]),f+=b("AND",x[t.AND]),f+=b("NOT",x[t.NOT]),f+=b("BKR",x[t.BKR]),f+=b("BKA",x[t.BKA]),f+=b("BKN",x[t.BKN]),f+=b("ABG",x[t.ABG]),f+=b("AEN",x[t.AEN]),f+=b("totals",T),f},v=function(){let f="";f+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,f+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let K=0;K<C.length;K+=1)$[K].total>0&&(f+="<tr>",f+=`<td class="${o.CLASS_ACTIVE}">${$[K].name}</td>`,f+=`<td class="${o.CLASS_EMPTY}">${$[K].empty}</td>`,f+=`<td class="${o.CLASS_MATCH}">${$[K].match}</td>`,f+=`<td class="${o.CLASS_NOMATCH}">${$[K].nomatch}</td>`,f+=`<td class="${o.CLASS_ACTIVE}">${$[K].total}</td>`,f+=`</tr>
`);if(B.length>0){f+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,f+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let K=0;K<B.length;K+=1)g[K].total>0&&(f+="<tr>",f+=`<td class="${o.CLASS_ACTIVE}">${g[K].name}</td>`,f+=`<td class="${o.CLASS_EMPTY}">${g[K].empty}</td>`,f+=`<td class="${o.CLASS_MATCH}">${g[K].match}</td>`,f+=`<td class="${o.CLASS_NOMATCH}">${g[K].nomatch}</td>`,f+=`<td class="${o.CLASS_ACTIVE}">${g[K].total}</td>`,f+=`</tr>
`)}return f};this.validate=function(f){let K=!1;return typeof f=="string"&&n===f&&(K=!0),K},this.init=function(f,K){C=f,B=K,S()},this.collect=function(f,K){l(T,K.state,K.phraseLength),l(x[f.type],K.state,K.phraseLength),f.type===t.RNM&&l($[f.index],K.state,K.phraseLength),f.type===t.UDT&&l(g[f.index],K.state,K.phraseLength)},this.toHtml=function(f,K){let X="";X+=`<table class="${o.CLASS_STATS}">
`,typeof K=="string"&&(X+=`<caption>${K}</caption>
`),X+=`<tr><th class="${o.CLASS_ACTIVE}">ops</th>
`,X+=`<th class="${o.CLASS_EMPTY}">EMPTY</th>
`,X+=`<th class="${o.CLASS_MATCH}">MATCH</th>
`,X+=`<th class="${o.CLASS_NOMATCH}">NOMATCH</th>
`,X+=`<th class="${o.CLASS_ACTIVE}">totals</th></tr>
`;const j=!0;for(;j;){if(f===void 0){X+=U();break}if(f===null){X+=U();break}if(f==="ops"){X+=U();break}if(f==="index"){$.sort(a),g.length>0&&g.sort(a),X+=U(),X+=v();break}if(f==="hits"){$.sort(s),g.length>0&&g.sort(a),X+=U(),X+=v();break}if(f==="alpha"){$.sort(i),g.length>0&&g.sort(i),X+=U(),X+=v();break}break}return X+=`</table>
`,X},this.toHtmlPage=function(f,K,X){return e.htmlToPage(this.toHtml(f,K),X)}}),_e}var Pe,ot;function St(){return ot||(ot=1,Pe=function(){const t=Ae(),e=Me(),o=new(kt()),h=ye(),C="trace.js: ",B=this,x=16,T=10,$=8,g=32,n=80,i=5,s=[];let a=5e3,u=-1,S=0,l=0;const b=[];let U=null,v=null,V=null;const f=[],K=[],X=`<span class="${e.CLASS_LINEEND}">&bull;</span>`,j=`<span class="${e.CLASS_LINEEND}">&hellip;</span>`,w=`<span class="${e.CLASS_EMPTY}">&#120634;</span>`,L=function(){const A=function(N){f[h.ALT]=N,f[h.CAT]=N,f[h.REP]=N,f[h.TLS]=N,f[h.TBS]=N,f[h.TRG]=N,f[h.AND]=N,f[h.NOT]=N,f[h.BKR]=N,f[h.BKA]=N,f[h.BKN]=N,f[h.ABG]=N,f[h.AEN]=N};let m=0;for(const N in B.filter.operators)m+=1;if(m===0){A(!1);return}for(const N in B.filter.operators){const D=N.toUpperCase();if(D==="<ALL>"){A(!0);return}if(D==="<NONE>"){A(!1);return}}A(!1);for(const N in B.filter.operators){const D=N.toUpperCase();if(D==="ALT")f[h.ALT]=B.filter.operators[N]===!0;else if(D==="CAT")f[h.CAT]=B.filter.operators[N]===!0;else if(D==="REP")f[h.REP]=B.filter.operators[N]===!0;else if(D==="AND")f[h.AND]=B.filter.operators[N]===!0;else if(D==="NOT")f[h.NOT]=B.filter.operators[N]===!0;else if(D==="TLS")f[h.TLS]=B.filter.operators[N]===!0;else if(D==="TBS")f[h.TBS]=B.filter.operators[N]===!0;else if(D==="TRG")f[h.TRG]=B.filter.operators[N]===!0;else if(D==="BKR")f[h.BKR]=B.filter.operators[N]===!0;else if(D==="BKA")f[h.BKA]=B.filter.operators[N]===!0;else if(D==="BKN")f[h.BKN]=B.filter.operators[N]===!0;else if(D==="ABG")f[h.ABG]=B.filter.operators[N]===!0;else if(D==="AEN")f[h.AEN]=B.filter.operators[N]===!0;else throw new Error(`${C}initOpratorFilter: '${N}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},O=function(){const A=function(ee){f[h.RNM]=ee,f[h.UDT]=ee;const ne=v.length+V.length;K.length=0;for(let ie=0;ie<ne;ie+=1)K.push(ee)};let m,N;const D=[];for(N=0;N<v.length;N+=1)D.push(v[N].lower);for(N=0;N<V.length;N+=1)D.push(V[N].lower);K.length=0,m=0;for(const ee in B.filter.rules)m+=1;if(m===0){A(!0);return}for(const ee in B.filter.rules){const ne=ee.toLowerCase();if(ne==="<all>"){A(!0);return}if(ne==="<none>"){A(!1);return}}A(!1),f[h.RNM]=!0,f[h.UDT]=!0;for(const ee in B.filter.rules){const ne=ee.toLowerCase();if(N=D.indexOf(ne),N<0)throw new Error(`${C}initRuleFilter: '${ee}' not a valid rule or udt name`);K[N]=B.filter.rules[ee]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(A,m){if(u=-1,typeof A=="number"&&A>0)a=Math.ceil(A);else{a=0;return}typeof m=="number"&&(u=Math.floor(m),u<0&&(u=-1))},this.getMaxRecords=function(){return a},this.getLastRecord=function(){return u},this.init=function(A,m,N){s.length=0,b.length=0,S=0,l=0,U=N,v=A,V=m,L(),O(),o.init(a)};const p=function(A){let m=!1;return A.type===h.RNM?f[A.type]&&K[A.index]?m=!0:m=!1:A.type===h.UDT?f[A.type]&&K[v.length+A.index]?m=!0:m=!1:m=f[A.type],m},y=function(A){return u===-1||A<=u};this.down=function(A,m,N,D,ee,ne){y(S)&&p(A)&&(b.push(S),s[o.increment()]={dirUp:!1,depth:l,thisLine:S,thatLine:void 0,opcode:A,state:m,phraseIndex:N,phraseLength:D,lookAnchor:ee,lookAround:ne},S+=1,l+=1)},this.up=function(A,m,N,D,ee,ne){if(y(S)&&p(A)){const ie=S,H=b.pop(),G=o.getListIndex(H);G!==-1&&(s[G].thatLine=ie),l-=1,s[o.increment()]={dirUp:!0,depth:l,thisLine:ie,thatLine:H,opcode:A,state:m,phraseIndex:N,phraseLength:D,lookAnchor:ee,lookAround:ne},S+=1}};const te=function(){function A(r,d){let F,P,z;if(d)switch(r.op={id:d.type,name:t.opcodeToString(d.type)},r.opData=void 0,d.type){case h.RNM:r.opData=v[d.index].name;break;case h.UDT:r.opData=V[d.index].name;break;case h.BKR:d.index<v.length?F=v[d.index].name:F=V[d.index-v.length].name,P=d.bkrCase===h.BKR_MODE_CI?"%i":"%s",z=d.bkrMode===h.BKR_MODE_UM?"%u":"%p",r.opData=`\\\\${P}${z}${F}`;break;case h.TLS:r.opData=[];for(let se=0;se<d.string.length;se+=1)r.opData.push(d.string[se]);break;case h.TBS:r.opData=[];for(let se=0;se<d.string.length;se+=1)r.opData.push(d.string[se]);break;case h.TRG:r.opData=[d.min,d.max];break;case h.REP:r.opData=[d.min,d.max];break;default:throw new Error("unrecognized opcode")}else r.op={id:void 0,name:void 0},r.opData=void 0}function m(r,d,F){return r===h.MATCH?{index:d,length:F}:r===h.NOMATCH?{index:d,length:0}:r===h.EMPTY?{index:d,length:0}:null}let N=-1;function D(r,d,F){const P={id:N++,branch:-1,parent:r,up:!1,down:!1,depth:F,children:[]};return d?(P.down=!0,P.state={id:d.state,name:t.stateToString(d.state)},P.phrase=null,A(P,d.opcode)):(P.state={id:void 0,name:void 0},P.phrase=m(),A(P,void 0)),P}function ee(r,d){d&&(r.up=!0,r.state={id:d.state,name:t.stateToString(d.state)},r.phrase=m(d.state,d.phraseIndex,d.phraseLength),r.down||A(r,d.opcode))}let ne=0,ie=-1,H=1;function G(r){if(ie+=1,r.branch=H,ie>l&&(l=ie),r.children.length===0)ne+=1;else for(let d=0;d<r.children.length;d+=1)d>0&&(H+=1),r.children[d].leftMost=!1,r.children[d].rightMost=!1,r.leftMost&&(r.children[d].leftMost=d===0),r.rightMost&&(r.children[d].rightMost=d===r.children.length-1),G(r.children[d]);ie-=1}function M(r,d){let F;const P={};if(P.id=r.id,P.branch=r.branch,P.leftMost=r.leftMost,P.rightMost=r.rightMost,F=r.state.name?r.state.name:"ACTIVE",P.state={id:r.state.id,name:F},F=r.op.name?r.op.name:"?",P.op={id:r.op.id,name:F},typeof r.opData=="string")P.opData=r.opData;else if(Array.isArray(r.opData)){P.opData=[];for(let z=0;z<r.opData.length;z+=1)P.opData[z]=r.opData[z]}else P.opData=void 0;r.phrase?P.phrase={index:r.phrase.index,length:r.phrase.length}:P.phrase=null,P.depth=r.depth,P.children=[];for(let z=0;z<r.children.length;z+=1)r.children.length-1,P.children[z]=M(r.children[z]);return P}const I=[];let c,_,re,oe,he=!0;const xe=D(null,null,-1);for(I.push(xe),_=xe,o.forEach(r=>{if(oe=s[r],he&&(he=!1,oe.depth>0)){const d=oe.dirUp?oe.depth+1:oe.depth;for(let F=0;F<d;F+=1)re=_,_=D(_,null,F),I.push(_),re.children.push(_)}oe.dirUp?(_=I.pop(),ee(_,oe),_=I[I.length-1]):(re=_,_=D(_,oe,oe.depth),I.push(_),re.children.push(_))});I.length>1;)_=I.pop(),ee(_,null);if(xe.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(I.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");c=xe.children[0];let Se=c;for(;c&&!c.down&&!c.up;)Se=c,c=c.children[0];c=Se,c.leftMost=!0,c.rightMost=!0,G(c),c.branch=0;const R={};R.string=[];for(let r=0;r<U.length;r+=1)R.string[r]=U[r];R.rules=[];for(let r=0;r<v.length;r+=1)R.rules[r]=v[r].name;R.udts=[];for(let r=0;r<V.length;r+=1)R.udts[r]=V[r].name;R.id={},R.id.ALT={id:h.ALT,name:"ALT"},R.id.CAT={id:h.CAT,name:"CAT"},R.id.REP={id:h.REP,name:"REP"},R.id.RNM={id:h.RNM,name:"RNM"},R.id.TLS={id:h.TLS,name:"TLS"},R.id.TBS={id:h.TBS,name:"TBS"},R.id.TRG={id:h.TRG,name:"TRG"},R.id.UDT={id:h.UDT,name:"UDT"},R.id.AND={id:h.AND,name:"AND"},R.id.NOT={id:h.NOT,name:"NOT"},R.id.BKR={id:h.BKR,name:"BKR"},R.id.BKA={id:h.BKA,name:"BKA"},R.id.BKN={id:h.BKN,name:"BKN"},R.id.ABG={id:h.ABG,name:"ABG"},R.id.AEN={id:h.AEN,name:"AEN"},R.id.ACTIVE={id:h.ACTIVE,name:"ACTIVE"},R.id.MATCH={id:h.MATCH,name:"MATCH"},R.id.EMPTY={id:h.EMPTY,name:"EMPTY"},R.id.NOMATCH={id:h.NOMATCH,name:"NOMATCH"},R.treeDepth=l,R.leafNodes=ne;let E;return c.down?c.up?E="none":E="right":c.up?E="left":E="both",R.branchesIncomplete=E,R.tree=M(c,c.depth),R};this.toTree=function(A){const m=te();return A?JSON.stringify(m):m},this.toHtmlPage=function(A,m,N){return t.htmlToPage(this.toHtml(A,m),N)};const W=function(A,m){let N;switch(A){case x:N="hexadecimal";break;case T:N="decimal";break;case $:N="ASCII";break;case g:N="UNICODE";break;default:throw new Error(`${C}htmlHeader: unrecognized mode: ${A}`)}let D="";return D+=`<p>display mode: ${N}</p>
`,D+=`<table class="${e.CLASS_TRACE}">
`,typeof m=="string"&&(D+=`<caption>${m}</caption>`),D},Q=function(){let A="";return A+=`</table>
`,A+=`<p class="${e.CLASS_MONOSPACE}">legend:<br>
`,A+=`(a)&nbsp;-&nbsp;line number<br>
`,A+=`(b)&nbsp;-&nbsp;matching line number<br>
`,A+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,A+=`(d)&nbsp;-&nbsp;phrase length<br>
`,A+=`(e)&nbsp;-&nbsp;tree depth<br>
`,A+=`(f)&nbsp;-&nbsp;operator state<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,A+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,A+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${n} characters of the phrase being matched<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_MATCH}">matched characters</span><br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${w} empty string<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${X} end of input string<br>
`,A+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${j} input string display truncated<br>
`,A+=`</p>
`,A+=`<p class="${e.CLASS_MONOSPACE}">
`,A+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,A+=`ALT - alternation<br>
`,A+=`CAT - concatenation<br>
`,A+=`REP - repetition<br>
`,A+=`RNM - rule name<br>
`,A+=`TRG - terminal range<br>
`,A+=`TLS - terminal literal string (case insensitive)<br>
`,A+=`TBS - terminal binary string (case sensitive)<br>
`,A+=`<br>
`,A+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,A+=`UDT - user-defined terminal<br>
`,A+=`AND - positive look ahead<br>
`,A+=`NOT - negative look ahead<br>
`,A+=`BKA - positive look behind<br>
`,A+=`BKN - negative look behind<br>
`,A+=`BKR - back reference<br>
`,A+=`ABG - anchor - begin of input string<br>
`,A+=`AEN - anchor - end of input string<br>
`,A+=`</p>
`,A};this.indent=function(A){let m="";for(let N=0;N<A;N+=1)m+=".";return m};const ae=function(A,m){let N="";if(m.type===h.TRG)if(A===x||A===g){let D=m.min.toString(16).toUpperCase();D.length%2!==0&&(D=`0${D}`),N+=A===x?"%x":"U+",N+=D,D=m.max.toString(16).toUpperCase(),D.length%2!==0&&(D=`0${D}`),N+=`&ndash;${D}`}else N=`%d${m.min.toString(10)}&ndash;${m.max.toString(10)}`;return N},pe=function(A,m){let N="";if(m.type===h.REP)if(A===x){let D=m.min.toString(16).toUpperCase();D.length%2!==0&&(D=`0${D}`),N=`x${D}`,m.max<1/0?(D=m.max.toString(16).toUpperCase(),D.length%2!==0&&(D=`0${D}`)):D="inf",N+=`&ndash;${D}`}else m.max<1/0?N=`${m.min.toString(10)}&ndash;${m.max.toString(10)}`:N=`${m.min.toString(10)}&ndash;inf`;return N},Y=function(A,m){let N="";if(m.type===h.TBS){const D=Math.min(m.string.length,i*2);if(A===x||A===g){N+=A===x?"%x":"U+";for(let ee=0;ee<D;ee+=1){let ne;ee>0&&(N+="."),ne=m.string[ee].toString(16).toUpperCase(),ne.length%2!==0&&(ne=`0${ne}`),N+=ne}}else{N="%d";for(let ee=0;ee<D;ee+=1)ee>0&&(N+="."),N+=m.string[ee].toString(10)}D<m.string.length&&(N+=j)}return N},J=function(A,m){let N="";if(m.type===h.TLS){const D=Math.min(m.string.length,i);if(A===x||A===T){let ee,ne,ie;A===x?(N="%x",ie=16):(N="%d",ie=10);for(let H=0;H<D;H+=1)H>0&&(N+="."),ne=m.string[H],ne>=97&&ne<=122?(ee=ne-32,N+=`${ee.toString(ie)}/${ne.toString(ie)}`.toUpperCase()):ne>=65&&ne<=90?(ee=ne,ne+=32,N+=`${ee.toString(ie)}/${ne.toString(ie)}`.toUpperCase()):N+=ne.toString(ie).toUpperCase();D<m.string.length&&(N+=j)}else{N='"';for(let ee=0;ee<D;ee+=1)N+=t.asciiChars[m.string[ee]];D<m.string.length&&(N+=j),N+='"'}}return N},q=function(A,m,N,D,ee){if(D===0)return"";let ne="";const ie=ee?",":"";switch(A){case x:ne=ie+t.charsToHex(m,N,D);break;case T:if(ee)return`,${t.charsToDec(m,N,D)}`;ne=ie+t.charsToDec(m,N,D);break;case g:ne=t.charsToUnicode(m,N,D);break;case $:default:ne=t.charsToAsciiHtml(m,N,D);break}return ne},k=function(A,m,N,D,ee,ne){let ie="",H,G,M,I,c=X;const _=`<span class="${e.CLASS_LOOKBEHIND}">`,re=`<span class="${e.CLASS_REMAINDER}">`,oe="</span>";let he=!1;switch(N){case h.EMPTY:ie+=w;case h.NOMATCH:case h.MATCH:case h.ACTIVE:H=D-ee,G=ne-H,M=ne,I=m.length-M;break;default:throw new Error("unrecognized state")}return c=X,G>n?(G=n,c=j,I=0):G+I>n&&(c=j,I=n-G),G>0&&(ie+=_,ie+=q(A,m,H,G,he),ie+=oe,he=!0),I>0&&(ie+=re,ie+=q(A,m,M,I,he),ie+=oe),ie+c},ue=function(A,m,N,D,ee,ne){let ie="",H,G,M,I,c=X;const _=`<span class="${e.CLASS_REMAINDER}">`,re="</span>";let oe=!1;switch(N){case h.EMPTY:ie+=w;case h.NOMATCH:case h.ACTIVE:H=D,G=0,M=D,I=m.length-M;break;case h.MATCH:H=D,G=ee,M=D+G,I=m.length-M;break;default:throw new Error("unrecognized state")}return c=X,G>n?(G=n,c=j,I=0):G+I>n&&(c=j,I=n-G),G>0&&(ie+=ne,ie+=q(A,m,H,G,oe),ie+=re,oe=!0),I>0&&(ie+=_,ie+=q(A,m,M,I,oe),ie+=re),ie+c},me=function(A,m,N,D,ee){const ne=`<span class="${e.CLASS_LOOKAHEAD}">`;return ue(A,m,N,D,ee,ne)},Ee=function(A,m,N,D,ee){const ne=`<span class="${e.CLASS_MATCH}">`;return ue(A,m,N,D,ee,ne)},ce=function(A){if(v===null)return"";let m="",N,D,ee,ne,ie,H;return m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",m+=`<th>operator</th><th>phrase</th></tr>
`,o.forEach(G=>{const M=s[G];switch(N=M.thisLine,D=M.thatLine!==void 0?M.thatLine:"--",ee=!1,ne=!1,ie=!1,M.lookAround===h.LOOKAROUND_AHEAD&&(ee=!0,ie=!0,H=M.lookAnchor),(M.opcode.type===h.AND||M.opcode.type===h.NOT)&&(ee=!0,ie=!0,H=M.phraseIndex),M.lookAround===h.LOOKAROUND_BEHIND&&(ne=!0,ie=!0,H=M.lookAnchor),(M.opcode.type===h.BKA||M.opcode.type===h.BKN)&&(ne=!0,ie=!0,H=M.phraseIndex),m+="<tr>",m+=`<td>${N}</td><td>${D}</td>`,m+=`<td>${M.phraseIndex}</td>`,m+=`<td>${M.phraseLength}</td>`,m+=`<td>${M.depth}</td>`,m+="<td>",M.state){case h.ACTIVE:m+=`<span class="${e.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case h.MATCH:m+=`<span class="${e.CLASS_MATCH}">&uarr;M</span>`;break;case h.NOMATCH:m+=`<span class="${e.CLASS_NOMATCH}">&uarr;N</span>`;break;case h.EMPTY:m+=`<span class="${e.CLASS_EMPTY}">&uarr;E</span>`;break;default:m+=`<span class="${e.CLASS_ACTIVE}">--</span>`;break}if(m+="</td>",m+="<td>",m+=B.indent(M.depth),ee?m+=`<span class="${e.CLASS_LOOKAHEAD}">`:ne&&(m+=`<span class="${e.CLASS_LOOKBEHIND}">`),m+=t.opcodeToString(M.opcode.type),M.opcode.type===h.RNM&&(m+=`(${v[M.opcode.index].name}) `),M.opcode.type===h.BKR){const I=M.opcode.bkrCase===h.BKR_MODE_CI?"%i":"%s",c=M.opcode.bkrMode===h.BKR_MODE_UM?"%u":"%p";m+=`(\\${I}${c}${v[M.opcode.index].name}) `}M.opcode.type===h.UDT&&(m+=`(${V[M.opcode.index].name}) `),M.opcode.type===h.TRG&&(m+=`(${ae(A,M.opcode)}) `),M.opcode.type===h.TBS&&(m+=`(${Y(A,M.opcode)}) `),M.opcode.type===h.TLS&&(m+=`(${J(A,M.opcode)}) `),M.opcode.type===h.REP&&(m+=`(${pe(A,M.opcode)}) `),ie&&(m+="</span>"),m+="</td>",m+="<td>",ne?m+=k(A,U,M.state,M.phraseIndex,M.phraseLength,H):ee?m+=me(A,U,M.state,M.phraseIndex,M.phraseLength):m+=Ee(A,U,M.state,M.phraseIndex,M.phraseLength),m+=`</td></tr>
`}),m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",m+=`<th>operator</th><th>phrase</th></tr>
`,m+=`</table>
`,m};this.toHtml=function(A,m){let N=$;if(typeof A=="string"&&A.length>=3){const ee=A.toLowerCase().slice(0,3);ee==="hex"?N=x:ee==="dec"?N=T:ee==="uni"&&(N=g)}let D="";return D+=W(N,m),D+=ce(N),D+=Q(),D}}),Pe}var He,lt;function we(){return lt||(lt=1,He={ast:At(),circular:kt(),ids:ye(),parser:wt(),stats:Ct(),trace:St(),utils:Ae(),emitcss:yt(),style:Me()}),He}var Fe,at;function Mt(){return at||(at=1,Fe=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let e="";return e+=`file = *line [last-line]
`,e+=`line = line-text end
`,e+=`line-text = *(valid/invalid)
`,e+=`last-line = 1*(valid/invalid)
`,e+=`valid = %d32-126 / %d9
`,e+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,e+=`end = CRLF / LF / CR
`,e+=`CRLF = %d13.10
`,e+=`LF = %d10
`,e+=`CR = %d13
`,e}}),Fe}var Ue={},ct;function $t(){if(ct)return Ue;ct=1;const Z=ye(),t=Ae();function e(n,i,s,a,u){return n===Z.SEM_PRE?(u.endLength=0,u.textLength=0,u.invalidCount=0):u.lines.push({lineNo:u.lines.length,beginChar:s,length:a,textLength:u.textLength,endType:u.endType,invalidChars:u.invalidCount}),Z.SEM_OK}function o(n,i,s,a,u){return n===Z.SEM_PRE&&(u.textLength=a),Z.SEM_OK}function h(n,i,s,a,u){return n===Z.SEM_PRE?(u.endLength=0,u.textLength=0,u.invalidCount=0):u.strict?(u.lines.push({lineNo:u.lines.length,beginChar:s,length:a,textLength:a,endType:"none",invalidChars:u.invalidCount}),u.errors.push({line:u.lineNo,char:s+a,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(i.push(10),u.lines.push({lineNo:u.lines.length,beginChar:s,length:a+1,textLength:a,endType:"LF",invalidChars:u.invalidCount})),Z.SEM_OK}function C(n,i,s,a,u){return n===Z.SEM_PRE&&u.errors.push({line:u.lineNo,char:s,msg:`invalid character found '\\x${t.charToHex(i[s])}'`}),Z.SEM_OK}function B(n,i,s,a,u){return n===Z.SEM_POST&&(u.lineNo+=1),Z.SEM_OK}function x(n,i,s,a,u){return n===Z.SEM_PRE&&(u.endType="LF",u.strict&&u.errors.push({line:u.lineNo,char:s,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Z.SEM_OK}function T(n,i,s,a,u){return n===Z.SEM_PRE&&(u.endType="CR",u.strict&&u.errors.push({line:u.lineNo,char:s,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Z.SEM_OK}function $(n,i,s,a,u){return n===Z.SEM_PRE&&(u.endType="CRLF"),Z.SEM_OK}const g=[];return g.line=e,g["line-text"]=o,g["last-line"]=h,g.invalid=C,g.end=B,g.lf=x,g.cr=T,g.crlf=$,Ue.callbacks=g,Ue}var ve,ut;function Ot(){return ut||(ut=1,ve=function(t,e,o,h){const C="scanner.js: ",B=we(),x=new(Mt()),{callbacks:T}=$t(),$=[],g=new B.parser;if(g.ast=new B.ast,g.ast.callbacks=T,h){if(h.traceObject!=="traceObject")throw new TypeError(`${C}trace argument is not a trace object`);g.trace=h}if(g.parse(x,"file",t).success!==!0){e.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const i={lines:$,lineNo:0,errors:e,strict:!!o};return g.ast.translate(i),$}),ve}var Ke,ht;function Rt(){return ht||(ht=1,Ke=function(){const t="syntax-callbacks.js: ",e=we(),o=e.ids;let h;const C=function(J,q,k,ue){switch(J.state){case o.ACTIVE:ue.altStack=[],ue.repCount=0;break;case o.EMPTY:ue.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case o.MATCH:ue.ruleCount===0&&ue.errors.push({line:0,char:0,msg:"no rules defined"});break;case o.NOMATCH:throw new Error(`${t}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${t}synFile: unrecognized case.`)}},B=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:k.altStack.length=0,h={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},k.altStack.push(h);break;case o.EMPTY:throw new Error(`${t}synRule: EMPTY: rule cannot be empty`);case o.NOMATCH:break;case o.MATCH:k.ruleCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},x=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},T=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},$=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},g=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},n=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},i=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},s=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},a=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},u=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},S=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:if(k.strict){const ue=e.utils.charsToString(J,q,Y.phraseLength);k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:`Back reference operator(${ue}) found - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},l=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:if(k.strict){const ue=e.utils.charsToString(J,q,Y.phraseLength);k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:`UDT operator found(${ue}) - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},b=function(Y,J,q){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h.tlsOpen=q;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},U=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:k.stringTabChar=!1;break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.stringTabChar!==!1&&k.errors.push({line:k.findLine(k.lines,k.stringTabChar),char:k.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},v=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.stringTabChar=q;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},V=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.errors.push({line:k.findLine(k.lines,h.tlsOpen),char:h.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),h.basicError=!0,h.tlsOpen=null;break;case o.MATCH:h.tlsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},f=function(Y,J,q){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h.clsOpen=q;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},K=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:k.stringTabChar=!1;break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.stringTabChar!==!1&&k.errors.push({line:k.findLine(k.lines,k.stringTabChar),char:k.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},X=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.errors.push({line:k.findLine(k.lines,h.clsOpen),char:h.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),h.clsOpen=null,h.basicError=!0;break;case o.MATCH:k.strict&&k.errors.push({line:k.findLine(k.lines,h.clsOpen),char:h.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),h.clsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},j=function(Y,J,q){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h.prosValOpen=q;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},w=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:k.stringTabChar=!1;break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.stringTabChar!==!1&&k.errors.push({line:k.findLine(k.lines,k.stringTabChar),char:k.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},L=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.errors.push({line:k.findLine(k.lines,h.prosValOpen),char:h.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),h.basicError=!0,h.prosValOpen=null;break;case o.MATCH:k.errors.push({line:k.findLine(k.lines,h.prosValOpen),char:h.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),h.prosValOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},O=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h={groupOpen:q,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},k.altStack.push(h);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},p=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.errors.push({line:k.findLine(k.lines,h.groupOpen),char:h.groupOpen,msg:'Group "(...)" opened but not closed.'}),h=k.altStack.pop(),h.groupError=!0;break;case o.MATCH:h=k.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},y=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h={groupOpen:null,groupError:!1,optionOpen:q,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},k.altStack.push(h);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},te=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.errors.push({line:k.findLine(k.lines,h.optionOpen),char:h.optionOpen,msg:'Option "[...]" opened but not closed.'}),h=k.altStack.pop(),h.optionError=!0;break;case o.MATCH:h=k.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},W=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:h.basicError===!1&&k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},Q=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:if(Y.phraseLength===1&&k.strict){const ue=J[q]===13?"CR":"LF";k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:`Line end '${ue}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},ae=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:break;case o.MATCH:k.errors.push({line:k.findLine(k.lines,q,k.charsLength),char:q,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},pe=function(Y,J,q,k){switch(Y.state){case o.ACTIVE:break;case o.EMPTY:break;case o.NOMATCH:k.repCount+=1;break;case o.MATCH:k.repCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=g,this.callbacks.basicelementerr=W,this.callbacks.clsclose=X,this.callbacks.clsopen=f,this.callbacks.clsstring=K,this.callbacks.definedaserror=$,this.callbacks.file=C,this.callbacks.groupclose=p,this.callbacks.groupopen=O,this.callbacks.lineenderror=ae,this.callbacks.lineend=Q,this.callbacks.notop=n,this.callbacks.optionclose=te,this.callbacks.optionopen=y,this.callbacks.prosvalclose=L,this.callbacks.prosvalopen=j,this.callbacks.prosvalstring=w,this.callbacks.repetition=pe,this.callbacks.rule=B,this.callbacks.ruleerror=x,this.callbacks.rulenameerror=T,this.callbacks.stringtab=v,this.callbacks.tlsclose=V,this.callbacks.tlsopen=b,this.callbacks.tlsstring=U,this.callbacks.udtop=l,this.callbacks.bkaop=i,this.callbacks.bknop=s,this.callbacks.bkrop=S,this.callbacks.abgop=a,this.callbacks.aenop=u}),Ke}var Ie,pt;function Lt(){return pt||(pt=1,Ie=function(){const t=we(),e=t.ids,o=function(){this.names=[],this.add=function(M){let I=-1;return this.get(M)===-1&&(I={name:M,lower:M.toLowerCase(),index:this.names.length},this.names.push(I)),I},this.get=function(M){let I=-1;const c=M.toLowerCase();for(let _=0;_<this.names.length;_+=1)if(this.names[_].lower===c){I=this.names[_];break}return I}},h=function(G,M,I){let c=0;for(let _=M;_<M+I;_+=1)c=10*c+G[_]-48;return c},C=function(G,M,I){let c=0;for(let _=M;_<M+I;_+=1)c=2*c+G[_]-48;return c},B=function(G,M,I){let c=0;for(let _=M;_<M+I;_+=1){let re=G[_];if(re>=48&&re<=57)re-=48;else if(re>=65&&re<=70)re-=55;else if(re>=97&&re<=102)re-=87;else throw new Error("hexnum out of range");c=16*c+re}return c};function x(H,G,M,I,c){const _=e.SEM_OK;if(H===e.SEM_PRE)c.ruleNames=new o,c.udtNames=new o,c.rules=[],c.udts=[],c.rulesLineMap=[],c.opcodes=[],c.altStack=[],c.topStack=null,c.topRule=null;else if(H===e.SEM_POST){let re;c.rules.forEach(oe=>{oe.isBkr=!1,oe.opcodes.forEach(he=>{he.type===e.RNM&&(re=c.ruleNames.get(he.index.name),re===-1?(c.errors.push({line:c.findLine(c.lines,he.index.phraseIndex,c.charsLength),char:he.index.phraseIndex,msg:`Rule name '${he.index.name}' used but not defined.`}),he.index=-1):he.index=re.index)})}),c.udts.forEach(oe=>{oe.isBkr=!1}),c.rules.forEach(oe=>{oe.opcodes.forEach(he=>{he.type===e.BKR&&(oe.hasBkr=!0,re=c.ruleNames.get(he.index.name),re!==-1?(c.rules[re.index].isBkr=!0,he.index=re.index):(re=c.udtNames.get(he.index.name),re!==-1?(c.udts[re.index].isBkr=!0,he.index=c.rules.length+re.index):(c.errors.push({line:c.findLine(c.lines,he.index.phraseIndex,c.charsLength),char:he.index.phraseIndex,msg:`Back reference name '${he.index.name}' refers to undefined rule or unamed UDT.`}),he.index=-1)))})})}return _}function T(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE&&(c.altStack.length=0,c.topStack=null,c.rulesLineMap.push({line:c.findLine(c.lines,M,c.charsLength),char:M})),_}function $(H,G,M,I,c){const _=e.SEM_OK;if(H===e.SEM_PRE)c.ruleName="",c.definedas="";else if(H===e.SEM_POST){let re;c.definedas==="="?(re=c.ruleNames.add(c.ruleName),re===-1?(c.definedas=null,c.errors.push({line:c.findLine(c.lines,M,c.charsLength),char:M,msg:`Rule name '${c.ruleName}' previously defined.`})):(c.topRule={name:re.name,lower:re.lower,opcodes:[],index:re.index},c.rules.push(c.topRule),c.opcodes=c.topRule.opcodes)):(re=c.ruleNames.get(c.ruleName),re===-1?(c.definedas=null,c.errors.push({line:c.findLine(c.lines,M,c.charsLength),char:M,msg:`Rule name '${c.ruleName}' for incremental alternate not previously defined.`})):(c.topRule=c.rules[re.index],c.opcodes=c.topRule.opcodes))}return _}function g(H,G,M,I,c){let _=e.SEM_OK;if(H===e.SEM_PRE)for(;;){if(c.definedas===null){_=e.SEM_SKIP;break}if(c.topStack===null){if(c.definedas==="="){c.topStack={alt:{type:e.ALT,children:[]},cat:null},c.altStack.push(c.topStack),c.opcodes.push(c.topStack.alt);break}c.topStack={alt:c.opcodes[0],cat:null},c.altStack.push(c.topStack);break}c.topStack={alt:{type:e.ALT,children:[]},cat:null},c.altStack.push(c.topStack),c.opcodes.push(c.topStack.alt);break}else H===e.SEM_POST&&(c.altStack.pop(),c.altStack.length>0?c.topStack=c.altStack[c.altStack.length-1]:c.topStack=null);return _}function n(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE?(c.topStack.alt.children.push(c.opcodes.length),c.topStack.cat={type:e.CAT,children:[]},c.opcodes.push(c.topStack.cat)):H===e.SEM_POST&&(c.topStack.cat=null),_}function i(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE&&c.topStack.cat.children.push(c.opcodes.length),_}function s(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.REP,min:0,max:1,char:M}),_}function a(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE&&(c.ruleName=t.utils.charsToString(G,M,I)),_}function u(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.definedas="="),_}function S(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.definedas="=/"),_}function l(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE?(c.min=0,c.max=1/0,c.topRep={type:e.REP,min:0,max:1/0},c.opcodes.push(c.topRep)):H===e.SEM_POST&&(c.min>c.max&&c.errors.push({line:c.findLine(c.lines,M,c.charsLength),char:M,msg:`repetition min cannot be greater than max: min: ${c.min}: max: ${c.max}`}),c.topRep.min=c.min,c.topRep.max=c.max),_}function b(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.min=h(G,M,I)),_}function U(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.max=h(G,M,I)),_}function v(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.max=h(G,M,I),c.min=c.max),_}function V(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.AND}),_}function f(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.NOT}),_}function K(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.RNM,index:{phraseIndex:M,name:t.utils.charsToString(G,M,I)}}),_}function X(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.ABG}),_}function j(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.AEN}),_}function w(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.BKA}),_}function L(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.opcodes.push({type:e.BKN}),_}function O(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE?(c.ci=!0,c.cs=!1,c.um=!0,c.pm=!1):H===e.SEM_POST&&c.opcodes.push({type:e.BKR,bkrCase:c.cs===!0?e.BKR_MODE_CS:e.BKR_MODE_CI,bkrMode:c.pm===!0?e.BKR_MODE_PM:e.BKR_MODE_UM,index:{phraseIndex:c.bkrname.phraseIndex,name:t.utils.charsToString(G,c.bkrname.phraseIndex,c.bkrname.phraseLength)}}),_}function p(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.ci=!0),_}function y(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.cs=!0),_}function te(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.um=!0),_}function W(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.pm=!0),_}function Q(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.bkrname={phraseIndex:M,phraseLength:I}),_}function ae(H,G,M,I,c){const _=e.SEM_OK;if(H===e.SEM_POST){const re=t.utils.charsToString(G,M,I);let oe=c.udtNames.add(re);if(oe===-1){if(oe=c.udtNames.get(re),oe===-1)throw new Error("semUdtEmpty: name look up error")}else c.udts.push({name:oe.name,lower:oe.lower,index:oe.index,empty:!0});c.opcodes.push({type:e.UDT,empty:!0,index:oe.index})}return _}function pe(H,G,M,I,c){const _=e.SEM_OK;if(H===e.SEM_POST){const re=t.utils.charsToString(G,M,I);let oe=c.udtNames.add(re);if(oe===-1){if(oe=c.udtNames.get(re),oe===-1)throw new Error("semUdtNonEmpty: name look up error")}else c.udts.push({name:oe.name,lower:oe.lower,index:oe.index,empty:!1});c.opcodes.push({type:e.UDT,empty:!1,index:oe.index,syntax:null,semantic:null})}return _}function Y(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE&&(c.tlscase=!0),_}function J(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&I>0&&(G[M+1]===83||G[M+1]===115)&&(c.tlscase=!1),_}function q(H,G,M,I,c){const _=e.SEM_OK;if(H===e.SEM_POST)if(c.tlscase){const re=G.slice(M,M+I);for(let oe=0;oe<re.length;oe+=1)re[oe]>=65&&re[oe]<=90&&(re[oe]+=32);c.opcodes.push({type:e.TLS,string:re})}else c.opcodes.push({type:e.TBS,string:G.slice(M,M+I)});return _}function k(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(I<=2?c.opcodes.push({type:e.TLS,string:[]}):c.opcodes.push({type:e.TBS,string:G.slice(M+1,M+I-1)})),_}function ue(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE?c.tbsstr=[]:H===e.SEM_POST&&c.opcodes.push({type:e.TBS,string:c.tbsstr}),_}function me(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_PRE?(c.min=0,c.max=0):H===e.SEM_POST&&(c.min>c.max&&c.errors.push({line:c.findLine(c.lines,M,c.charsLength),char:M,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${c.min}: max: ${c.max}`}),c.opcodes.push({type:e.TRG,min:c.min,max:c.max})),_}function Ee(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.min=h(G,M,I)),_}function ce(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.max=h(G,M,I)),_}function A(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.min=C(G,M,I)),_}function m(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.max=C(G,M,I)),_}function N(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.min=B(G,M,I)),_}function D(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&(c.max=B(G,M,I)),_}function ee(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.tbsstr.push(h(G,M,I)),_}function ne(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.tbsstr.push(C(G,M,I)),_}function ie(H,G,M,I,c){const _=e.SEM_OK;return H===e.SEM_POST&&c.tbsstr.push(B(G,M,I)),_}this.callbacks=[],this.callbacks.abgop=X,this.callbacks.aenop=j,this.callbacks.alternation=g,this.callbacks.andop=V,this.callbacks.bmax=m,this.callbacks.bmin=A,this.callbacks.bkaop=w,this.callbacks.bknop=L,this.callbacks.bkrop=O,this.callbacks["bkr-name"]=Q,this.callbacks.bstring=ne,this.callbacks.clsop=k,this.callbacks.ci=p,this.callbacks.cs=y,this.callbacks.um=te,this.callbacks.pm=W,this.callbacks.concatenation=n,this.callbacks.defined=u,this.callbacks.dmax=ce,this.callbacks.dmin=Ee,this.callbacks.dstring=ee,this.callbacks.file=x,this.callbacks.incalt=S,this.callbacks.notop=f,this.callbacks.optionopen=s,this.callbacks["rep-max"]=U,this.callbacks["rep-min"]=b,this.callbacks["rep-min-max"]=v,this.callbacks.repetition=i,this.callbacks.repop=l,this.callbacks.rnmop=K,this.callbacks.rule=T,this.callbacks.rulelookup=$,this.callbacks.rulename=a,this.callbacks.tbsop=ue,this.callbacks.tlscase=J,this.callbacks.tlsstring=q,this.callbacks.tlsop=Y,this.callbacks.trgop=me,this.callbacks["udt-empty"]=ae,this.callbacks["udt-non-empty"]=pe,this.callbacks.xmax=D,this.callbacks.xmin=N,this.callbacks.xstring=ie}),Ie}var Ge,ft;function Nt(){return ft||(ft=1,Ge=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let e="";return e+=`;
`,e+=`; ABNF for JavaScript APG 2.0 SABNF
`,e+=`; RFC 5234 with some restrictions and additions.
`,e+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,e+=`;  - accepts %s"string" as a case-sensitive string
`,e+=`;  - accepts %i"string" as a case-insensitive string
`,e+=`;  - accepts "string" as a case-insensitive string
`,e+=`;
`,e+=`; Some restrictions:
`,e+=`;   1. Rules must begin at first character of each line.
`,e+=`;      Indentations on first rule and rules thereafter are not allowed.
`,e+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,e+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,e+=`;      However, a working parser cannot be generated from them.
`,e+=`;
`,e+=`; Super set (SABNF) additions:
`,e+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,e+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,e+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,e+=`;      e.g. &%d13 or &rule or !(A / B)
`,e+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,e+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,e+=`;      u_name may be used as an element but no rule definition is given.
`,e+=`;      e.g. rule = A / u_myUdt
`,e+=`;           A = "a"
`,e+=`;      would be a valid grammar.
`,e+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,e+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,e+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,e+=`; New 12/26/2015
`,e+=`;   4. Look-behind operators are accepted as element prefixes.
`,e+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,e+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,e+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,e+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,e+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,e+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,e+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,e+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,e+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,e+=`;      Back reference modifiers can be used to specify case and mode.
`,e+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,e+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,e+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,e+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,e+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,e+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,e+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,e+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,e+=`;
`,e+=`File            = *(BlankLine / Rule / RuleError)
`,e+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,e+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,e+=`                / (LineEndError LineEnd))
`,e+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,e+=`RuleNameTest    = RuleName/RuleNameError
`,e+=`RuleName        = alphanum
`,e+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,e+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,e+=`DefinedAsError  = 1*2%d33-126
`,e+=`DefinedAs       = IncAlt / Defined
`,e+=`Defined         = %d61
`,e+=`IncAlt          = %d61.47
`,e+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,e+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,e+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,e+=`Concatenation   = Repetition *(CatOp Repetition)
`,e+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,e+=`Modifier        = (Predicate [RepOp])
`,e+=`                / RepOp
`,e+=`Predicate       = BkaOp
`,e+=`                / BknOp
`,e+=`                / AndOp
`,e+=`                / NotOp
`,e+=`BasicElement    = UdtOp
`,e+=`                / RnmOp
`,e+=`                / TrgOp
`,e+=`                / TbsOp
`,e+=`                / TlsOp
`,e+=`                / ClsOp
`,e+=`                / BkrOp
`,e+=`                / AbgOp
`,e+=`                / AenOp
`,e+=`                / ProsVal
`,e+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,e+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,e+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,e+=`GroupOpen       = %d40 owsp
`,e+=`GroupClose      = owsp %d41
`,e+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,e+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,e+=`OptionOpen      = %d91 owsp
`,e+=`OptionClose     = owsp %d93
`,e+=`RnmOp           = alphanum
`,e+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,e+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,e+=`cs              = '%s'
`,e+=`ci              = '%i'
`,e+=`um              = '%u'
`,e+=`pm              = '%p'
`,e+=`bkr-name        = uname / ename / rname
`,e+=`rname           = alphanum
`,e+=`uname           = %d117.95 alphanum
`,e+=`ename           = %d101.95 alphanum
`,e+=`UdtOp           = udt-empty
`,e+=`                / udt-non-empty
`,e+=`udt-non-empty   = %d117.95 alphanum
`,e+=`udt-empty       = %d101.95 alphanum
`,e+=`RepOp           = (rep-min StarOp rep-max)
`,e+=`                / (rep-min StarOp)
`,e+=`                / (StarOp rep-max)
`,e+=`                / StarOp
`,e+=`                / rep-min-max
`,e+=`AltOp           = %d47 owsp
`,e+=`CatOp           = wsp
`,e+=`StarOp          = %d42
`,e+=`AndOp           = %d38
`,e+=`NotOp           = %d33
`,e+=`BkaOp           = %d38.38
`,e+=`BknOp           = %d33.33
`,e+=`AbgOp           = %d37.94
`,e+=`AenOp           = %d37.36
`,e+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,e+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,e+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,e+=`TlsCase         = ["%i" / "%s"]
`,e+=`TlsOpen         = %d34
`,e+=`TlsClose        = %d34
`,e+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,e+=`StringTab       = %d9
`,e+=`ClsOp           = ClsOpen ClsString ClsClose
`,e+=`ClsOpen         = %d39
`,e+=`ClsClose        = %d39
`,e+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,e+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,e+=`ProsValOpen     = %d60
`,e+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,e+=`ProsValClose    = %d62
`,e+=`rep-min         = rep-num
`,e+=`rep-min-max     = rep-num
`,e+=`rep-max         = rep-num
`,e+=`rep-num         = 1*(%d48-57)
`,e+=`dString         = dnum
`,e+=`xString         = xnum
`,e+=`bString         = bnum
`,e+=`Dec             = (%d68/%d100)
`,e+=`Hex             = (%d88/%d120)
`,e+=`Bin             = (%d66/%d98)
`,e+=`dmin            = dnum
`,e+=`dmax            = dnum
`,e+=`bmin            = bnum
`,e+=`bmax            = bnum
`,e+=`xmin            = xnum
`,e+=`xmax            = xnum
`,e+=`dnum            = 1*(%d48-57)
`,e+=`bnum            = 1*%d48-49
`,e+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,e+=`;
`,e+=`; Basics
`,e+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,e+=`owsp            = *space
`,e+=`wsp             = 1*space
`,e+=`space           = %d32
`,e+=`                / %d9
`,e+=`                / comment
`,e+=`                / LineContinue
`,e+=`comment         = %d59 *(%d32-126 / %d9)
`,e+=`LineEnd         = %d13.10
`,e+=`                / %d10
`,e+=`                / %d13
`,e+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,e}}),Ge}var De,dt;function Bt(){return dt||(dt=1,De=function(){const t="parser: ",e=we(),o=e.ids,h=new(Rt()),C=new(Lt()),B=new(Nt()),x=new e.parser;x.ast=new e.ast,x.callbacks=h.callbacks,x.ast.callbacks=C.callbacks;const T=function(i,s,a){if(s<0||s>=a)return-1;for(let u=0;u<i.length;u+=1)if(s>=i[u].beginChar&&s<i[u].beginChar+i[u].length)return u;return-1},$=function(i,s){let a=-1;if(s<i.length){for(let u=s;u<i.length;u+=1)if(i[u]!==null){a=i[u];break}}return a},g=function(i){i.forEach(s=>{const a=[],u=[];let S=0;s.opcodes.forEach(l=>{l.type===o.ALT&&l.children.length===1||l.type===o.CAT&&l.children.length===1||l.type===o.REP&&l.min===1&&l.max===1?u.push(null):(u.push(S),a.push(l),S+=1)}),u.push(S),a.forEach(l=>{if(l.type===o.ALT||l.type===o.CAT)for(let b=0;b<l.children.length;b+=1)l.children[b]=$(u,l.children[b])}),s.opcodes=a})};this.syntax=function(i,s,a,u,S){if(S){if(S.traceObject!=="traceObject")throw new TypeError(`${t}trace argument is not a trace object`);x.trace=S}const l={};l.errors=a,l.strict=!!u,l.lines=s,l.findLine=T,l.charsLength=i.length,l.ruleCount=0,x.parse(B,"file",i,l).success||a.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(i,s,a){const u={};return u.errors=a,u.lines=s,u.findLine=T,u.charsLength=i.length,x.ast.translate(u),a.length?null:(g(u.rules),{rules:u.rules,udts:u.udts,lineMap:u.rulesLineMap})},this.generateSource=function(i,s,a,u,S){let l="",b,U,v,V=0,f=1/0,K=0;const X=[],j=[];let w=0,L=0,O=0,p=0,y=0,te=0,W=0,Q=0,ae=0,pe=0,Y=0,J=0,q=0,k=0,ue=0;a.forEach(ce=>{X.push(ce.lower),V+=ce.opcodes.length,ce.opcodes.forEach(A=>{switch(A.type){case o.ALT:w+=1;break;case o.CAT:L+=1;break;case o.RNM:O+=1;break;case o.UDT:p+=1;break;case o.REP:y+=1;break;case o.AND:te+=1;break;case o.NOT:W+=1;break;case o.BKA:J+=1;break;case o.BKN:q+=1;break;case o.BKR:Y+=1;break;case o.ABG:k+=1;break;case o.AEN:ue+=1;break;case o.TLS:for(Q+=1,b=0;b<A.string.length;b+=1)A.string[b]<f&&(f=A.string[b]),A.string[b]>K&&(K=A.string[b]);break;case o.TBS:for(ae+=1,b=0;b<A.string.length;b+=1)A.string[b]<f&&(f=A.string[b]),A.string[b]>K&&(K=A.string[b]);break;case o.TRG:pe+=1,A.min<f&&(f=A.min),A.max>K&&(K=A.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),X.sort(),u.length>0&&(u.forEach(ce=>{j.push(ce.lower)}),j.sort());let me="module.exports";S&&typeof S=="string"&&(me=`let ${S}`),l+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,l+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,l+=`//
`,l+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,l+=`${me} = function grammar(){
`,l+="  // ```\n",l+=`  // SUMMARY
`,l+=`  //      rules = ${a.length}
`,l+=`  //       udts = ${u.length}
`,l+=`  //    opcodes = ${V}
`,l+=`  //        ---   ABNF original opcodes
`,l+=`  //        ALT = ${w}
`,l+=`  //        CAT = ${L}
`,l+=`  //        REP = ${y}
`,l+=`  //        RNM = ${O}
`,l+=`  //        TLS = ${Q}
`,l+=`  //        TBS = ${ae}
`,l+=`  //        TRG = ${pe}
`,l+=`  //        ---   SABNF superset opcodes
`,l+=`  //        UDT = ${p}
`,l+=`  //        AND = ${te}
`,l+=`  //        NOT = ${W}
`,l+=`  //        BKA = ${J}
`,l+=`  //        BKN = ${q}
`,l+=`  //        BKR = ${Y}
`,l+=`  //        ABG = ${k}
`,l+=`  //        AEN = ${ue}
`,l+="  // characters = [",Q+ae+pe===0?l+=" none defined ]":l+=`${f} - ${K}]`,p>0&&(l+=" + user defined"),l+=`
`,l+="  // ```\n",l+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,l+=`  this.grammarObject = 'grammarObject';
`,l+=`
`,l+=`  /* RULES */
`,l+=`  this.rules = [];
`,a.forEach((ce,A)=>{let m="  this.rules[";m+=A,m+="] = {name: '",m+=ce.name,m+="', lower: '",m+=ce.lower,m+="', index: ",m+=ce.index,m+=", isBkr: ",m+=ce.isBkr,m+=`};
`,l+=m}),l+=`
`,l+=`  /* UDTS */
`,l+=`  this.udts = [];
`,u.length>0&&u.forEach((ce,A)=>{let m="  this.udts[";m+=A,m+="] = {name: '",m+=ce.name,m+="', lower: '",m+=ce.lower,m+="', index: ",m+=ce.index,m+=", empty: ",m+=ce.empty,m+=", isBkr: ",m+=ce.isBkr,m+=`};
`,l+=m}),l+=`
`,l+=`  /* OPCODES */
`,a.forEach((ce,A)=>{A>0&&(l+=`
`),l+=`  /* ${ce.name} */
`,l+=`  this.rules[${A}].opcodes = [];
`,ce.opcodes.forEach((m,N)=>{let D;switch(m.type){case o.ALT:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, children: [${m.children.toString()}]};// ALT
`;break;case o.CAT:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, children: [${m.children.toString()}]};// CAT
`;break;case o.RNM:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, index: ${m.index}};// RNM(${a[m.index].name})
`;break;case o.BKR:m.index>=a.length?(U=u[m.index-a.length].name,v=u[m.index-a.length].lower):(U=a[m.index].name,v=a[m.index].lower),D="%i",m.bkrCase===o.BKR_MODE_CS&&(D="%s"),m.bkrMode===o.BKR_MODE_UM?D+="%u":D+="%p",U=D+U,l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, index: ${m.index}, lower: '${v}', bkrCase: ${m.bkrCase}, bkrMode: ${m.bkrMode}};// BKR(\\${U})
`;break;case o.UDT:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, empty: ${m.empty}, index: ${m.index}};// UDT(${u[m.index].name})
`;break;case o.REP:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, min: ${m.min}, max: ${m.max}};// REP
`;break;case o.AND:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// AND
`;break;case o.NOT:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// NOT
`;break;case o.ABG:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// ABG(%^)
`;break;case o.AEN:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// AEN(%$)
`;break;case o.BKA:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// BKA
`;break;case o.BKN:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}};// BKN
`;break;case o.TLS:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, string: [${m.string.toString()}]};// TLS
`;break;case o.TBS:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, string: [${m.string.toString()}]};// TBS
`;break;case o.TRG:l+=`  this.rules[${A}].opcodes[${N}] = {type: ${m.type}, min: ${m.min}, max: ${m.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),l+=`
`,l+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",l+=`  this.toString = function toString(){
`,l+=`    let str = "";
`;let Ee;return s.forEach(ce=>{const A=ce.beginChar+ce.length;Ee="",l+='    str += "';for(let m=ce.beginChar;m<A;m+=1){switch(i[m]){case 9:Ee=" ";break;case 10:Ee="\\n";break;case 13:Ee="\\r";break;case 34:Ee='\\"';break;case 92:Ee="\\\\";break;default:Ee=String.fromCharCode(i[m]);break}l+=Ee}l+=`";
`}),l+=`    return str;
`,l+=`  }
`,l+=`}
`,l},this.generateObject=function(i,s,a){const u={},S=[],l=[],b=i.slice(0);return u.grammarObject="grammarObject",s.forEach(U=>{S.push(U.lower)}),S.sort(),a.length>0&&(a.forEach(U=>{l.push(U.lower)}),l.sort()),u.callbacks=[],S.forEach(U=>{u.callbacks[U]=!1}),a.length>0&&l.forEach(U=>{u.callbacks[U]=!1}),u.rules=s,u.udts=a,u.toString=function(){return b},u}}),De}var Ye,mt;function _t(){return mt||(mt=1,Ye=function(){const t=ye(),e="rule-attributes.js";let o=null;function h(w){return w.left||w.nested||w.right||w.cyclic?!1:w.empty}function C(w){return!!(w.left||w.nested||w.right||w.cyclic)}function B(w,L){let O=0,p=0,y=0;for(O=0;O<L;O+=1)if(w[O].nested)return!0;for(O=0;O<L;O+=1)if(w[O].right&&!w[O].leaf){for(p=O+1;p<L;p+=1)if(!h(w[p]))return!0}for(O=L-1;O>=0;O-=1)if(w[O].left&&!w[O].leaf){for(p=O-1;p>=0;p-=1)if(!h(w[p]))return!0}for(O=0;O<L;O+=1)if(!w[O].empty&&!C(w[O])){for(p=O+1;p<L;p+=1)if(C(w[p])){for(y=p+1;y<L;y+=1)if(!w[y].empty&&!C(w[y]))return!0}}return!1}function x(w,L){for(let O=0;O<L;O+=1)if(!w[O].cyclic)return!1;return!0}function T(w,L){for(let O=0;O<L;O+=1){if(w[O].left)return!0;if(!w[O].empty)return!1}return!1}function $(w,L){for(let O=L-1;O>=0;O-=1){if(w[O].right)return!0;if(!w[O].empty)return!1}return!1}function g(w,L){for(let O=0;O<L;O+=1)if(!w[O].empty)return!1;return!0}function n(w,L){for(let O=0;O<L;O+=1)if(!w[O].finite)return!1;return!0}function i(w,L,O,p){let y=0;const te=L[O],W=te.children.length,Q=[];for(y=0;y<W;y+=1)Q.push(w.attrGen());for(y=0;y<W;y+=1)u(w,L,te.children[y],Q[y]);p.left=T(Q,W),p.right=$(Q,W),p.nested=B(Q,W),p.empty=g(Q,W),p.finite=n(Q,W),p.cyclic=x(Q,W)}function s(w,L,O,p){let y=0;const te=L[O],W=te.children.length,Q=[];for(y=0;y<W;y+=1)Q.push(w.attrGen());for(y=0;y<W;y+=1)u(w,L,te.children[y],Q[y]);for(p.left=!1,p.right=!1,p.nested=!1,p.empty=!1,p.finite=!1,p.cyclic=!1,y=0;y<W;y+=1)Q[y].left&&(p.left=!0),Q[y].nested&&(p.nested=!0),Q[y].right&&(p.right=!0),Q[y].empty&&(p.empty=!0),Q[y].finite&&(p.finite=!0),Q[y].cyclic&&(p.cyclic=!0)}function a(w,L,O,p){const y=L[O];y.index>=w.ruleCount?(p.empty=w.udts[y.index-w.ruleCount].empty,p.finite=!0):(S(w,y.index,p),p.left=!1,p.nested=!1,p.right=!1,p.cyclic=!1)}function u(w,L,O,p){w.attrInit(p);const y=L[O];switch(y.type){case t.ALT:s(w,L,O,p);break;case t.CAT:i(w,L,O,p);break;case t.REP:u(w,L,O+1,p),y.min===0&&(p.empty=!0,p.finite=!0);break;case t.RNM:S(w,L[O].index,p);break;case t.BKR:a(w,L,O,p);break;case t.AND:case t.NOT:case t.BKA:case t.BKN:u(w,L,O+1,p),p.empty=!0;break;case t.TLS:p.empty=!L[O].string.length,p.finite=!0,p.cyclic=!1;break;case t.TBS:case t.TRG:p.empty=!1,p.finite=!0,p.cyclic=!1;break;case t.UDT:p.empty=y.empty,p.finite=!0,p.cyclic=!1;break;case t.ABG:case t.AEN:p.empty=!0,p.finite=!0,p.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${y}`)}}function S(w,L,O){const p=w.attrsWorking[L];p.isComplete?w.attrCopy(O,p):p.isOpen?L===w.startRule?L===w.startRule&&(O.left=!0,O.right=!0,O.cyclic=!0,O.leaf=!0):O.finite=!0:(p.isOpen=!0,u(w,p.rule.opcodes,0,O),p.left=O.left,p.right=O.right,p.nested=O.nested,p.empty=O.empty,p.finite=O.finite,p.cyclic=O.cyclic,p.leaf=!1,p.isOpen=!1,p.isComplete=!0)}const l=w=>{o=w;let L=0,O=0;const p=o.attrGen();for(L=0;L<o.ruleCount;L+=1){for(O=0;O<o.ruleCount;O+=1)o.attrInit(o.attrsWorking[O]);o.startRule=L,S(o,L,p),o.attrCopy(o.attrs[L],o.attrsWorking[L])}o.attributesComplete=!0;let y=null;for(L=0;L<o.ruleCount;L+=1)if(y=o.attrs[L],y.left||!y.finite||y.cyclic){const te=o.attrGen(y.rule);o.attrCopy(te,y),o.attrsErrors.push(te),o.attrsErrorCount+=1}},b=w=>w?"t":"f",U=w=>w?"e":"f",v=w=>w?"t":"e",V=(w,L,O,p)=>{let y=`${w}:${L}:`;return y+=`${U(O.left)} `,y+=`${b(O.nested)} `,y+=`${b(O.right)} `,y+=`${U(O.cyclic)} `,y+=`${v(O.finite)} `,y+=`${b(O.empty)}:`,y+=`${o.typeToString(p.recursiveType)}:`,y+=p.recursiveType===t.ATTR_MR?p.groupNumber:"-",y+=`:${O.rule.name}
`,y},f=()=>{let w=`LEGEND - t=true, f=false, e=error
`;return w+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,w},K=()=>{let w=null,L=null,O="";if(O+=`RULE ATTRIBUTES WITH ERRORS
`,O+=f(),o.attrsErrorCount)for(let p=0;p<o.attrsErrorCount;p+=1)w=o.attrsErrors[p],L=o.ruleDeps[w.rule.index],O+=V(p,w.rule.index,w,L);else O+=`<none>
`;return O},X=w=>{let L=0,O=0,p=null,y=null,te="",{ruleIndexes:W}=o;for(w===97?W=o.ruleAlphaIndexes:w===116&&(W=o.ruleTypeIndexes),L=0;L<o.ruleCount;L+=1)O=W[L],p=o.attrs[O],y=o.ruleDeps[O],te+=V(L,O,p,y);return te};return{ruleAttributes:l,showAttributes:(w="index")=>{if(!o.attributesComplete)throw new Error(`${e}:showAttributes: attributes not available`);let L="";const O=`RULE ATTRIBUTES
`;return w.charCodeAt(0)===97?(L+=`alphabetical by rule name
`,L+=O,L+=f(),L+=X(97)):w.charCodeAt(0)===116?(L+=`ordered by rule type
`,L+=O,L+=f(),L+=X(116)):(L+=`ordered by rule index
`,L+=O,L+=f(),L+=X()),L},showAttributeErrors:K}}()),Ye}var Ve,gt;function Pt(){return gt||(gt=1,Ve=(()=>{const Z=ye();let t=null;const e=(B,x,T,$)=>{let g=0,n=0;const i=x[T];$[T]=!0;const s=i.rule.opcodes;for(g=0;g<s.length;g+=1){const a=s[g];if(a.type===Z.RNM)for(i.refersTo[a.index]=!0,$[a.index]||e(B,x,a.index,$),n=0;n<B;n+=1)x[a.index].refersTo[n]&&(i.refersTo[n]=!0);else a.type===Z.UDT?i.refersToUdt[a.index]=!0:a.type===Z.BKR&&(a.index<B?(i.refersTo[a.index]=!0,$[a.index]||e(B,x,a.index,$)):i.refersToUdt[B-a.index]=!0)}},o=B=>{t=B;let x=0,T=0,$=0,g=null,n=null,i=!1;t.dependenciesComplete=!1;const s=t.falseArray(t.ruleCount);for(x=0;x<t.ruleCount;x+=1)t.falsifyArray(s),e(t.ruleCount,t.ruleDeps,x,s);for(x=0;x<t.ruleCount;x+=1)for(T=0;T<t.ruleCount;T+=1)x!==T&&t.ruleDeps[T].refersTo[x]&&(t.ruleDeps[x].referencedBy[T]=!0);for(x=0;x<t.ruleCount;x+=1)t.ruleDeps[x].recursiveType=Z.ATTR_N,t.ruleDeps[x].refersTo[x]&&(t.ruleDeps[x].recursiveType=Z.ATTR_R);for($=-1,x=0;x<t.ruleCount;x+=1)if(g=t.ruleDeps[x],g.recursiveType===Z.ATTR_R)for(i=!0,T=0;T<t.ruleCount;T+=1)x!==T&&(n=t.ruleDeps[T],n.recursiveType===Z.ATTR_R&&g.refersTo[T]&&n.refersTo[x]&&(i&&($+=1,g.recursiveType=Z.ATTR_MR,g.groupNumber=$,i=!1),n.recursiveType=Z.ATTR_MR,n.groupNumber=$));t.isMutuallyRecursive=$>-1,t.ruleAlphaIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesType),t.isMutuallyRecursive&&t.ruleTypeIndexes.sort(t.compRulesGroup),t.udtCount&&t.udtAlphaIndexes.sort(t.compUdtsAlpha),t.dependenciesComplete=!0},h=(B=null)=>{let x=0,T=0,$=0,g=0;const n=t.ruleCount-1,i=t.udtCount-1,s=100;let a="",u="";const S="=> ",l="<= ";let b=!1,U=null,{ruleIndexes:v}=t,{udtIndexes:V}=t;for(B===97?(v=t.ruleAlphaIndexes,V=t.udtAlphaIndexes):B===116&&(v=t.ruleTypeIndexes,V=t.udtAlphaIndexes),x=0;x<t.ruleCount;x+=1){for(U=t.ruleDeps[v[x]],u=`${v[x]}:${t.typeToString(U.recursiveType)}:`,t.isMutuallyRecursive&&(u+=U.groupNumber>-1?U.groupNumber:"-",u+=":"),u+=" ",a+=`${u+t.rules[v[x]].name}
`,b=!0,$=0,g=a.length,a+=u,T=0;T<t.ruleCount;T+=1)U.refersTo[v[T]]&&(b?(a+=S,b=!1,a+=t.ruleDeps[v[T]].rule.name):a+=`, ${t.ruleDeps[v[T]].rule.name}`,$+=1),a.length-g>s&&T!==n&&(a+=`
${u}${S}`,g=a.length);if(t.udtCount)for(T=0;T<t.udtCount;T+=1)U.refersToUdt[V[T]]&&(b?(a+=S,b=!1,a+=t.udts[V[T]].name):a+=`, ${t.udts[V[T]].name}`,$+=1),a.length-g>s&&T!==i&&(a+=`
${u}${S}`,g=a.length);for($===0&&(a+=`=> <none>
`),b===!1&&(a+=`
`),b=!0,$=0,g=a.length,a+=u,T=0;T<t.ruleCount;T+=1)U.referencedBy[v[T]]&&(b?(a+=l,b=!1,a+=t.ruleDeps[v[T]].rule.name):a+=`, ${t.ruleDeps[v[T]].rule.name}`,$+=1),a.length-g>s&&T!==n&&(a+=`
${u}${S}`,g=a.length);$===0&&(a+=`<= <none>
`),b===!1&&(a+=`
`),a+=`
`}return a};return{ruleDependencies:o,showRuleDependencies:(B="index")=>{let x=`RULE DEPENDENCIES(index:type:[group number:])
`;return x+=`=> refers to rule names
`,x+=`<= referenced by rule names
`,t.dependenciesComplete&&(B.charCodeAt(0)===97?(x+=`alphabetical by rule name
`,x+=h(97)):B.charCodeAt(0)===116?(x+=`ordered by rule type
`,x+=h(116)):(x+=`ordered by rule index
`,x+=h(null))),x}}})()),Ve}var ze,bt;function Ht(){return bt||(bt=1,ze=function(){const t=ye(),{ruleAttributes:e,showAttributes:o,showAttributeErrors:h}=_t(),{ruleDependencies:C,showRuleDependencies:B}=Pt();class x{constructor(g,n){this.rules=g,this.udts=n,this.ruleCount=g.length,this.udtCount=n.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let i=0;i<this.ruleCount;i+=1)this.attrs.push(this.attrGen(this.rules[i])),this.attrsWorking.push(this.attrGen(this.rules[i])),this.ruleDeps.push(this.rdGen(g[i],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(g){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:g}}attrInit(g){g.left=!1,g.nested=!1,g.right=!1,g.empty=!1,g.finite=!1,g.cyclic=!1,g.leaf=!1,g.isOpen=!1,g.isComplete=!1}attrCopy(g,n){g.left=n.left,g.nested=n.nested,g.right=n.right,g.empty=n.empty,g.finite=n.finite,g.cyclic=n.cyclic,g.leaf=n.leaf,g.isOpen=n.isOpen,g.isComplete=n.isComplete,g.rule=n.rule}rdGen(g,n,i){return{rule:g,recursiveType:t.ATTR_N,groupNumber:-1,refersTo:this.falseArray(n),refersToUdt:this.falseArray(i),referencedBy:this.falseArray(n)}}typeToString(g){switch(g){case t.ATTR_N:return" N";case t.ATTR_R:return" R";case t.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(g){const n=[];if(g>0)for(let i=0;i<g;i+=1)n.push(!1);return n}falsifyArray(g){for(let n=0;n<g.length;n+=1)g[n]=!1}indexArray(g){const n=[];if(g>0)for(let i=0;i<g;i+=1)n.push(i);return n}compRulesAlpha(g,n){return this.rules[g].lower<this.rules[n].lower?-1:this.rules[g].lower>this.rules[n].lower?1:0}compUdtsAlpha(g,n){return this.udts[g].lower<this.udts[n].lower?-1:this.udts[g].lower>this.udts[n].lower?1:0}compRulesType(g,n){return this.ruleDeps[g].recursiveType<this.ruleDeps[n].recursiveType?-1:this.ruleDeps[g].recursiveType>this.ruleDeps[n].recursiveType?1:0}compRulesGroup(g,n){if(this.ruleDeps[g].recursiveType===t.ATTR_MR&&this.ruleDeps[n].recursiveType===t.ATTR_MR){if(this.ruleDeps[g].groupNumber<this.ruleDeps[n].groupNumber)return-1;if(this.ruleDeps[g].groupNumber>this.ruleDeps[n].groupNumber)return 1}return 0}}return{attributes:function(g=[],n=[],i=[],s=[]){const a=new x(g,n);return C(a),e(a),a.attrsErrorCount&&s.push({line:0,char:0,msg:`${a.attrsErrorCount} attribute errors`}),a.attrsErrorCount},showAttributes:o,showAttributeErrors:h,showRuleDependencies:B}}()),ze}var je,Tt;function Ft(){return Tt||(Tt=1,je=function(){const t="show-rules.js";return function(h=[],C=[],B="index"){const x="showRules";let T=[],$=[];const g=[],n=[],i=h,s=C,a=h.length,u=C.length;let S="RULE/UDT NAMES",l;function b(v,V){return i[v].lower<i[V].lower?-1:i[v].lower>i[V].lower?1:0}function U(v,V){return s[v].lower<s[V].lower?-1:s[v].lower>s[V].lower?1:0}if(!(Array.isArray(h)&&h.length))throw new Error(`${t}:${x}: rules arg must be array with length > 0`);if(!Array.isArray(C))throw new Error(`${t}:${x}: udts arg must be array`);for(l=0;l<a;l+=1)g.push(l);if(T=g.slice(0),T.sort(b),u){for(l=0;l<u;l+=1)n.push(l);$=n.slice(0),$.sort(U)}if(B.charCodeAt(0)===97){for(S+=` - alphabetical by rule/UDT name
`,l=0;l<a;l+=1)S+=`${l}: ${T[l]}: ${i[T[l]].name}
`;if(u)for(l=0;l<u;l+=1)S+=`${l}: ${$[l]}: ${s[$[l]].name}
`}else{for(S+=` - ordered by rule/UDT index
`,l=0;l<a;l+=1)S+=`${l}: ${i[l].name}
`;if(u)for(l=0;l<u;l+=1)S+=`${l}: ${s[l].name}
`}return S}}()),je}var vt=function(t){const e="api.js: ",o=this,h=we(),C=Et(),B=Ot(),x=new(Bt()),{attributes:T,showAttributes:$,showAttributeErrors:g,showRuleDependencies:n}=Ht(),i=Ft(),s=function(w,L,O){const W=`<span class="${h.style.CLASS_CTRLCHAR}">`,Q="</span>",ae=`<span class="${h.style.CLASS_NOMATCH}">`,pe="</span>";let Y,J="";const q=!0;for(;q&&!(!Array.isArray(w)||w.length===0);){if(typeof L!="number")throw new Error("abnfToHtml: beg must be type number");if(L>=w.length)break;typeof O!="number"||L+O>=w.length?Y=w.length:Y=L+O;let k=0;for(let ue=L;ue<Y;ue+=1){const me=w[ue];if(me>=32&&me<=126)switch(k===1?(J+=Q,k=0):k===2&&(J+=pe,k=0),me){case 32:J+="&nbsp;";break;case 60:J+="&lt;";break;case 62:J+="&gt;";break;case 38:J+="&amp;";break;case 34:J+="&quot;";break;case 39:J+="&#039;";break;case 92:J+="&#092;";break;default:J+=String.fromCharCode(me);break}else me===9||me===10||me===13?(k===0?(J+=W,k=1):k===2&&(J+=pe+W,k=1),me===9&&(J+="TAB"),me===10&&(J+="LF"),me===13&&(J+="CR")):(k===0?(J+=ae,k=2):k===1&&(J+=Q+ae,k=2),J+=`\\x${h.utils.charToHex(me)}`)}k===2&&(J+=pe),k===1&&(J+=Q);break}return J},a=function(w,L,O){let p="";for(let y=L;y<L+O;y+=1){const te=w[y];if(te>=32&&te<=126)p+=String.fromCharCode(te);else switch(te){case 9:p+="\\t";break;case 10:p+="\\n";break;case 13:p+="\\r";break;default:p+="\\unknown";break}}return p},u=function(w){let L="Annotated Input Grammar";return w.forEach(O=>{L+=`
`,L+=`line no: ${O.lineNo}`,L+=` : char index: ${O.beginChar}`,L+=` : length: ${O.length}`,L+=` : abnf: ${a(o.chars,O.beginChar,O.length)}`}),L+=`
`,L},S=function(w){let L="";return L+=`<table class="${h.style.CLASS_GRAMMAR}">
`,L+=`<caption>Annotated Input Grammar</caption>
`,L+="<tr>",L+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",L+=`</tr>
`,w.forEach(p=>{L+="<tr>",L+=`<td>${p.lineNo}`,L+=`</td><td>${p.beginChar}`,L+=`</td><td>${p.length}`,L+=`</td><td>${s(o.chars,p.beginChar,p.length)}`,L+="</td>",L+=`</tr>
`}),L+=`</table>
`,L},l=function(w,L,O,p){const[y]=h;let te="";const W=`<span class="${y.CLASS_NOMATCH}">&raquo;</span>`;return te+=`<p><table class="${y.CLASS_GRAMMAR}">
`,p&&typeof p=="string"&&(te+=`<caption>${p}</caption>
`),te+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,w.forEach(Q=>{let ae,pe,Y,J,q,k="",ue="";L.length===0?(q=W,pe=0):(ae=L[Q.line],Y=ae.beginChar,Q.char>Y&&(k=s(O,Y,Q.char-Y)),Y=Q.char,J=ae.beginChar+ae.length,Y<J&&(ue=s(O,Y,J-Y)),q=k+W+ue,pe=Q.char-ae.beginChar,te+="<tr>",te+=`<td>${Q.line}</td><td>${ae.beginChar}</td><td>${pe}</td><td>${q}</td>`,te+=`</tr>
`,te+="<tr>",te+=`<td colspan="3"></td><td>&uarr;:&nbsp;${h.utils.stringToAsciiHtml(Q.msg)}</td>`,te+=`</tr>
`)}),te+=`</table></p>
`,te},b=function(w,L,O){let p,y,te,W;return p="",w.forEach(Q=>{y=L[Q.line],p+=`${y.lineNo}: `,p+=`${y.beginChar}: `,p+=`${Q.char-y.beginChar}: `,te=y.beginChar,W=Q.char-y.beginChar,p+=a(O,te,W),p+=" >> ",te=Q.char,W=y.beginChar+y.length-Q.char,p+=a(O,te,W),p+=`
`,p+=`${y.lineNo}: `,p+=`${y.beginChar}: `,p+=`${Q.char-y.beginChar}: `,p+="error: ",p+=Q.msg,p+=`
`}),p};let U=!1,v=!1,V=!1,f=!1,K=0,X;if(this.errors=[],Buffer.isBuffer(t))this.chars=C.decode("BINARY",t);else if(Array.isArray(t))this.chars=t.slice();else if(typeof t=="string")this.chars=C.decode("STRING",t);else throw new Error(`${e}input source is not a string, byte Buffer or character array`);this.sabnf=C.encode("STRING",this.chars),this.scan=function(w,L){this.lines=B(this.chars,this.errors,w,L),U=!0},this.parse=function(w,L){if(!U)throw new Error(`${e}grammar not scanned`);x.syntax(this.chars,this.lines,this.errors,w,L),v=!0},this.translate=function(){if(!v)throw new Error(`${e}grammar not scanned and parsed`);const w=x.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=w.rules,this.udts=w.udts,X=w.lineMap,V=!0)},this.attributes=function(){if(!V)throw new Error(`${e}grammar not scanned, parsed and translated`);return K=T(this.rules,this.udts,X,this.errors),f=!0,K},this.generate=function(w){if(this.lines=B(this.chars,this.errors,w),this.errors.length||(x.syntax(this.chars,this.lines,this.errors,w),this.errors.length))return;const L=x.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=L.rules,this.udts=L.udts,X=L.lineMap,K=T(this.rules,this.udts,X,this.errors),f=!0)},this.displayRules=function(w="index"){if(!V)throw new Error(`${e}grammar not scanned, parsed and translated`);return i(this.rules,this.udts,w)},this.displayRuleDependencies=function(w="index"){if(!f)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return n(w)},this.displayAttributes=function(w="index"){if(!f)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return K&&g(w),$(w)},this.displayAttributeErrors=function(){if(!f)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return g()},this.toSource=function(w){if(!f)throw new Error(`${e}can't generate parser source - must be preceeded by call to attributes()`);if(K)throw new Error(`${e}can't generate parser source - attributes have ${K} errors`);return x.generateSource(this.chars,this.lines,this.rules,this.udts,w)},this.toObject=function(){if(!f)throw new Error(`${e}can't generate parser source - must be preceeded by call to attributes()`);if(K)throw new Error(`${e}can't generate parser source - attributes have ${K} errors`);return x.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return b(this.errors,this.lines,this.chars)},this.errorsToHtml=function(w){return l(this.errors,this.lines,this.chars,w)},this.linesToAscii=function(){return u(this.lines)},this.linesToHtml=function(){return S(this.lines)}},Kt=we();export{vt as a,Kt as n};
