import{ao as Rf,ap as Nf,aq as Cf,ar as Lf,as as Cr,at as $f,au as Of,av as kf,aw as zf,ax as en,ay as sr,az as bn,aA as Kf,aB as Uf,aC as gi,aD as Bf,aE as _i,aF as tn,aG as Gt,aH as qf,aI as jf,aJ as Hf,aK as Ff,aL as Nn,aM as Jf,aN as mi,aO as wr,aP as bt,aQ as lt,aR as Gf,aS as Wf,aT as Xf,aU as we,$ as Yf,aV as le,aW as Vf,aX as Wt,aY as Zf,aZ as Qf,a_ as dr,a$ as ea,b0 as Cn,b1 as ta,b2 as ra,b3 as na,b4 as ia,b5 as fa,b6 as aa,b7 as xi,b8 as Si,b9 as it,ba as ca,bb as ln,bc as vn,bd as or,be as Ei,bf as sa,bg as da,bh as Ai,bi as Ii,bj as oa,bk as Pi,bl as ua,bm as ha,bn as Ln,bo as $n}from"./index.ea37a8b2.js";import{bp as d0}from"./index.ea37a8b2.js";import{n as ba}from"./index.browser.8e74d592.js";function la(t,e,r){var n=Lf(t)||e||r?{next:t,error:e,complete:r}:t;return n?Rf(function(i,c){var d;(d=n.subscribe)===null||d===void 0||d.call(n);var s=!0;i.subscribe(Nf(c,function(o){var u;(u=n.next)===null||u===void 0||u.call(n,o),c.next(o)},function(){var o;s=!1,(o=n.complete)===null||o===void 0||o.call(n),c.complete()},function(o){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,o),c.error(o)},function(){var o,u;s&&((o=n.unsubscribe)===null||o===void 0||o.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):Cf}const va=`Ethereum Signed Message:
`;function pa(t){return typeof t=="string"&&(t=Cr(t)),$f(Of([Cr(va),Cr(String(t.length)),t]))}const ya=Symbol("abortable"),rn=Symbol("aborted");function wa(t,e){if(e.aborted)return Promise.reject(rn);let r;const n=new Promise((i,c)=>{r=c});return e.addEventListener("abort",()=>{r(rn)}),Promise.race([t,n])}const Mi="utils_abort_request";var Je;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(Je||(Je={}));const Di={[Je.PARSE_ERROR]:"Parse error",[Je.INVALID_REQUEST]:"Invalid request",[Je.METHOD_NOT_FOUND]:"Method not found",[Je.INVALID_PARAMS]:"Invalid params",[Je.INTERNAL_ERROR]:"Internal error"};function ga(t){return-32e3>=t&&t>=-32099}function pn(t){return Di[t.toString()]??(ga(t)?"Server error":"Application error")}class ot extends Error{static fromObject(e){return new ot(e.code,e.message,e.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(e,r,n){super(),Object.setPrototypeOf(this,ot.prototype),this.code=e,this.data=n,this.message=r??pn(e)}}function Qt(t){const e=Di[t];return function(n){return new ot(t,e,n)}}Qt(Je.PARSE_ERROR);Qt(Je.INVALID_REQUEST);Qt(Je.METHOD_NOT_FOUND);Qt(Je.INVALID_PARAMS);Qt(Je.INTERNAL_ERROR);function _a(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ma(t,e){return e.get?e.get.call(t):e.value}function xa(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Ti(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Lr(t,e){var r=Ti(t,e,"get");return ma(t,r)}function Sa(t,e,r){_a(t,e),e.set(t,r)}function Ea(t,e,r){var n=Ti(t,e,"set");return xa(t,n,r),r}var zt=new WeakMap;class nn{get connection(){return Lr(this,zt)}createID(){return ba()}request(e,r=void 0,n={}){const{signal:i}=n;if(i?.aborted)return Promise.reject(rn);const c=this.createID(),d=Lr(this,zt).send({jsonrpc:"2.0",id:c,method:e,params:r}).then(s=>{if(s==null)throw new Error("Missing response");if(s.error!=null)throw ot.fromObject(s.error);return s.result});return i==null?d:(i.addEventListener("abort",()=>{this.notify(Mi,{id:c})}),wa(d,i))}async notify(e,r=void 0){await Lr(this,zt).send({jsonrpc:"2.0",method:e,params:r})}constructor(e){Sa(this,zt,{writable:!0,value:void 0}),Ea(this,zt,e)}}function On(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:pn(e)}}}function Aa(t,e,r){console.warn("Unhandled handler error",e,r)}function Ia(t,e){console.warn("Unhandled invalid message",e)}function Pa(t,e){console.warn("Unhandled notification",e)}function Ri(t,e={}){const r=e.onHandlerError??Aa,n=e.onInvalidMessage??Ia,i=e.onNotification??Pa,c={};function d(s,o){if(o.method===Mi){const u=o.params?.id;u!=null&&c[u]?.abort()}else i(s,o)}return async function(o,u){const h=u.id;if(u.jsonrpc!=="2.0"||u.method==null)return h==null?(n(o,u),null):On(h,Je.INVALID_REQUEST);const b=t[u.method];if(b==null)return h==null?(d(o,u),null):On(h,Je.METHOD_NOT_FOUND);try{let l;if(h!=null&&b[ya]){const _=new AbortController;c[h]=_,l=b(o,u.params,{signal:_.signal})}else l=b(o,u.params,{});const v=l==null?l:typeof l.then=="function"?await l:l;return h==null||c[h]?.signal.aborted?null:{jsonrpc:"2.0",id:h,result:v}}catch(l){if(h==null||c[h]?.signal.aborted)return r(o,u,l),null;let v;if(l instanceof ot)v=l.toObject();else{r(o,u,l);const _=l.code??-32e3;v={code:_,message:l.message||pn(_)}}return{jsonrpc:"2.0",id:h,error:v}}finally{h!=null&&delete c[h]}}}class Ma extends kf{next(e){this._sink.next?.(e)}error(e){this._sink.error?.(e)}complete(){this._sink.complete?.()}_subscribe(e){return this._source.subscribe(e)??zf.EMPTY}constructor(e,r){super(),this._source=e,this._sink=r}}function Ni(t){return function(r){return{__tw:!0,ns:t,msg:r}}}function Ci(t){return function(r){if(r.__tw!==!0)throw new Error("Input is not a wrapped message");if(typeof r.ns!="string")throw new Error(`Invalid namespace type for wrapped message: expected a string, got ${typeof r.ns}`);if(r.ns!==t)throw new Error(`Invalid namespace for wrapped message: expected ${t}, got ${r.ns}`);return r.msg}}function Da(t){return{wrap:Ni(t),unwrap:Ci(t)}}function Ta(t,e={}){if(e.throwWhenInvalid)return en(sr(t));const r=typeof e.onInvalidInput=="function"?e.onInvalidInput:function(i,c){console.warn("Invalid transport input",i,c)};return en(sr(n=>{try{return t(n)}catch(i){return r(n,i),null}}),bn(n=>n!==null))}function Ra(t,e){return{...t,next:r=>{r!=null&&t.next(e(r))}}}function Na(t){return Array.isArray(t)||(t=[t]),e=>t.includes(e.origin)}function yn(t,e){const r=Kf(t,"message");if(e==null)return r;const n=typeof e=="function"?e:Na(e);return r.pipe(bn(n))}function Ca(t,...e){return{next:r=>{r!=null&&t.postMessage(r,...e)}}}function La(t,e=t,r={}){const n=r.postMessageArguments??[],i=yn(t,r.filter),c=Ca(e,...n);return new Ma(i,c)}function $a(t,e,r={}){const n=Ri(t,r),i=Ci(e);return en(sr(c=>{try{const d=i(c.data);return d.method?{type:"request",message:c,request:d}:null}catch{return null}}),bn(c=>c!==null),Uf(async c=>({type:"handled",message:c.message,request:c.request,response:await n(c.message,c.request)})))}function Oa({filter:t,methods:e,namespace:r,target:n,...i}){const c=Ni(r);return yn(n,t).pipe($a(e,r,i),la(d=>{d.response!=null&&(d.message.source??window).postMessage(c(d.response),d.message.origin||"*")}))}function ka(t,e,r){const n=Da(e),i=Ra(t,n.wrap),c=Ta(n.unwrap,r);return async function(s){return new Promise((o,u)=>{const h=t.pipe(sr(b=>b.data),c,gi(b=>b!=null&&b.id===s.id&&("error"in b||"result"in b))).subscribe({next:b=>{o(b),h.unsubscribe()},error:u});i.next(s)})}}function za(t,e,r){const n=ka(t,e,r);return new nn({send:n})}const Ka={onInvalidInput:(t,e)=>{},postMessageArguments:["*"]};function Ua(t,e=window,r=Ka){const n=La(window,e,r);return za(n,t,r)}function wn(t,e,r=window){return Oa({methods:e,namespace:t,target:r})}const Ba="3id-connect-iframedisplay",qa="3id-connect-managedisplay",Li=99999,$i="position: fixed; width:0; height:0; border:0; border:none !important",ja=`border:none; border:0; z-index: ${Li-2}; position: fixed; max-width: 100%;`,Ha=`border:none; border:0; z-index: ${Li-1}; position: fixed; width: 100%; height: 100%; top: 0; left: 0;`,Fa="top: 0px; right: 0px",Ja="bottom: 0px; left: 0px;",Ga=t=>()=>t.style=$i,Wa=t=>(e=!1,r="245px",n="440px")=>{t.style=`${ja} width: ${n}; height: ${r}; ${e?Ja:Fa}`};function Xa(t){const e=Wa(t),r=Ga(t);return wn(Ba,{hide:()=>{r()},display:(n,{mobile:i,height:c,width:d})=>{e(i,c,d)}})}const Ya=t=>{const e=document.createElement("iframe");return e.name="threeid-connect",e.className="threeid-connect",e.src=t,e.style=$i,e.allowTransparency=!0,e.frameBorder=0,e};function Va(t){let e;return wn(qa,{display:async(r,{accountId:n})=>{e=Za(`${t}?accountId=${n}`),document.body.appendChild(e),await new Promise(d=>{e.onload=d});const i=yn(window),c=d=>d.data.ns==="3id-connect-management";await i.pipe(gi(c)).toPromise(),e.remove()}})}const Za=t=>{const e=document.createElement("iframe");return e.name="threeid-connect-manage",e.className="threeid-connect-manage",e.src=t,e.allowtransparency=!1,e.style=Ha,e};let Oi="3id-connect-authprovider";typeof process<"u"&&(Oi=process.env.NAMESPACE||"3id-connect-authprovider");function Qa(t,e=Oi){return wn(e,{accountId:async()=>(await t.accountId()).toString(),authenticate:async(r,{message:n})=>await t.authenticate(n),createLink:async(r,{did:n})=>await t.createLink(n)})}const ec=["dev-unstable","testnet-clay","mainnet","local"],gr="v2",tc=`https://app-dev.3idconnect.org/${gr}`,rc=`https://app-clay.3idconnect.org/${gr}`,nc=`https://app.3idconnect.org/${gr}`,ic=`http://localhost:30001/${gr}`,fc="/management.html",ac="/index.html",cc={"dev-unstable":tc,"testnet-clay":rc,mainnet:nc,local:ic},sc=t=>`${t}${fc}`,dc=t=>`${t}${ac}`,kn=t=>cc[t],oc=t=>ec.includes(t),uc="3id-connect-did-provider";class hc{get isDidProvider(){return!0}async send(e){return this._client.connection.send(e)}constructor(e,r=uc){this._client=Ua(r,e)}}const bc="testnet-clay",lc=()=>{if(typeof window>"u"||typeof document>"u")throw new Error("ThreeIdConnect not supported in this enviroment")};class vc{async connect(e){this._authProviderSubscription&&this._authProviderSubscription.unsubscribe(),e&&await this.setAuthProvider(e),await this.iframeLoadedPromise,this._authProviderSubscription=Qa(e).subscribe(),Xa(this.iframe).subscribe(),Va(this.manageUrl).subscribe(),this._connected=!0}async setAuthProvider(e){this.authProvider=e,this.accountId=(await this.authProvider.accountId()).toString()}get connected(){return this._connected}getDidProvider(){if(!this.authProvider)throw new Error("setAuthProvider required");if(!this.iframe.contentWindow)throw new Error("3id connect iframe service not found");return new hc(this.iframe.contentWindow)}constructor(e){this._authProviderSubscription=null,this._connected=!1,lc();const r=oc(e||"")?kn(e):e||kn(bc);this.iframe=Ya(dc(r)),this.manageUrl=sc(r),this.iframeLoadedPromise=new Promise(n=>{this.iframe.onload=()=>{n()}}),document.body.appendChild(this.iframe)}}var Xt;(function(t){t[t.PREFER_CACHE=0]="PREFER_CACHE",t[t.SYNC_ALWAYS=1]="SYNC_ALWAYS",t[t.NEVER_SYNC=2]="NEVER_SYNC"})(Xt||(Xt={}));var zn;(function(t){t[t.GENESIS=0]="GENESIS",t[t.PARTIAL=1]="PARTIAL",t[t.SIGNED=2]="SIGNED"})(zn||(zn={}));var Kn;(function(t){t[t.NOT_REQUESTED=0]="NOT_REQUESTED",t[t.PENDING=1]="PENDING",t[t.PROCESSING=2]="PROCESSING",t[t.ANCHORED=3]="ANCHORED",t[t.FAILED=4]="FAILED"})(Kn||(Kn={}));var ur;(function(t){t[t.GENESIS=0]="GENESIS",t[t.SIGNED=1]="SIGNED",t[t.ANCHOR=2]="ANCHOR"})(ur||(ur={}));class pc extends Bf{constructor(e,r){super(n=>{e.subscribe(n)}),this.state$=e,this._context=r}get id(){return new _i(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get content(){const{next:e,content:r}=this.state$.value;return tn(e?.content??r)}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return Gt.make(this.id,this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:e})=>Gt.make(this.id,e))}get anchorCommitIds(){return this.state$.value.log.filter(({type:e})=>e===ur.ANCHOR).map(({cid:e})=>Gt.make(this.id,e))}get state(){return tn(this.state$.value)}async sync(e={}){e={sync:Xt.PREFER_CACHE,...e};const r=await this.api.loadStream(this.id,e);this.state$.next(r.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}}function yc(){return t=>{}}const wc="wallet/5.7.0";globalThis&&globalThis.__awaiter;new qf(wc);function Un(t,e){return jf(pa(t),e)}function gc(){return{eip191:async(t,e)=>{mc(t,e)}}}const _c=new Date("2022-09-20").valueOf();function mc(t,e){Hf(t),Ff(t,e);const n=[Un(Nn.fromCacao(t).toMessage(),t.s.s).toLowerCase()];if(Date.parse(t.p.iat)<=_c){const c=Un(Jf(Nn.fromCacao(t),"Ethereum"),t.s.s).toLowerCase();n.push(c)}const i=mi.parse(t.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!n.includes(i))throw new Error("Signature does not belong to issuer")}var Nt={},ki={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=wr,r=bt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function s(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},s.prototype.update=function(o,u){if(u===void 0&&(u=o.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=o[h++],u--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(h=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,o,h,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=o[h++],u--;return this},s.prototype.finish=function(o){if(!this._finished){var u=this._bytesHashed,h=this._bufferLength,b=u/536870912|0,l=u<<3,v=u%128<112?128:256;this._buffer[h]=128;for(var _=h+1;_<v-8;_++)this._buffer[_]=0;e.writeUint32BE(b,this._buffer,v-8),e.writeUint32BE(l,this._buffer,v-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],o,_*8),e.writeUint32BE(this._stateLo[_],o,_*8+4);return this},s.prototype.digest=function(){var o=new Uint8Array(this.digestLength);return this.finish(o),o},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(o){return this._stateHi.set(o.stateHi),this._stateLo.set(o.stateLo),this._bufferLength=o.bufferLength,o.buffer&&this._buffer.set(o.buffer),this._bytesHashed=o.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(o){r.wipe(o.stateHi),r.wipe(o.stateLo),o.buffer&&r.wipe(o.buffer),o.bufferLength=0,o.bytesHashed=0},s}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(s,o,u,h,b,l,v){for(var _=u[0],g=u[1],D=u[2],L=u[3],F=u[4],B=u[5],M=u[6],P=u[7],A=h[0],a=h[1],p=h[2],N=h[3],R=h[4],U=h[5],j=h[6],H=h[7],E,m,O,T,I,C,$,k;v>=128;){for(var G=0;G<16;G++){var z=8*G+l;s[G]=e.readUint32BE(b,z),o[G]=e.readUint32BE(b,z+4)}for(var G=0;G<80;G++){var J=_,Y=g,Q=D,x=L,S=F,w=B,f=M,y=P,K=A,q=a,re=p,se=N,ne=R,ue=U,me=j,_e=H;if(E=P,m=H,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=(F>>>14|R<<32-14)^(F>>>18|R<<32-18)^(R>>>41-32|F<<32-(41-32)),m=(R>>>14|F<<32-14)^(R>>>18|F<<32-18)^(F>>>41-32|R<<32-(41-32)),I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,E=F&B^~F&M,m=R&U^~R&j,I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,E=i[G*2],m=i[G*2+1],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,E=s[G%16],m=o[G%16],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,O=$&65535|k<<16,T=I&65535|C<<16,E=O,m=T,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=(_>>>28|A<<32-28)^(A>>>34-32|_<<32-(34-32))^(A>>>39-32|_<<32-(39-32)),m=(A>>>28|_<<32-28)^(_>>>34-32|A<<32-(34-32))^(_>>>39-32|A<<32-(39-32)),I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,E=_&g^_&D^g&D,m=A&a^A&p^a&p,I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,y=$&65535|k<<16,_e=I&65535|C<<16,E=x,m=se,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=O,m=T,I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,x=$&65535|k<<16,se=I&65535|C<<16,g=J,D=Y,L=Q,F=x,B=S,M=w,P=f,_=y,a=K,p=q,N=re,R=se,U=ne,j=ue,H=me,A=_e,G%16===15)for(var z=0;z<16;z++)E=s[z],m=o[z],I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=s[(z+9)%16],m=o[(z+9)%16],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,O=s[(z+1)%16],T=o[(z+1)%16],E=(O>>>1|T<<32-1)^(O>>>8|T<<32-8)^O>>>7,m=(T>>>1|O<<32-1)^(T>>>8|O<<32-8)^(T>>>7|O<<32-7),I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,O=s[(z+14)%16],T=o[(z+14)%16],E=(O>>>19|T<<32-19)^(T>>>61-32|O<<32-(61-32))^O>>>6,m=(T>>>19|O<<32-19)^(O>>>61-32|T<<32-(61-32))^(T>>>6|O<<32-6),I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,s[z]=$&65535|k<<16,o[z]=I&65535|C<<16}E=_,m=A,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[0],m=h[0],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[0]=_=$&65535|k<<16,h[0]=A=I&65535|C<<16,E=g,m=a,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[1],m=h[1],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[1]=g=$&65535|k<<16,h[1]=a=I&65535|C<<16,E=D,m=p,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[2],m=h[2],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[2]=D=$&65535|k<<16,h[2]=p=I&65535|C<<16,E=L,m=N,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[3],m=h[3],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[3]=L=$&65535|k<<16,h[3]=N=I&65535|C<<16,E=F,m=R,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[4],m=h[4],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[4]=F=$&65535|k<<16,h[4]=R=I&65535|C<<16,E=B,m=U,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[5],m=h[5],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[5]=B=$&65535|k<<16,h[5]=U=I&65535|C<<16,E=M,m=j,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[6],m=h[6],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[6]=M=$&65535|k<<16,h[6]=j=I&65535|C<<16,E=P,m=H,I=m&65535,C=m>>>16,$=E&65535,k=E>>>16,E=u[7],m=h[7],I+=m&65535,C+=m>>>16,$+=E&65535,k+=E>>>16,C+=I>>>16,$+=C>>>16,k+=$>>>16,u[7]=P=$&65535|k<<16,h[7]=H=I&65535|C<<16,l+=128,v-=128}return l}function d(s){var o=new n;o.update(s);var u=o.digest();return o.clean(),u}t.hash=d})(ki);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=lt,r=ki,n=bt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(x){const S=new Float64Array(16);if(x)for(let w=0;w<x.length;w++)S[w]=x[w];return S}const c=new Uint8Array(32);c[0]=9;const d=i(),s=i([1]),o=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),l=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(x,S){for(let w=0;w<16;w++)x[w]=S[w]|0}function _(x){let S=1;for(let w=0;w<16;w++){let f=x[w]+S+65535;S=Math.floor(f/65536),x[w]=f-S*65536}x[0]+=S-1+37*(S-1)}function g(x,S,w){const f=~(w-1);for(let y=0;y<16;y++){const K=f&(x[y]^S[y]);x[y]^=K,S[y]^=K}}function D(x,S){const w=i(),f=i();for(let y=0;y<16;y++)f[y]=S[y];_(f),_(f),_(f);for(let y=0;y<2;y++){w[0]=f[0]-65517;for(let q=1;q<15;q++)w[q]=f[q]-65535-(w[q-1]>>16&1),w[q-1]&=65535;w[15]=f[15]-32767-(w[14]>>16&1);const K=w[15]>>16&1;w[14]&=65535,g(f,w,1-K)}for(let y=0;y<16;y++)x[2*y]=f[y]&255,x[2*y+1]=f[y]>>8}function L(x,S){let w=0;for(let f=0;f<32;f++)w|=x[f]^S[f];return(1&w-1>>>8)-1}function F(x,S){const w=new Uint8Array(32),f=new Uint8Array(32);return D(w,x),D(f,S),L(w,f)}function B(x){const S=new Uint8Array(32);return D(S,x),S[0]&1}function M(x,S){for(let w=0;w<16;w++)x[w]=S[2*w]+(S[2*w+1]<<8);x[15]&=32767}function P(x,S,w){for(let f=0;f<16;f++)x[f]=S[f]+w[f]}function A(x,S,w){for(let f=0;f<16;f++)x[f]=S[f]-w[f]}function a(x,S,w){let f,y,K=0,q=0,re=0,se=0,ne=0,ue=0,me=0,_e=0,ae=0,ie=0,te=0,ee=0,Z=0,V=0,W=0,X=0,fe=0,ce=0,de=0,oe=0,he=0,be=0,ve=0,pe=0,ft=0,pt=0,Pt=0,kt=0,ir=0,Nr=0,Rn=0,Pe=w[0],Me=w[1],De=w[2],Te=w[3],Re=w[4],Ne=w[5],Ce=w[6],Le=w[7],$e=w[8],Oe=w[9],ke=w[10],ze=w[11],Ke=w[12],Ue=w[13],Be=w[14],qe=w[15];f=S[0],K+=f*Pe,q+=f*Me,re+=f*De,se+=f*Te,ne+=f*Re,ue+=f*Ne,me+=f*Ce,_e+=f*Le,ae+=f*$e,ie+=f*Oe,te+=f*ke,ee+=f*ze,Z+=f*Ke,V+=f*Ue,W+=f*Be,X+=f*qe,f=S[1],q+=f*Pe,re+=f*Me,se+=f*De,ne+=f*Te,ue+=f*Re,me+=f*Ne,_e+=f*Ce,ae+=f*Le,ie+=f*$e,te+=f*Oe,ee+=f*ke,Z+=f*ze,V+=f*Ke,W+=f*Ue,X+=f*Be,fe+=f*qe,f=S[2],re+=f*Pe,se+=f*Me,ne+=f*De,ue+=f*Te,me+=f*Re,_e+=f*Ne,ae+=f*Ce,ie+=f*Le,te+=f*$e,ee+=f*Oe,Z+=f*ke,V+=f*ze,W+=f*Ke,X+=f*Ue,fe+=f*Be,ce+=f*qe,f=S[3],se+=f*Pe,ne+=f*Me,ue+=f*De,me+=f*Te,_e+=f*Re,ae+=f*Ne,ie+=f*Ce,te+=f*Le,ee+=f*$e,Z+=f*Oe,V+=f*ke,W+=f*ze,X+=f*Ke,fe+=f*Ue,ce+=f*Be,de+=f*qe,f=S[4],ne+=f*Pe,ue+=f*Me,me+=f*De,_e+=f*Te,ae+=f*Re,ie+=f*Ne,te+=f*Ce,ee+=f*Le,Z+=f*$e,V+=f*Oe,W+=f*ke,X+=f*ze,fe+=f*Ke,ce+=f*Ue,de+=f*Be,oe+=f*qe,f=S[5],ue+=f*Pe,me+=f*Me,_e+=f*De,ae+=f*Te,ie+=f*Re,te+=f*Ne,ee+=f*Ce,Z+=f*Le,V+=f*$e,W+=f*Oe,X+=f*ke,fe+=f*ze,ce+=f*Ke,de+=f*Ue,oe+=f*Be,he+=f*qe,f=S[6],me+=f*Pe,_e+=f*Me,ae+=f*De,ie+=f*Te,te+=f*Re,ee+=f*Ne,Z+=f*Ce,V+=f*Le,W+=f*$e,X+=f*Oe,fe+=f*ke,ce+=f*ze,de+=f*Ke,oe+=f*Ue,he+=f*Be,be+=f*qe,f=S[7],_e+=f*Pe,ae+=f*Me,ie+=f*De,te+=f*Te,ee+=f*Re,Z+=f*Ne,V+=f*Ce,W+=f*Le,X+=f*$e,fe+=f*Oe,ce+=f*ke,de+=f*ze,oe+=f*Ke,he+=f*Ue,be+=f*Be,ve+=f*qe,f=S[8],ae+=f*Pe,ie+=f*Me,te+=f*De,ee+=f*Te,Z+=f*Re,V+=f*Ne,W+=f*Ce,X+=f*Le,fe+=f*$e,ce+=f*Oe,de+=f*ke,oe+=f*ze,he+=f*Ke,be+=f*Ue,ve+=f*Be,pe+=f*qe,f=S[9],ie+=f*Pe,te+=f*Me,ee+=f*De,Z+=f*Te,V+=f*Re,W+=f*Ne,X+=f*Ce,fe+=f*Le,ce+=f*$e,de+=f*Oe,oe+=f*ke,he+=f*ze,be+=f*Ke,ve+=f*Ue,pe+=f*Be,ft+=f*qe,f=S[10],te+=f*Pe,ee+=f*Me,Z+=f*De,V+=f*Te,W+=f*Re,X+=f*Ne,fe+=f*Ce,ce+=f*Le,de+=f*$e,oe+=f*Oe,he+=f*ke,be+=f*ze,ve+=f*Ke,pe+=f*Ue,ft+=f*Be,pt+=f*qe,f=S[11],ee+=f*Pe,Z+=f*Me,V+=f*De,W+=f*Te,X+=f*Re,fe+=f*Ne,ce+=f*Ce,de+=f*Le,oe+=f*$e,he+=f*Oe,be+=f*ke,ve+=f*ze,pe+=f*Ke,ft+=f*Ue,pt+=f*Be,Pt+=f*qe,f=S[12],Z+=f*Pe,V+=f*Me,W+=f*De,X+=f*Te,fe+=f*Re,ce+=f*Ne,de+=f*Ce,oe+=f*Le,he+=f*$e,be+=f*Oe,ve+=f*ke,pe+=f*ze,ft+=f*Ke,pt+=f*Ue,Pt+=f*Be,kt+=f*qe,f=S[13],V+=f*Pe,W+=f*Me,X+=f*De,fe+=f*Te,ce+=f*Re,de+=f*Ne,oe+=f*Ce,he+=f*Le,be+=f*$e,ve+=f*Oe,pe+=f*ke,ft+=f*ze,pt+=f*Ke,Pt+=f*Ue,kt+=f*Be,ir+=f*qe,f=S[14],W+=f*Pe,X+=f*Me,fe+=f*De,ce+=f*Te,de+=f*Re,oe+=f*Ne,he+=f*Ce,be+=f*Le,ve+=f*$e,pe+=f*Oe,ft+=f*ke,pt+=f*ze,Pt+=f*Ke,kt+=f*Ue,ir+=f*Be,Nr+=f*qe,f=S[15],X+=f*Pe,fe+=f*Me,ce+=f*De,de+=f*Te,oe+=f*Re,he+=f*Ne,be+=f*Ce,ve+=f*Le,pe+=f*$e,ft+=f*Oe,pt+=f*ke,Pt+=f*ze,kt+=f*Ke,ir+=f*Ue,Nr+=f*Be,Rn+=f*qe,K+=38*fe,q+=38*ce,re+=38*de,se+=38*oe,ne+=38*he,ue+=38*be,me+=38*ve,_e+=38*pe,ae+=38*ft,ie+=38*pt,te+=38*Pt,ee+=38*kt,Z+=38*ir,V+=38*Nr,W+=38*Rn,y=1,f=K+y+65535,y=Math.floor(f/65536),K=f-y*65536,f=q+y+65535,y=Math.floor(f/65536),q=f-y*65536,f=re+y+65535,y=Math.floor(f/65536),re=f-y*65536,f=se+y+65535,y=Math.floor(f/65536),se=f-y*65536,f=ne+y+65535,y=Math.floor(f/65536),ne=f-y*65536,f=ue+y+65535,y=Math.floor(f/65536),ue=f-y*65536,f=me+y+65535,y=Math.floor(f/65536),me=f-y*65536,f=_e+y+65535,y=Math.floor(f/65536),_e=f-y*65536,f=ae+y+65535,y=Math.floor(f/65536),ae=f-y*65536,f=ie+y+65535,y=Math.floor(f/65536),ie=f-y*65536,f=te+y+65535,y=Math.floor(f/65536),te=f-y*65536,f=ee+y+65535,y=Math.floor(f/65536),ee=f-y*65536,f=Z+y+65535,y=Math.floor(f/65536),Z=f-y*65536,f=V+y+65535,y=Math.floor(f/65536),V=f-y*65536,f=W+y+65535,y=Math.floor(f/65536),W=f-y*65536,f=X+y+65535,y=Math.floor(f/65536),X=f-y*65536,K+=y-1+37*(y-1),y=1,f=K+y+65535,y=Math.floor(f/65536),K=f-y*65536,f=q+y+65535,y=Math.floor(f/65536),q=f-y*65536,f=re+y+65535,y=Math.floor(f/65536),re=f-y*65536,f=se+y+65535,y=Math.floor(f/65536),se=f-y*65536,f=ne+y+65535,y=Math.floor(f/65536),ne=f-y*65536,f=ue+y+65535,y=Math.floor(f/65536),ue=f-y*65536,f=me+y+65535,y=Math.floor(f/65536),me=f-y*65536,f=_e+y+65535,y=Math.floor(f/65536),_e=f-y*65536,f=ae+y+65535,y=Math.floor(f/65536),ae=f-y*65536,f=ie+y+65535,y=Math.floor(f/65536),ie=f-y*65536,f=te+y+65535,y=Math.floor(f/65536),te=f-y*65536,f=ee+y+65535,y=Math.floor(f/65536),ee=f-y*65536,f=Z+y+65535,y=Math.floor(f/65536),Z=f-y*65536,f=V+y+65535,y=Math.floor(f/65536),V=f-y*65536,f=W+y+65535,y=Math.floor(f/65536),W=f-y*65536,f=X+y+65535,y=Math.floor(f/65536),X=f-y*65536,K+=y-1+37*(y-1),x[0]=K,x[1]=q,x[2]=re,x[3]=se,x[4]=ne,x[5]=ue,x[6]=me,x[7]=_e,x[8]=ae,x[9]=ie,x[10]=te,x[11]=ee,x[12]=Z,x[13]=V,x[14]=W,x[15]=X}function p(x,S){a(x,S,S)}function N(x,S){const w=i();let f;for(f=0;f<16;f++)w[f]=S[f];for(f=253;f>=0;f--)p(w,w),f!==2&&f!==4&&a(w,w,S);for(f=0;f<16;f++)x[f]=w[f]}function R(x,S){const w=i();let f;for(f=0;f<16;f++)w[f]=S[f];for(f=250;f>=0;f--)p(w,w),f!==1&&a(w,w,S);for(f=0;f<16;f++)x[f]=w[f]}function U(x,S){const w=i(),f=i(),y=i(),K=i(),q=i(),re=i(),se=i(),ne=i(),ue=i();A(w,x[1],x[0]),A(ue,S[1],S[0]),a(w,w,ue),P(f,x[0],x[1]),P(ue,S[0],S[1]),a(f,f,ue),a(y,x[3],S[3]),a(y,y,u),a(K,x[2],S[2]),P(K,K,K),A(q,f,w),A(re,K,y),P(se,K,y),P(ne,f,w),a(x[0],q,re),a(x[1],ne,se),a(x[2],se,re),a(x[3],q,ne)}function j(x,S,w){for(let f=0;f<4;f++)g(x[f],S[f],w)}function H(x,S){const w=i(),f=i(),y=i();N(y,S[2]),a(w,S[0],y),a(f,S[1],y),D(x,f),x[31]^=B(w)<<7}function E(x,S,w){v(x[0],d),v(x[1],s),v(x[2],s),v(x[3],d);for(let f=255;f>=0;--f){const y=w[f/8|0]>>(f&7)&1;j(x,S,y),U(S,x),U(x,x),j(x,S,y)}}function m(x,S){const w=[i(),i(),i(),i()];v(w[0],h),v(w[1],b),v(w[2],s),a(w[3],h,b),E(x,w,S)}function O(x){if(x.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const S=(0,r.hash)(x);S[0]&=248,S[31]&=127,S[31]|=64;const w=new Uint8Array(32),f=[i(),i(),i(),i()];m(f,S),H(w,f);const y=new Uint8Array(64);return y.set(x),y.set(w,32),{publicKey:w,secretKey:y}}t.generateKeyPairFromSeed=O;function T(x){const S=(0,e.randomBytes)(32,x),w=O(S);return(0,n.wipe)(S),w}t.generateKeyPair=T;function I(x){if(x.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(x.subarray(32))}t.extractPublicKeyFromSecretKey=I;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $(x,S){let w,f,y,K;for(f=63;f>=32;--f){for(w=0,y=f-32,K=f-12;y<K;++y)S[y]+=w-16*S[f]*C[y-(f-32)],w=Math.floor((S[y]+128)/256),S[y]-=w*256;S[y]+=w,S[f]=0}for(w=0,y=0;y<32;y++)S[y]+=w-(S[31]>>4)*C[y],w=S[y]>>8,S[y]&=255;for(y=0;y<32;y++)S[y]-=w*C[y];for(f=0;f<32;f++)S[f+1]+=S[f]>>8,x[f]=S[f]&255}function k(x){const S=new Float64Array(64);for(let w=0;w<64;w++)S[w]=x[w];for(let w=0;w<64;w++)x[w]=0;$(x,S)}function G(x,S){const w=new Float64Array(64),f=[i(),i(),i(),i()],y=(0,r.hash)(x.subarray(0,32));y[0]&=248,y[31]&=127,y[31]|=64;const K=new Uint8Array(64);K.set(y.subarray(32),32);const q=new r.SHA512;q.update(K.subarray(32)),q.update(S);const re=q.digest();q.clean(),k(re),m(f,re),H(K,f),q.reset(),q.update(K.subarray(0,32)),q.update(x.subarray(32)),q.update(S);const se=q.digest();k(se);for(let ne=0;ne<32;ne++)w[ne]=re[ne];for(let ne=0;ne<32;ne++)for(let ue=0;ue<32;ue++)w[ne+ue]+=se[ne]*y[ue];return $(K.subarray(32),w),K}t.sign=G;function z(x,S){const w=i(),f=i(),y=i(),K=i(),q=i(),re=i(),se=i();return v(x[2],s),M(x[1],S),p(y,x[1]),a(K,y,o),A(y,y,x[2]),P(K,x[2],K),p(q,K),p(re,q),a(se,re,q),a(w,se,y),a(w,w,K),R(w,w),a(w,w,y),a(w,w,K),a(w,w,K),a(x[0],w,K),p(f,x[0]),a(f,f,K),F(f,y)&&a(x[0],x[0],l),p(f,x[0]),a(f,f,K),F(f,y)?-1:(B(x[0])===S[31]>>7&&A(x[0],d,x[0]),a(x[3],x[0],x[1]),0)}function J(x,S,w){const f=new Uint8Array(32),y=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if(w.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(z(K,x))return!1;const q=new r.SHA512;q.update(w.subarray(0,32)),q.update(x),q.update(S);const re=q.digest();return k(re),E(y,K,re),m(K,w.subarray(32)),U(y,K),H(f,y),!L(w,f)}t.verify=J;function Y(x){let S=[i(),i(),i(),i()];if(z(S,x))throw new Error("Ed25519: invalid public key");let w=i(),f=i(),y=S[1];P(w,s,y),A(f,s,y),N(f,f),a(w,w,f);let K=new Uint8Array(32);return D(K,w),K}t.convertPublicKeyToX25519=Y;function Q(x){const S=(0,r.hash)(x.subarray(0,32));S[0]&=248,S[31]&=127,S[31]|=64;const w=new Uint8Array(S.subarray(0,32));return(0,n.wipe)(S),w}t.convertSecretKeyToX25519=Q})(Nt);var xc=globalThis&&globalThis.__decorate||function(t,e,r,n){var i=arguments.length,c=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(d=t[s])&&(c=(i<3?d(c):i>3?d(e,r,c):d(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c},We;const $r={anchor:!0,publish:!0,pin:!0,sync:Xt.PREFER_CACHE},Sc={sync:Xt.PREFER_CACHE},Bn={anchor:!0,publish:!0};function Or(t,e){if(typeof t?.schema=="string")try{Gt.fromString(t.schema)}catch{throw new Error("Schema must be a CommitID")}const r={controllers:t?.controllers,family:t?.family,schema:t?.schema?.toString(),tags:t?.tags};if(e)t?.deterministic||(r.unique=we(lt.randomBytes(12),"base64")),t?.forbidControllerChange&&(r.forbidControllerChange=!0);else{if(t?.deterministic!==void 0||t?.unique!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if(t?.forbidControllerChange!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(r).forEach(n=>r[n]===void 0&&delete r[n]),r}async function qn(t){if(!t.did)throw new Error("No DID provided");return t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`)),t.did}async function kr(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let Yt=We=class extends pc{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){const{next:e,metadata:r}=this.state$.value;return tn(e?.metadata??r)}get controllers(){return this.metadata.controllers}static async create(e,r,n,i={}){i={...$r,...i},!n?.deterministic&&i.syncTimeoutSeconds==null&&(i.syncTimeoutSeconds=0);const c=i.asDID?{did:i.asDID}:e,d=await We.makeGenesis(c,r,n);return e.createStreamFromGenesis(We.STREAM_TYPE_ID,d,i)}static async createFromGenesis(e,r,n={}){n={...$r,...n},r.header?.unique&&n.syncTimeoutSeconds==null&&(n.syncTimeoutSeconds=0);const i=r.data?await We._signDagJWS(e,r):r;return e.createStreamFromGenesis(We.STREAM_TYPE_ID,i,n)}static async deterministic(e,r,n={}){if(n={...$r,...n},r={...r,deterministic:!0},r.family==null&&r.tags==null)throw new Error("Family and/or tags are required when creating a deterministic tile document");const i=await We.makeGenesis(e,null,r);return e.createStreamFromGenesis(We.STREAM_TYPE_ID,i,n)}static async load(e,r,n={}){n={...Sc,...n};const i=Gf.from(r);if(i.type!=We.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${We.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}async update(e,r,n={}){n={...Bn,...n};const i=n.asDID?{did:n.asDID}:this.api,c=await this.makeCommit(i,e,r),d=await this.api.applyCommit(this.id,c,n);this.state$.next(d.state)}async patch(e,r={}){r={...Bn,...r};const i={header:Or(this.metadata,!1),data:e,prev:this.tip,id:this.id.cid},c=await We._signDagJWS(this.api,i),d=await this.api.applyCommit(this.id,c,r);this.state$.next(d.state)}makeReadOnly(){this.update=kr,this.patch=kr,this.sync=kr,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(e,r,n){const i=await this._makeRawCommit(r,n);return We._signDagJWS(e,i)}async _makeRawCommit(e,r){r||(r={});const n=Or(r,!1);if(e==null&&(e=this.content),n.controllers){if(n.controllers.length!==1)throw new Error("Exactly one controller must be specified");if(!n.controllers[0])throw new Error("Controller cannot be updated to an undefined value.")}const i=Wf.compare(this.content,e),c=this.state.log[0];return{header:n,data:i,prev:this.tip,id:c.cid}}static async makeGenesis(e,r,n){if(n||(n={}),!n.controllers||n.controllers.length===0)if(e.did){const d=await qn(e);n.controllers=[d.hasParent?d.parent:d.id]}else throw new Error("No controllers specified");if(n.controllers?.length!==1)throw new Error("Exactly one controller must be specified");const i=Or(n,!0);if(n?.deterministic&&r)throw new Error("Initial content must be null when creating a deterministic Tile document");if(r==null){const d={header:i};return Xf(d),d}const c={data:r,header:i};return We._signDagJWS(e,c)}static async _signDagJWS(e,r){return(await qn(e)).createDagJWS(r)}};Yt.STREAM_TYPE_NAME="tile";Yt.STREAM_TYPE_ID=0;Yt=We=xc([yc()],Yt);var fn={exports:{}};(function(t,e){(function(r,n){n(e)})(Yf,function(r){const n=Symbol("newer"),i=Symbol("older");class c{constructor(b,l){typeof b!="number"&&(l=b,b=0),this.size=0,this.limit=b,this.oldest=this.newest=void 0,this._keymap=new Map,l&&(this.assign(l),b<1&&(this.limit=this.size))}_markEntryAsUsed(b){b!==this.newest&&(b[n]&&(b===this.oldest&&(this.oldest=b[n]),b[n][i]=b[i]),b[i]&&(b[i][n]=b[n]),b[n]=void 0,b[i]=this.newest,this.newest&&(this.newest[n]=b),this.newest=b)}assign(b){let l,v=this.limit||Number.MAX_VALUE;this._keymap.clear();let _=b[Symbol.iterator]();for(let g=_.next();!g.done;g=_.next()){let D=new d(g.value[0],g.value[1]);if(this._keymap.set(D.key,D),l?(l[n]=D,D[i]=l):this.oldest=D,l=D,v--==0)throw new Error("overflow")}this.newest=l,this.size=this._keymap.size}get(b){var l=this._keymap.get(b);return l?(this._markEntryAsUsed(l),l.value):void 0}set(b,l){var v=this._keymap.get(b);return v?(v.value=l,this._markEntryAsUsed(v),this):(this._keymap.set(b,v=new d(b,l)),this.newest?(this.newest[n]=v,v[i]=this.newest):this.oldest=v,this.newest=v,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var b=this.oldest;if(b)return this.oldest[n]?(this.oldest=this.oldest[n],this.oldest[i]=void 0):(this.oldest=void 0,this.newest=void 0),b[n]=b[i]=void 0,this._keymap.delete(b.key),--this.size,[b.key,b.value]}find(b){let l=this._keymap.get(b);return l?l.value:void 0}has(b){return this._keymap.has(b)}delete(b){var l=this._keymap.get(b);return l?(this._keymap.delete(l.key),l[n]&&l[i]?(l[i][n]=l[n],l[n][i]=l[i]):l[n]?(l[n][i]=void 0,this.oldest=l[n]):l[i]?(l[i][n]=void 0,this.newest=l[i]):this.oldest=this.newest=void 0,this.size--,l.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new o(this.oldest)}values(){return new u(this.oldest)}entries(){return this}[Symbol.iterator](){return new s(this.oldest)}forEach(b,l){typeof l!="object"&&(l=this);let v=this.oldest;for(;v;)b.call(l,v.value,v.key,this),v=v[n]}toJSON(){for(var b=new Array(this.size),l=0,v=this.oldest;v;)b[l++]={key:v.key,value:v.value},v=v[n];return b}toString(){for(var b="",l=this.oldest;l;)b+=String(l.key)+":"+l.value,l=l[n],l&&(b+=" < ");return b}}r.LRUMap=c;function d(h,b){this.key=h,this.value=b,this[n]=void 0,this[i]=void 0}function s(h){this.entry=h}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let h=this.entry;return h?(this.entry=h[n],{done:!1,value:[h.key,h.value]}):{done:!0,value:void 0}};function o(h){this.entry=h}o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let h=this.entry;return h?(this.entry=h[n],{done:!1,value:h.key}):{done:!0,value:void 0}};function u(h){this.entry=h}u.prototype[Symbol.iterator]=function(){return this},u.prototype.next=function(){let h=this.entry;return h?(this.entry=h[n],{done:!1,value:h.value}):{done:!0,value:void 0}}})})(fn,fn.exports);const Ec=fn.exports,Ac="https://ipfs.3box.io",Ic=100,jn=new Ec.LRUMap(Ic),Pc=async t=>{const e=jn.get(t);if(e)return e;const r=await Vf(t);if(r.ok){const n=await r.json();return jn.set(t,n),n}else throw new Error("Not a valid 3ID")},Mc=t=>`${Ac}/did-doc?cid=${encodeURIComponent(t)}`,Dc={dag:{get:async t=>Pc(Mc(t))}},Hn=(t,e)=>{const r=new Uint8Array(t.length+2);return e?r[0]=236:r[0]=231,r[1]=1,r.set(t,2),`z${we(r,"base58btc")}`},Tc=t=>{const e=t.slice(2,66);return`${(t.slice(66,130)&1)===0?"02":"03"}${e}`},Rc=async(t,e=Dc)=>{const r=(await e.dag.get(t)).value;let n,i;try{const o=r.publicKey.findIndex(h=>h.id.endsWith("signingKey")),u=r.publicKey.findIndex(h=>h.id.endsWith("encryptionKey"));n=r.publicKey[o].publicKeyHex,i=r.publicKey[u].publicKeyBase64}catch{throw new Error("Not a valid 3ID")}const c=Tc(n),d=Hn(le(c,"base16")),s=Hn(le(i,"base64pad"),!0);return{keyDid:`did:key:${d}`,publicKeys:{[d.slice(-15)]:d,[s.slice(-15)]:s}}},zi=t=>({didResolutionMetadata:t,didDocument:null,didDocumentMetadata:{}}),Nc=t=>t().catch(e=>zi({error:"invalidDid",message:e.toString()})),Fn="application/did+ld+json",an="application/did+json",Cc=t=>{try{return Wt.parse(t),!0}catch{return!1}},Jn=t=>new Date(t*1e3).toISOString().split(".")[0]+"Z";function Ki(t,e){if(!(t&&t.publicKeys))return null;const r={id:e,verificationMethod:[],authentication:[],keyAgreement:[]};return Object.entries(t.publicKeys).reduce((n,[i,c])=>{const d=le(c.slice(1),"base58btc"),s={id:`${e}#${i}`,type:"",controller:e,publicKeyBase58:we(d.slice(2),"base58btc")};return d[0]===231?(s.type="EcdsaSecp256k1Signature2019",n.verificationMethod.push(s),n.authentication.push(s)):d[0]===236&&(s.type="X25519KeyAgreementKey2019",n.verificationMethod.push(s),n.keyAgreement.push(s)),n},r)}function Lc(t){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r.type===ur.ANCHOR)return r}return t[0]}function $c(t,e){const r={},{timestamp:n,cid:i}=Lc(t.log),{timestamp:c,cid:d}=e.log.find(({timestamp:s})=>s>n||!n&&s)||{};return n&&(r.updated=Jn(n)),c&&(r.nextUpdate=Jn(c)),i&&(r.versionId=t.log.length===1?"0":i?.toString()),d&&(r.nextVersionId=d.toString()),r}function Oc(t=""){const e=t.split("&").find(n=>n.includes("versionId")||n.includes("version-id")),r=t.split("&").find(n=>n.includes("versionTime"));return{commit:e?e.split("=")[1]:void 0,timestamp:r?Math.floor(new Date(r.split("=")[1]).getTime()/1e3):void 0}}const kc=async(t,e,r)=>{const n=await Rc(e),i={controllers:[n.keyDid],family:"3id",deterministic:!0},c=(await Yt.create(t,null,i,{anchor:!1,publish:!1})).id,d=await Ui(t,c.toString(),r,e);return d.didDocument===null&&(d.didDocument=Ki(n,`did:3:${e}`)),d},Ui=async(t,e,r,n)=>{const i=_i.fromString(e);let c;const d=[{streamId:i}];r.commit?(c=Gt.make(i,r.commit),d.push({streamId:c})):r.timestamp&&d.push({streamId:i,atTime:r.timestamp});const s=await t.multiQuery(d);if(!s[e])throw new Error(`Failed to properly resolve 3ID, stream ${e} not found in response.`);const o=s[e].state,u=c?.toString()||Object.keys(s).find(g=>g!==e),h=s[u]?.state||o,b=$c(h,o),l=s[u||e];if(u&&!l)throw new Error(`No resolution for commit ${u}`);const v=l.state.content,_=Ki(v,`did:3:${n||e}`);return{didResolutionMetadata:{contentType:an},didDocument:_,didDocumentMetadata:b}};function zc(t){return{3:(e,r,n,i)=>Nc(async()=>{const c=i.accept||an,d=Oc(r.query),s=r.id,o=()=>Cc(s)?kc(t,s,d):Ui(t,s,d);switch(c){case an:return o();case Fn:{const u=await o();return u.didDocument["@context"]="https://www.w3.org/ns/did/v1",u.didResolutionMetadata.contentType=Fn,u}default:return zi({error:"representationNotSupported"})}})}}function Kc(t,e){const r=`did:key:${e}`,n=`${r}#${e}`;return{id:r,verificationMethod:[{id:n,type:"Secp256k1VerificationKey2018",controller:r,publicKeyBase58:we(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}const Uc=Object.freeze(Object.defineProperty({__proto__:null,keyToDidDoc:Kc},Symbol.toStringTag,{value:"Module"}));function Bc(t){const e=new Uint8Array(t.length+2);return e[0]=236,e[1]=1,e.set(t,2),`z${we(e,"base58btc")}`}function qc(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Nt.convertPublicKeyToX25519(t),c=`${r}#${Bc(i)}`;return{id:r,verificationMethod:[{id:n,type:"Ed25519VerificationKey2018",controller:r,publicKeyBase58:we(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n],keyAgreement:[{id:c,type:"X25519KeyAgreementKey2019",controller:r,publicKeyBase58:we(i,"base58btc")}]}}const jc=Object.freeze(Object.defineProperty({__proto__:null,keyToDidDoc:qc},Symbol.toStringTag,{value:"Module"}));function Hc(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var Fc=Hc;function Jc(t,e){e||(e=t.reduce((i,c)=>i+c.length,0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}var Gc=Jc;function Wc(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Xc=Wc;const Yc=Zf(Qf),{bases:Gn}=Yc;function Bi(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Wn=Bi("utf8","u",t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),zr=Bi("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Vc={utf8:Wn,"utf-8":Wn,hex:Gn.base16,latin1:zr,ascii:zr,binary:zr,...Gn};var qi=Vc;const Zc=qi;function Qc(t,e="utf8"){const r=Zc[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var es=Qc;const ts=qi;function rs(t,e="utf8"){const r=ts[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var ns=rs;function is(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}var fs=is;const as=Fc,cs=Gc,ss=Xc,ds=es,os=ns,us=fs;var ut={compare:as,concat:cs,equals:ss,fromString:ds,toString:os,xor:us};function hs(t){return t>=0?t:-t}function bs(t,e){if(typeof t=="number"&&(t=BigInt(t)),typeof e=="number"&&(e=BigInt(e)),t<=0n||e<=0n)throw new RangeError("a and b MUST be > 0");let r=0n,n=1n,i=1n,c=0n;for(;t!==0n;){const d=e/t,s=e%t,o=r-i*d,u=n-c*d;e=t,t=s,r=i,n=c,i=o,c=u}return{g:e,x:r,y:n}}function cn(t,e){if(typeof t=="number"&&(t=BigInt(t)),typeof e=="number"&&(e=BigInt(e)),e<=0n)throw new RangeError("n must be > 0");const r=t%e;return r<0n?r+e:r}function ls(t,e){const r=bs(cn(t,e),e);if(r.g!==1n)throw new RangeError(`${t.toString()} does not have inverse modulo ${e.toString()}`);return cn(r.x,e)}function _r(t,e,r){if(typeof t=="number"&&(t=BigInt(t)),typeof e=="number"&&(e=BigInt(e)),typeof r=="number"&&(r=BigInt(r)),r<=0n)throw new RangeError("n must be > 0");if(r===1n)return 0n;if(t=cn(t,r),e<0n)return ls(_r(t,hs(e),r),r);let n=1n;for(;e>0;)e%2n===1n&&(n=n*t%r),e=e/2n,t=t**2n%r;return n}function gn(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");return ut.toString(t,"base16")}function hr(t){if(!ji(t))throw new TypeError("input must be string with characters 0-9,A-F,a-f");const e=vs(t),r=dr.encode(e.xOctet).slice(1),n=dr.encode(e.yOctet).slice(1);return{xm:r,ym:n}}function vs(t){if(!ji(t))throw new TypeError("input must be string with characters 0-9,A-F,a-f");const e=t.slice(0,t.length/2),r=t.slice(t.length/2,t.length),n=ut.fromString(e,"base16"),i=ut.fromString(r,"base16");return{xOctet:n,yOctet:i}}function ji(t){const e=/^[A-Fa-f0-9]+$/i;return!!(e.exec(t)!==null&&e.test(t)&&typeof t=="string")}function Et(t){return t==null?!1:t.constructor===Uint8Array}function _n(t){if(t==null)throw new TypeError("input cannot be null or undefined.");if(typeof t!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(t,"x")||!Object.prototype.hasOwnProperty.call(t,"y"))throw new Error("Input must have properties x and y");if(typeof t.x!="bigint"&&typeof t.y!="bigint")throw new Error("Input coordinates must be BigInt");const e=ps(t),r=dr.encode(e.xOctet).slice(1),n=dr.encode(e.yOctet).slice(1);return{xm:r,ym:n}}function ps(t){if(t==null)throw new TypeError("input cannot be null or undefined.");if(typeof t!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(t,"x")||!Object.prototype.hasOwnProperty.call(t,"y"))throw new Error("Input must have properties x and y");if(typeof t.x!="bigint"&&typeof t.y!="bigint")throw new Error("Input coordinates must be BigInt");const e=t.x.toString(),r=t.y.toString(),n=ut.fromString(e,"base10"),i=ut.fromString(r,"base10");return{xOctet:n,yOctet:i}}function ys(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const e=BigInt(2),r=e**256n-e**224n+e**192n+e**96n-1n,n=41058363725152142129326129780047268409114441015993725554835256314039467401291n,i=(r+1n)/4n,c=BigInt(t[0]-2),d=t.subarray(1),s=BigInt(ut.toString(d,"base10")),o=s**3n-s*3n+n;let u=_r(o,i,r);return u%2n!==c&&(u=r-u),{x:s,y:u}}function ws(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const e=BigInt(2),r=e**384n-e**128n-e**96n+e**32n-1n,n=27580193559959705877849011840389048093056905856361568521428707301988689241309860865136260764883745107765439761230575n,i=(r+1n)/4n,c=BigInt(t[0]-2),d=t.subarray(1),s=BigInt(ut.toString(d,"base10")),o=s**3n-s*3n+n;let u=_r(o,i,r);return u%2n!==c&&(u=r-u),{x:s,y:u}}function gs(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const r=BigInt(2)**521n-1n,n=1093849038073734274511112390766805569936207598951683748994586394495953116150735016013708737573759623248592132296706313309438452531591012912142327488478985984n,i=(r+1n)/4n,c=BigInt(t[0]-2),d=t.subarray(1),s=BigInt(ut.toString(d,"base10")),o=s**3n-s*3n+n;let u=_r(o,i,r);return u%2n!==c&&(u=r-u),{x:s,y:u}}function _s(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Hi(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-256",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Hi(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const e=gn(t),r=e.length/2;if(r==64)return hr(e);if(r==65&&e.slice(0,2)=="04"){const n=e.slice(2);return hr(n)}if(r==33&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){const n=le(e,"base16"),i=ys(n);return _n(i)}throw new Error("Unexpected pubKeyBytes")}const ms=Object.freeze(Object.defineProperty({__proto__:null,keyToDidDoc:_s,pubKeyBytesToXY:Hi},Symbol.toStringTag,{value:"Module"}));function xs(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Fi(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-384",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Fi(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const e=gn(t),r=e.length/2;if(r==96)return hr(e);if(r==97&&e.slice(0,2)=="04"){const n=e.slice(2);return hr(n)}if(r==49&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){const n=le(e,"base16"),i=ws(n);return _n(i)}throw new Error("Unexpected pubKeyBytes")}const Ss=Object.freeze(Object.defineProperty({__proto__:null,keyToDidDoc:xs,pubKeyBytesToXY:Fi},Symbol.toStringTag,{value:"Module"}));function Es(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Ji(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-521",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Ji(t){if(!Et(t))throw new TypeError("input must be a Uint8Array");const e=gn(t);if(132<=e.length&&e.length<=134&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){const r=le(e,"base16"),n=gs(r);return _n(n)}throw new Error("Unexpected pubKeyBytes")}const As=Object.freeze(Object.defineProperty({__proto__:null,keyToDidDoc:Es,pubKeyBytesToXY:Ji},Symbol.toStringTag,{value:"Module"})),Is="application/did+ld+json",Xn="application/did+json",Ps={231:Uc,237:jc,4608:ms,4609:Ss,4610:As};function Gi(){return{key:async(t,e,r,n)=>{const i=n.accept||Xn,c={didResolutionMetadata:{contentType:i},didDocument:null,didDocumentMetadata:{}};try{const d=ea.decode(e.id),s=Cn.decode(d),o=d.slice(Cn.decode.bytes),u=await Ps[s].keyToDidDoc(o,e.id);i===Is?(u["@context"]="https://w3id.org/did/v1",c.didDocument=u):i===Xn?c.didDocument=u:(delete c.didResolutionMetadata.contentType,c.didResolutionMetadata.error="representationNotSupported")}catch(d){c.didResolutionMetadata.error="invalidDid",c.didResolutionMetadata.message=d.toString()}return c}}}const Ms={getResolver:Gi},Ds={definitions:{cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic"},schemas:{CryptoAccounts:"ceramic://k3y52l7qbv1frypussjburqg4fykyyycfu0p9znc75lv2t5cg4xaslhagkd7h7mkg",AlsoKnownAs:"ceramic://k3y52l7qbv1fryojt8n8cw2k04p9wp67ly59iwqs65dejso566fij5wsdrb871yio",BasicProfile:"ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio"},tiles:{}};function Ts(t){try{return mi.parse(t),!0}catch{return!1}}function Rs(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ns(t,e){return e.get?e.get.call(t):e.value}function Cs(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Wi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function fr(t,e){var r=Wi(t,e,"get");return Ns(t,r)}function Kr(t,e,r){Rs(t,e),e.set(t,r)}function Ur(t,e,r){var n=Wi(t,e,"set");return Cs(t,n,r),r}const Ls={local:"http://localhost:7007","mainnet-gateway":"https://gateway.ceramic.network","testnet-clay":"https://ceramic-clay.3boxlabs.com","testnet-clay-gateway":"https://gateway-clay.ceramic.network"};var ar=new WeakMap,Br=new WeakMap,qr=new WeakMap;class Xi{get ceramic(){return this._ceramic}get dataModel(){return fr(this,ar)}get dataStore(){return this._dataStore}get resolver(){return fr(this,Br)}get tileLoader(){return fr(this,qr)}async getAccountDID(e){const r=await ta.fromAccount(this._ceramic,e);if(r.did==null)throw new Error(`No DID found for ${e}`);return r.did}async toDID(e){return ra(e)?e:Ts(e)?await this.getAccountDID(e):e}async get(e,r){const n=await this.toDID(r);return await this._dataStore.get(e,n)}constructor(e){Kr(this,ar,{writable:!0,value:void 0}),Kr(this,Br,{writable:!0,value:void 0}),Kr(this,qr,{writable:!0,value:void 0});const r=new na(Ls[e.ceramic]??e.ceramic),n=e.loader??new ia({ceramic:r,cache:e.cache});this._ceramic=r,Ur(this,ar,new fa({loader:n,aliases:e.aliases??Ds})),this._dataStore=new aa({ceramic:r,loader:n,model:fr(this,ar)}),Ur(this,Br,new xi({...Gi(),...zc(this._ceramic)})),Ur(this,qr,n)}}var Ct={};const $s="elliptic",Os="6.5.4",ks="EC cryptography",zs="lib/elliptic.js",Ks=["lib"],Us={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Bs={type:"git",url:"git@github.com:indutny/elliptic"},qs=["EC","Elliptic","curve","Cryptography"],js="Fedor Indutny <fedor@indutny.com>",Hs="MIT",Fs={url:"https://github.com/indutny/elliptic/issues"},Js="https://github.com/indutny/elliptic",Gs={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Ws={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Xs={name:$s,version:Os,description:ks,main:zs,files:Ks,scripts:Us,repository:Bs,keywords:qs,author:js,license:Hs,bugs:Fs,homepage:Js,devDependencies:Gs,dependencies:Ws};var Xe={},mn={};(function(t){var e=t;function r(c,d){if(Array.isArray(c))return c.slice();if(!c)return[];var s=[];if(typeof c!="string"){for(var o=0;o<c.length;o++)s[o]=c[o]|0;return s}if(d==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var o=0;o<c.length;o+=2)s.push(parseInt(c[o]+c[o+1],16))}else for(var o=0;o<c.length;o++){var u=c.charCodeAt(o),h=u>>8,b=u&255;h?s.push(h,b):s.push(b)}return s}e.toArray=r;function n(c){return c.length===1?"0"+c:c}e.zero2=n;function i(c){for(var d="",s=0;s<c.length;s++)d+=n(c[s].toString(16));return d}e.toHex=i,e.encode=function(d,s){return s==="hex"?i(d):d}})(mn);(function(t){var e=t,r=it.exports,n=Si,i=mn;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function c(h,b,l){var v=new Array(Math.max(h.bitLength(),l)+1);v.fill(0);for(var _=1<<b+1,g=h.clone(),D=0;D<v.length;D++){var L,F=g.andln(_-1);g.isOdd()?(F>(_>>1)-1?L=(_>>1)-F:L=F,g.isubn(L)):L=0,v[D]=L,g.iushrn(1)}return v}e.getNAF=c;function d(h,b){var l=[[],[]];h=h.clone(),b=b.clone();for(var v=0,_=0,g;h.cmpn(-v)>0||b.cmpn(-_)>0;){var D=h.andln(3)+v&3,L=b.andln(3)+_&3;D===3&&(D=-1),L===3&&(L=-1);var F;(D&1)===0?F=0:(g=h.andln(7)+v&7,(g===3||g===5)&&L===2?F=-D:F=D),l[0].push(F);var B;(L&1)===0?B=0:(g=b.andln(7)+_&7,(g===3||g===5)&&D===2?B=-L:B=L),l[1].push(B),2*v===F+1&&(v=1-v),2*_===B+1&&(_=1-_),h.iushrn(1),b.iushrn(1)}return l}e.getJSF=d;function s(h,b,l){var v="_"+b;h.prototype[b]=function(){return this[v]!==void 0?this[v]:this[v]=l.call(this)}}e.cachedProperty=s;function o(h){return typeof h=="string"?e.toArray(h,"hex"):h}e.parseBytes=o;function u(h){return new r(h,"hex","le")}e.intFromLE=u})(Xe);var mr={exports:{}},jr;mr.exports=function(e){return jr||(jr=new dt(null)),jr.generate(e)};function dt(t){this.rand=t}mr.exports.Rand=dt;dt.prototype.generate=function(e){return this._rand(e)};dt.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?dt.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?dt.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(dt.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Yn=ca;if(typeof Yn.randomBytes!="function")throw new Error("Not supported");dt.prototype._rand=function(e){return Yn.randomBytes(e)}}catch{}var xn={},yt=it.exports,er=Xe,br=er.getNAF,Ys=er.getJSF,lr=er.assert;function vt(t,e){this.type=t,this.p=new yt(e.p,16),this.red=e.prime?yt.red(e.prime):yt.mont(this.p),this.zero=new yt(0).toRed(this.red),this.one=new yt(1).toRed(this.red),this.two=new yt(2).toRed(this.red),this.n=e.n&&new yt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var xr=vt;vt.prototype.point=function(){throw new Error("Not implemented")};vt.prototype.validate=function(){throw new Error("Not implemented")};vt.prototype._fixedNafMul=function(e,r){lr(e.precomputed);var n=e._getDoubles(),i=br(r,1,this._bitLength),c=(1<<n.step+1)-(n.step%2===0?2:1);c/=3;var d=[],s,o;for(s=0;s<i.length;s+=n.step){o=0;for(var u=s+n.step-1;u>=s;u--)o=(o<<1)+i[u];d.push(o)}for(var h=this.jpoint(null,null,null),b=this.jpoint(null,null,null),l=c;l>0;l--){for(s=0;s<d.length;s++)o=d[s],o===l?b=b.mixedAdd(n.points[s]):o===-l&&(b=b.mixedAdd(n.points[s].neg()));h=h.add(b)}return h.toP()};vt.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var c=i.points,d=br(r,n,this._bitLength),s=this.jpoint(null,null,null),o=d.length-1;o>=0;o--){for(var u=0;o>=0&&d[o]===0;o--)u++;if(o>=0&&u++,s=s.dblp(u),o<0)break;var h=d[o];lr(h!==0),e.type==="affine"?h>0?s=s.mixedAdd(c[h-1>>1]):s=s.mixedAdd(c[-h-1>>1].neg()):h>0?s=s.add(c[h-1>>1]):s=s.add(c[-h-1>>1].neg())}return e.type==="affine"?s.toP():s};vt.prototype._wnafMulAdd=function(e,r,n,i,c){var d=this._wnafT1,s=this._wnafT2,o=this._wnafT3,u=0,h,b,l;for(h=0;h<i;h++){l=r[h];var v=l._getNAFPoints(e);d[h]=v.wnd,s[h]=v.points}for(h=i-1;h>=1;h-=2){var _=h-1,g=h;if(d[_]!==1||d[g]!==1){o[_]=br(n[_],d[_],this._bitLength),o[g]=br(n[g],d[g],this._bitLength),u=Math.max(o[_].length,u),u=Math.max(o[g].length,u);continue}var D=[r[_],null,null,r[g]];r[_].y.cmp(r[g].y)===0?(D[1]=r[_].add(r[g]),D[2]=r[_].toJ().mixedAdd(r[g].neg())):r[_].y.cmp(r[g].y.redNeg())===0?(D[1]=r[_].toJ().mixedAdd(r[g]),D[2]=r[_].add(r[g].neg())):(D[1]=r[_].toJ().mixedAdd(r[g]),D[2]=r[_].toJ().mixedAdd(r[g].neg()));var L=[-3,-1,-5,-7,0,7,5,1,3],F=Ys(n[_],n[g]);for(u=Math.max(F[0].length,u),o[_]=new Array(u),o[g]=new Array(u),b=0;b<u;b++){var B=F[0][b]|0,M=F[1][b]|0;o[_][b]=L[(B+1)*3+(M+1)],o[g][b]=0,s[_]=D}}var P=this.jpoint(null,null,null),A=this._wnafT4;for(h=u;h>=0;h--){for(var a=0;h>=0;){var p=!0;for(b=0;b<i;b++)A[b]=o[b][h]|0,A[b]!==0&&(p=!1);if(!p)break;a++,h--}if(h>=0&&a++,P=P.dblp(a),h<0)break;for(b=0;b<i;b++){var N=A[b];N!==0&&(N>0?l=s[b][N-1>>1]:N<0&&(l=s[b][-N-1>>1].neg()),l.type==="affine"?P=P.mixedAdd(l):P=P.add(l))}}for(h=0;h<i;h++)s[h]=null;return c?P:P.toP()};function Ze(t,e){this.curve=t,this.type=e,this.precomputed=null}vt.BasePoint=Ze;Ze.prototype.eq=function(){throw new Error("Not implemented")};Ze.prototype.validate=function(){return this.curve.validate(this)};vt.prototype.decodePoint=function(e,r){e=er.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?lr(e[e.length-1]%2===0):e[0]===7&&lr(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Ze.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ze.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Ze.prototype.encode=function(e,r){return er.encode(this._encode(r),e)};Ze.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Ze.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Ze.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,c=0;c<r;c+=e){for(var d=0;d<e;d++)i=i.dbl();n.push(i)}return{step:e,points:n}};Ze.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),c=1;c<n;c++)r[c]=r[c-1].add(i);return{wnd:e,points:r}};Ze.prototype._getBeta=function(){return null};Ze.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Vs=Xe,ge=it.exports,Sn=ln.exports,Lt=xr,Zs=Vs.assert;function Qe(t){Lt.call(this,"short",t),this.a=new ge(t.a,16).toRed(this.red),this.b=new ge(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Sn(Qe,Lt);var Qs=Qe;Qe.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ge(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new ge(e.lambda,16);else{var c=this._getEndoRoots(this.n);this.g.mul(c[0]).x.cmp(this.g.x.redMul(r))===0?n=c[0]:(n=c[1],Zs(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var d;return e.basis?d=e.basis.map(function(s){return{a:new ge(s.a,16),b:new ge(s.b,16)}}):d=this._getEndoBasis(n),{beta:r,lambda:n,basis:d}}};Qe.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ge.mont(e),n=new ge(2).toRed(r).redInvm(),i=n.redNeg(),c=new ge(3).toRed(r).redNeg().redSqrt().redMul(n),d=i.redAdd(c).fromRed(),s=i.redSub(c).fromRed();return[d,s]};Qe.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),c=new ge(1),d=new ge(0),s=new ge(0),o=new ge(1),u,h,b,l,v,_,g,D=0,L,F;n.cmpn(0)!==0;){var B=i.div(n);L=i.sub(B.mul(n)),F=s.sub(B.mul(c));var M=o.sub(B.mul(d));if(!b&&L.cmp(r)<0)u=g.neg(),h=c,b=L.neg(),l=F;else if(b&&++D===2)break;g=L,i=n,n=L,s=c,c=F,o=d,d=M}v=L.neg(),_=F;var P=b.sqr().add(l.sqr()),A=v.sqr().add(_.sqr());return A.cmp(P)>=0&&(v=u,_=h),b.negative&&(b=b.neg(),l=l.neg()),v.negative&&(v=v.neg(),_=_.neg()),[{a:b,b:l},{a:v,b:_}]};Qe.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],c=i.b.mul(e).divRound(this.n),d=n.b.neg().mul(e).divRound(this.n),s=c.mul(n.a),o=d.mul(i.a),u=c.mul(n.b),h=d.mul(i.b),b=e.sub(s).sub(o),l=u.add(h).neg();return{k1:b,k2:l}};Qe.prototype.pointFromX=function(e,r){e=new ge(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var c=i.fromRed().isOdd();return(r&&!c||!r&&c)&&(i=i.redNeg()),this.point(e,i)};Qe.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),c=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(c).cmpn(0)===0};Qe.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,c=this._endoWnafT2,d=0;d<e.length;d++){var s=this._endoSplit(r[d]),o=e[d],u=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),i[d*2]=o,i[d*2+1]=u,c[d*2]=s.k1,c[d*2+1]=s.k2}for(var h=this._wnafMulAdd(1,i,c,d*2,n),b=0;b<d*2;b++)i[b]=null,c[b]=null;return h};function Ae(t,e,r,n){Lt.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ge(e,16),this.y=new ge(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Sn(Ae,Lt.BasePoint);Qe.prototype.point=function(e,r,n){return new Ae(this,e,r,n)};Qe.prototype.pointFromJSON=function(e,r){return Ae.fromJSON(this,e,r)};Ae.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(c){return n.point(c.x.redMul(n.endo.beta),c.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Ae.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ae.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function c(s){return e.point(s[0],s[1],n)}var d=r[2];return i.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[i].concat(d.doubles.points.map(c))},naf:d.naf&&{wnd:d.naf.wnd,points:[i].concat(d.naf.points.map(c))}},i};Ae.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ae.prototype.isInfinity=function(){return this.inf};Ae.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Ae.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),c=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),d=c.redSqr().redISub(this.x.redAdd(this.x)),s=c.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,s)};Ae.prototype.getX=function(){return this.x.fromRed()};Ae.prototype.getY=function(){return this.y.fromRed()};Ae.prototype.mul=function(e){return e=new ge(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ae.prototype.mulAdd=function(e,r,n){var i=[this,r],c=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,c):this.curve._wnafMulAdd(1,i,c,2)};Ae.prototype.jmulAdd=function(e,r,n){var i=[this,r],c=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,c,!0):this.curve._wnafMulAdd(1,i,c,2,!0)};Ae.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ae.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(c){return c.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Ae.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ie(t,e,r,n){Lt.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ge(0)):(this.x=new ge(e,16),this.y=new ge(r,16),this.z=new ge(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Sn(Ie,Lt.BasePoint);Qe.prototype.jpoint=function(e,r,n){return new Ie(this,e,r,n)};Ie.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Ie.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ie.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),c=e.x.redMul(n),d=this.y.redMul(r.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),o=i.redSub(c),u=d.redSub(s);if(o.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),b=h.redMul(o),l=i.redMul(h),v=u.redSqr().redIAdd(b).redISub(l).redISub(l),_=u.redMul(l.redISub(v)).redISub(d.redMul(b)),g=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(v,_,g)};Ie.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),c=this.y,d=e.y.redMul(r).redMul(this.z),s=n.redSub(i),o=c.redSub(d);if(s.cmpn(0)===0)return o.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),h=u.redMul(s),b=n.redMul(u),l=o.redSqr().redIAdd(h).redISub(b).redISub(b),v=o.redMul(b.redISub(l)).redISub(c.redMul(h)),_=this.z.redMul(s);return this.curve.jpoint(l,v,_)};Ie.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,c=this.curve.tinv,d=this.x,s=this.y,o=this.z,u=o.redSqr().redSqr(),h=s.redAdd(s);for(r=0;r<e;r++){var b=d.redSqr(),l=h.redSqr(),v=l.redSqr(),_=b.redAdd(b).redIAdd(b).redIAdd(i.redMul(u)),g=d.redMul(l),D=_.redSqr().redISub(g.redAdd(g)),L=g.redISub(D),F=_.redMul(L);F=F.redIAdd(F).redISub(v);var B=h.redMul(o);r+1<e&&(u=u.redMul(v)),d=D,o=B,h=F}return this.curve.jpoint(d,h.redMul(c),o)};Ie.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ie.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),c=this.y.redSqr(),d=c.redSqr(),s=this.x.redAdd(c).redSqr().redISub(i).redISub(d);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i),u=o.redSqr().redISub(s).redISub(s),h=d.redIAdd(d);h=h.redIAdd(h),h=h.redIAdd(h),e=u,r=o.redMul(s.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),l=this.y.redSqr(),v=l.redSqr(),_=this.x.redAdd(l).redSqr().redISub(b).redISub(v);_=_.redIAdd(_);var g=b.redAdd(b).redIAdd(b),D=g.redSqr(),L=v.redIAdd(v);L=L.redIAdd(L),L=L.redIAdd(L),e=D.redISub(_).redISub(_),r=g.redMul(_.redISub(e)).redISub(L),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Ie.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),c=this.y.redSqr(),d=c.redSqr(),s=this.x.redAdd(c).redSqr().redISub(i).redISub(d);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=o.redSqr().redISub(s).redISub(s);e=u;var h=d.redIAdd(d);h=h.redIAdd(h),h=h.redIAdd(h),r=o.redMul(s.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),l=this.y.redSqr(),v=this.x.redMul(l),_=this.x.redSub(b).redMul(this.x.redAdd(b));_=_.redAdd(_).redIAdd(_);var g=v.redIAdd(v);g=g.redIAdd(g);var D=g.redAdd(g);e=_.redSqr().redISub(D),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(b);var L=l.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L),r=_.redMul(g.redISub(e)).redISub(L)}return this.curve.jpoint(e,r,n)};Ie.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,c=i.redSqr().redSqr(),d=r.redSqr(),s=n.redSqr(),o=d.redAdd(d).redIAdd(d).redIAdd(e.redMul(c)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(s),b=o.redSqr().redISub(h.redAdd(h)),l=h.redISub(b),v=s.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var _=o.redMul(l).redISub(v),g=n.redAdd(n).redMul(i);return this.curve.jpoint(b,_,g)};Ie.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),c=e.redAdd(e).redIAdd(e),d=c.redSqr(),s=this.x.redAdd(r).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(d);var o=s.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=c.redIAdd(s).redSqr().redISub(d).redISub(o).redISub(u),b=r.redMul(h);b=b.redIAdd(b),b=b.redIAdd(b);var l=this.x.redMul(o).redISub(b);l=l.redIAdd(l),l=l.redIAdd(l);var v=this.y.redMul(h.redMul(u.redISub(h)).redISub(s.redMul(o)));v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var _=this.z.redAdd(s).redSqr().redISub(n).redISub(o);return this.curve.jpoint(l,v,_)};Ie.prototype.mul=function(e,r){return e=new ge(e,r),this.curve._wnafMul(this,e)};Ie.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),c=n.redMul(e.z);return this.y.redMul(c).redISub(e.y.redMul(i)).cmpn(0)===0};Ie.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),c=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(c),this.x.cmp(n)===0)return!0}};Ie.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ie.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Mt=it.exports,Yi=ln.exports,Sr=xr,ed=Xe;function $t(t){Sr.call(this,"mont",t),this.a=new Mt(t.a,16).toRed(this.red),this.b=new Mt(t.b,16).toRed(this.red),this.i4=new Mt(4).toRed(this.red).redInvm(),this.two=new Mt(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Yi($t,Sr);var td=$t;$t.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),c=i.redSqrt();return c.redSqr().cmp(i)===0};function Ee(t,e,r){Sr.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Mt(e,16),this.z=new Mt(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Yi(Ee,Sr.BasePoint);$t.prototype.decodePoint=function(e,r){return this.point(ed.toArray(e,r),1)};$t.prototype.point=function(e,r){return new Ee(this,e,r)};$t.prototype.pointFromJSON=function(e){return Ee.fromJSON(this,e)};Ee.prototype.precompute=function(){};Ee.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ee.fromJSON=function(e,r){return new Ee(e,r[0],r[1]||e.one)};Ee.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ee.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Ee.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),c=r.redSub(i),d=r.redMul(i),s=c.redMul(i.redAdd(this.curve.a24.redMul(c)));return this.curve.point(d,s)};Ee.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Ee.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),c=e.x.redAdd(e.z),d=e.x.redSub(e.z),s=d.redMul(n),o=c.redMul(i),u=r.z.redMul(s.redAdd(o).redSqr()),h=r.x.redMul(s.redISub(o).redSqr());return this.curve.point(u,h)};Ee.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),c=this,d=[];r.cmpn(0)!==0;r.iushrn(1))d.push(r.andln(1));for(var s=d.length-1;s>=0;s--)d[s]===0?(n=n.diffAdd(i,c),i=i.dbl()):(i=n.diffAdd(i,c),n=n.dbl());return i};Ee.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Ee.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Ee.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Ee.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ee.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var rd=Xe,rt=it.exports,Vi=ln.exports,Er=xr,nd=rd.assert;function tt(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Er.call(this,"edwards",t),this.a=new rt(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new rt(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new rt(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),nd(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}Vi(tt,Er);var id=tt;tt.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};tt.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};tt.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};tt.prototype.pointFromX=function(e,r){e=new rt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),c=this.one.redSub(this.c2.redMul(this.d).redMul(n)),d=i.redMul(c.redInvm()),s=d.redSqrt();if(s.redSqr().redSub(d).cmp(this.zero)!==0)throw new Error("invalid point");var o=s.fromRed().isOdd();return(r&&!o||!r&&o)&&(s=s.redNeg()),this.point(e,s)};tt.prototype.pointFromY=function(e,r){e=new rt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),c=n.redMul(this.d).redMul(this.c2).redSub(this.a),d=i.redMul(c.redInvm());if(d.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var s=d.redSqrt();if(s.redSqr().redSub(d).cmp(this.zero)!==0)throw new Error("invalid point");return s.fromRed().isOdd()!==r&&(s=s.redNeg()),this.point(s,e)};tt.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),c=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(c)===0};function ye(t,e,r,n,i){Er.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new rt(e,16),this.y=new rt(r,16),this.z=n?new rt(n,16):this.curve.one,this.t=i&&new rt(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Vi(ye,Er.BasePoint);tt.prototype.pointFromJSON=function(e){return ye.fromJSON(this,e)};tt.prototype.point=function(e,r,n,i){return new ye(this,e,r,n,i)};ye.fromJSON=function(e,r){return new ye(e,r[0],r[1],r[2])};ye.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ye.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ye.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),c=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),d=i.redAdd(r),s=d.redSub(n),o=i.redSub(r),u=c.redMul(s),h=d.redMul(o),b=c.redMul(o),l=s.redMul(d);return this.curve.point(u,h,l,b)};ye.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,c,d,s,o,u;if(this.curve.twisted){s=this.curve._mulA(r);var h=s.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(h.redSub(this.curve.two)),c=h.redMul(s.redSub(n)),d=h.redSqr().redSub(h).redSub(h)):(o=this.z.redSqr(),u=h.redSub(o).redISub(o),i=e.redSub(r).redISub(n).redMul(u),c=h.redMul(s.redSub(n)),d=h.redMul(u))}else s=r.redAdd(n),o=this.curve._mulC(this.z).redSqr(),u=s.redSub(o).redSub(o),i=this.curve._mulC(e.redISub(s)).redMul(u),c=this.curve._mulC(s).redMul(r.redISub(n)),d=s.redMul(u);return this.curve.point(i,c,d)};ye.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ye.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),c=this.z.redMul(e.z.redAdd(e.z)),d=n.redSub(r),s=c.redSub(i),o=c.redAdd(i),u=n.redAdd(r),h=d.redMul(s),b=o.redMul(u),l=d.redMul(u),v=s.redMul(o);return this.curve.point(h,b,v,l)};ye.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),c=this.y.redMul(e.y),d=this.curve.d.redMul(i).redMul(c),s=n.redSub(d),o=n.redAdd(d),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(c),h=r.redMul(s).redMul(u),b,l;return this.curve.twisted?(b=r.redMul(o).redMul(c.redSub(this.curve._mulA(i))),l=s.redMul(o)):(b=r.redMul(o).redMul(c.redSub(i)),l=this.curve._mulC(s).redMul(o)),this.curve.point(h,b,l)};ye.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};ye.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};ye.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};ye.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};ye.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};ye.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ye.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ye.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ye.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};ye.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};ye.prototype.toP=ye.prototype.normalize;ye.prototype.mixedAdd=ye.prototype.add;(function(t){var e=t;e.base=xr,e.short=Qs,e.mont=td,e.edwards=id})(xn);var Ar={},Hr,Vn;function fd(){return Vn||(Vn=1,Hr={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Hr}(function(t){var e=t,r=vn,n=xn,i=Xe,c=i.assert;function d(u){u.type==="short"?this.curve=new n.short(u):u.type==="edwards"?this.curve=new n.edwards(u):this.curve=new n.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=d;function s(u,h){Object.defineProperty(e,u,{configurable:!0,enumerable:!0,get:function(){var b=new d(h);return Object.defineProperty(e,u,{configurable:!0,enumerable:!0,value:b}),b}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=fd()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})})(Ar);var ad=vn,gt=mn,Zi=Si;function ht(t){if(!(this instanceof ht))return new ht(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=gt.toArray(t.entropy,t.entropyEnc||"hex"),r=gt.toArray(t.nonce,t.nonceEnc||"hex"),n=gt.toArray(t.pers,t.persEnc||"hex");Zi(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var cd=ht;ht.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ht.prototype._hmac=function(){return new ad.hmac(this.hash,this.K)};ht.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ht.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=gt.toArray(e,r),n=gt.toArray(n,i),Zi(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ht.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=gt.toArray(n,i||"hex"),this._update(n));for(var c=[];c.length<e;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var d=c.slice(0,e);return this._update(n),this._reseed++,gt.encode(d,r)};var sd=it.exports,dd=Xe,sn=dd.assert;function Fe(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var od=Fe;Fe.fromPublic=function(e,r,n){return r instanceof Fe?r:new Fe(e,{pub:r,pubEnc:n})};Fe.fromPrivate=function(e,r,n){return r instanceof Fe?r:new Fe(e,{priv:r,privEnc:n})};Fe.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Fe.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Fe.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Fe.prototype._importPrivate=function(e,r){this.priv=new sd(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Fe.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?sn(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&sn(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Fe.prototype.derive=function(e){return e.validate()||sn(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Fe.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Fe.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Fe.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var vr=it.exports,En=Xe,ud=En.assert;function Ir(t,e){if(t instanceof Ir)return t;this._importDER(t,e)||(ud(t.r&&t.s,"Signature without r or s"),this.r=new vr(t.r,16),this.s=new vr(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var hd=Ir;function bd(){this.place=0}function Fr(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,c=0,d=e.place;c<n;c++,d++)i<<=8,i|=t[d],i>>>=0;return i<=127?!1:(e.place=d,i)}function Zn(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Ir.prototype._importDER=function(e,r){e=En.toArray(e,r);var n=new bd;if(e[n.place++]!==48)return!1;var i=Fr(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var c=Fr(e,n);if(c===!1)return!1;var d=e.slice(n.place,c+n.place);if(n.place+=c,e[n.place++]!==2)return!1;var s=Fr(e,n);if(s===!1||e.length!==s+n.place)return!1;var o=e.slice(n.place,s+n.place);if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;return this.r=new vr(d),this.s=new vr(o),this.recoveryParam=null,!0};function Jr(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Ir.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Zn(r),n=Zn(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Jr(i,r.length),i=i.concat(r),i.push(2),Jr(i,n.length);var c=i.concat(n),d=[48];return Jr(d,c.length),d=d.concat(c),En.encode(d,e)};var _t=it.exports,Qi=cd,ld=Xe,Gr=Ar,vd=mr.exports,ef=ld.assert,An=od,Pr=hd;function Ve(t){if(!(this instanceof Ve))return new Ve(t);typeof t=="string"&&(ef(Object.prototype.hasOwnProperty.call(Gr,t),"Unknown curve "+t),t=Gr[t]),t instanceof Gr.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var pd=Ve;Ve.prototype.keyPair=function(e){return new An(this,e)};Ve.prototype.keyFromPrivate=function(e,r){return An.fromPrivate(this,e,r)};Ve.prototype.keyFromPublic=function(e,r){return An.fromPublic(this,e,r)};Ve.prototype.genKeyPair=function(e){e||(e={});for(var r=new Qi({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||vd(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new _t(2));;){var c=new _t(r.generate(n));if(!(c.cmp(i)>0))return c.iaddn(1),this.keyFromPrivate(c)}};Ve.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Ve.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new _t(e,16));for(var c=this.n.byteLength(),d=r.getPrivate().toArray("be",c),s=e.toArray("be",c),o=new Qi({hash:this.hash,entropy:d,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new _t(1)),h=0;;h++){var b=i.k?i.k(h):new _t(o.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),!(b.cmpn(1)<=0||b.cmp(u)>=0)){var l=this.g.mul(b);if(!l.isInfinity()){var v=l.getX(),_=v.umod(this.n);if(_.cmpn(0)!==0){var g=b.invm(this.n).mul(_.mul(r.getPrivate()).iadd(e));if(g=g.umod(this.n),g.cmpn(0)!==0){var D=(l.getY().isOdd()?1:0)|(v.cmp(_)!==0?2:0);return i.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),D^=1),new Pr({r:_,s:g,recoveryParam:D})}}}}}};Ve.prototype.verify=function(e,r,n,i){e=this._truncateToN(new _t(e,16)),n=this.keyFromPublic(n,i),r=new Pr(r,"hex");var c=r.r,d=r.s;if(c.cmpn(1)<0||c.cmp(this.n)>=0||d.cmpn(1)<0||d.cmp(this.n)>=0)return!1;var s=d.invm(this.n),o=s.mul(e).umod(this.n),u=s.mul(c).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(o,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(c)):(h=this.g.mulAdd(o,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(c)===0)};Ve.prototype.recoverPubKey=function(t,e,r,n){ef((3&r)===r,"The recovery param is more than two bits"),e=new Pr(e,n);var i=this.n,c=new _t(t),d=e.r,s=e.s,o=r&1,u=r>>1;if(d.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?d=this.curve.pointFromX(d.add(this.curve.n),o):d=this.curve.pointFromX(d,o);var h=e.r.invm(i),b=i.sub(c).mul(h).umod(i),l=s.mul(h).umod(i);return this.g.mulAdd(b,d,l)};Ve.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Pr(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var c;try{c=this.recoverPubKey(t,e,i)}catch{continue}if(c.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var tr=Xe,tf=tr.assert,Qn=tr.parseBytes,Ot=tr.cachedProperty;function Se(t,e){this.eddsa=t,this._secret=Qn(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Qn(e.pub)}Se.fromPublic=function(e,r){return r instanceof Se?r:new Se(e,{pub:r})};Se.fromSecret=function(e,r){return r instanceof Se?r:new Se(e,{secret:r})};Se.prototype.secret=function(){return this._secret};Ot(Se,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ot(Se,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ot(Se,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ot(Se,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ot(Se,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ot(Se,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Se.prototype.sign=function(e){return tf(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Se.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Se.prototype.getSecret=function(e){return tf(this._secret,"KeyPair is public only"),tr.encode(this.secret(),e)};Se.prototype.getPublic=function(e){return tr.encode(this.pubBytes(),e)};var yd=Se,wd=it.exports,Mr=Xe,gd=Mr.assert,Dr=Mr.cachedProperty,_d=Mr.parseBytes;function At(t,e){this.eddsa=t,typeof e!="object"&&(e=_d(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),gd(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof wd&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Dr(At,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Dr(At,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Dr(At,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Dr(At,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});At.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};At.prototype.toHex=function(){return Mr.encode(this.toBytes(),"hex").toUpperCase()};var md=At,xd=vn,Sd=Ar,Rt=Xe,Ed=Rt.assert,rf=Rt.parseBytes,nf=yd,ei=md;function Ge(t){if(Ed(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Ge))return new Ge(t);t=Sd[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=xd.sha512}var Ad=Ge;Ge.prototype.sign=function(e,r){e=rf(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),c=this.g.mul(i),d=this.encodePoint(c),s=this.hashInt(d,n.pubBytes(),e).mul(n.priv()),o=i.add(s).umod(this.curve.n);return this.makeSignature({R:c,S:o,Rencoded:d})};Ge.prototype.verify=function(e,r,n){e=rf(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),c=this.hashInt(r.Rencoded(),i.pubBytes(),e),d=this.g.mul(r.S()),s=r.R().add(i.pub().mul(c));return s.eq(d)};Ge.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Rt.intFromLE(e.digest()).umod(this.curve.n)};Ge.prototype.keyFromPublic=function(e){return nf.fromPublic(this,e)};Ge.prototype.keyFromSecret=function(e){return nf.fromSecret(this,e)};Ge.prototype.makeSignature=function(e){return e instanceof ei?e:new ei(this,e)};Ge.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Ge.prototype.decodePoint=function(e){e=Rt.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,c=Rt.intFromLE(n);return this.curve.pointFromY(c,i)};Ge.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ge.prototype.decodeInt=function(e){return Rt.intFromLE(e)};Ge.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=Xs.version,e.utils=Xe,e.rand=mr.exports,e.curve=xn,e.curves=Ar,e.ec=pd,e.eddsa=Ad})(Ct);var Id=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((r,n,i)=>{const c=i===0?"":",",d=n===void 0||typeof n=="symbol"?null:n;return r+c+t(d)},"")+"]":"{"+Object.keys(e).sort().reduce((r,n,i)=>{if(e[n]===void 0||typeof e[n]=="symbol")return r;const c=r.length===0?"":",";return r+c+t(n)+":"+t(e[n])},"")+"}"},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.bech32m=dn=Vt.bech32=void 0;const pr="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ff={};for(let t=0;t<pr.length;t++){const e=pr.charAt(t);ff[e]=t}function Dt(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function ti(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Dt(e)^n>>5}e=Dt(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=Dt(e)^n&31}return e}function In(t,e,r,n){let i=0,c=0;const d=(1<<r)-1,s=[];for(let o=0;o<t.length;++o)for(i=i<<e|t[o],c+=e;c>=r;)c-=r,s.push(i>>c&d);if(n)c>0&&s.push(i<<r-c&d);else{if(c>=e)return"Excess padding";if(i<<r-c&d)return"Non-zero padding"}return s}function Pd(t){return In(t,8,5,!0)}function Md(t){const e=In(t,5,8,!1);if(Array.isArray(e))return e}function Dd(t){const e=In(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function af(t){let e;t==="bech32"?e=1:e=734539939;function r(d,s,o){if(o=o||90,d.length+7+s.length>o)throw new TypeError("Exceeds length limit");d=d.toLowerCase();let u=ti(d);if(typeof u=="string")throw new Error(u);let h=d+"1";for(let b=0;b<s.length;++b){const l=s[b];if(l>>5!==0)throw new Error("Non 5-bit word");u=Dt(u)^l,h+=pr.charAt(l)}for(let b=0;b<6;++b)u=Dt(u);u^=e;for(let b=0;b<6;++b){const l=u>>(5-b)*5&31;h+=pr.charAt(l)}return h}function n(d,s){if(s=s||90,d.length<8)return d+" too short";if(d.length>s)return"Exceeds length limit";const o=d.toLowerCase(),u=d.toUpperCase();if(d!==o&&d!==u)return"Mixed-case string "+d;d=o;const h=d.lastIndexOf("1");if(h===-1)return"No separator character for "+d;if(h===0)return"Missing prefix for "+d;const b=d.slice(0,h),l=d.slice(h+1);if(l.length<6)return"Data too short";let v=ti(b);if(typeof v=="string")return v;const _=[];for(let g=0;g<l.length;++g){const D=l.charAt(g),L=ff[D];if(L===void 0)return"Unknown character "+D;v=Dt(v)^L,!(g+6>=l.length)&&_.push(L)}return v!==e?"Invalid checksum for "+d:{prefix:b,words:_}}function i(d,s){const o=n(d,s);if(typeof o=="object")return o}function c(d,s){const o=n(d,s);if(typeof o=="object")return o;throw new Error(o)}return{decodeUnsafe:i,decode:c,encode:r,toWords:Pd,fromWordsUnsafe:Md,fromWords:Dd}}var dn=Vt.bech32=af("bech32");Vt.bech32m=af("bech32m");var yr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=lt,r=bt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(M){const P=new Float64Array(16);if(M)for(let A=0;A<M.length;A++)P[A]=M[A];return P}const i=new Uint8Array(32);i[0]=9;const c=n([56129,1]);function d(M){let P=1;for(let A=0;A<16;A++){let a=M[A]+P+65535;P=Math.floor(a/65536),M[A]=a-P*65536}M[0]+=P-1+37*(P-1)}function s(M,P,A){const a=~(A-1);for(let p=0;p<16;p++){const N=a&(M[p]^P[p]);M[p]^=N,P[p]^=N}}function o(M,P){const A=n(),a=n();for(let p=0;p<16;p++)a[p]=P[p];d(a),d(a),d(a);for(let p=0;p<2;p++){A[0]=a[0]-65517;for(let R=1;R<15;R++)A[R]=a[R]-65535-(A[R-1]>>16&1),A[R-1]&=65535;A[15]=a[15]-32767-(A[14]>>16&1);const N=A[15]>>16&1;A[14]&=65535,s(a,A,1-N)}for(let p=0;p<16;p++)M[2*p]=a[p]&255,M[2*p+1]=a[p]>>8}function u(M,P){for(let A=0;A<16;A++)M[A]=P[2*A]+(P[2*A+1]<<8);M[15]&=32767}function h(M,P,A){for(let a=0;a<16;a++)M[a]=P[a]+A[a]}function b(M,P,A){for(let a=0;a<16;a++)M[a]=P[a]-A[a]}function l(M,P,A){let a,p,N=0,R=0,U=0,j=0,H=0,E=0,m=0,O=0,T=0,I=0,C=0,$=0,k=0,G=0,z=0,J=0,Y=0,Q=0,x=0,S=0,w=0,f=0,y=0,K=0,q=0,re=0,se=0,ne=0,ue=0,me=0,_e=0,ae=A[0],ie=A[1],te=A[2],ee=A[3],Z=A[4],V=A[5],W=A[6],X=A[7],fe=A[8],ce=A[9],de=A[10],oe=A[11],he=A[12],be=A[13],ve=A[14],pe=A[15];a=P[0],N+=a*ae,R+=a*ie,U+=a*te,j+=a*ee,H+=a*Z,E+=a*V,m+=a*W,O+=a*X,T+=a*fe,I+=a*ce,C+=a*de,$+=a*oe,k+=a*he,G+=a*be,z+=a*ve,J+=a*pe,a=P[1],R+=a*ae,U+=a*ie,j+=a*te,H+=a*ee,E+=a*Z,m+=a*V,O+=a*W,T+=a*X,I+=a*fe,C+=a*ce,$+=a*de,k+=a*oe,G+=a*he,z+=a*be,J+=a*ve,Y+=a*pe,a=P[2],U+=a*ae,j+=a*ie,H+=a*te,E+=a*ee,m+=a*Z,O+=a*V,T+=a*W,I+=a*X,C+=a*fe,$+=a*ce,k+=a*de,G+=a*oe,z+=a*he,J+=a*be,Y+=a*ve,Q+=a*pe,a=P[3],j+=a*ae,H+=a*ie,E+=a*te,m+=a*ee,O+=a*Z,T+=a*V,I+=a*W,C+=a*X,$+=a*fe,k+=a*ce,G+=a*de,z+=a*oe,J+=a*he,Y+=a*be,Q+=a*ve,x+=a*pe,a=P[4],H+=a*ae,E+=a*ie,m+=a*te,O+=a*ee,T+=a*Z,I+=a*V,C+=a*W,$+=a*X,k+=a*fe,G+=a*ce,z+=a*de,J+=a*oe,Y+=a*he,Q+=a*be,x+=a*ve,S+=a*pe,a=P[5],E+=a*ae,m+=a*ie,O+=a*te,T+=a*ee,I+=a*Z,C+=a*V,$+=a*W,k+=a*X,G+=a*fe,z+=a*ce,J+=a*de,Y+=a*oe,Q+=a*he,x+=a*be,S+=a*ve,w+=a*pe,a=P[6],m+=a*ae,O+=a*ie,T+=a*te,I+=a*ee,C+=a*Z,$+=a*V,k+=a*W,G+=a*X,z+=a*fe,J+=a*ce,Y+=a*de,Q+=a*oe,x+=a*he,S+=a*be,w+=a*ve,f+=a*pe,a=P[7],O+=a*ae,T+=a*ie,I+=a*te,C+=a*ee,$+=a*Z,k+=a*V,G+=a*W,z+=a*X,J+=a*fe,Y+=a*ce,Q+=a*de,x+=a*oe,S+=a*he,w+=a*be,f+=a*ve,y+=a*pe,a=P[8],T+=a*ae,I+=a*ie,C+=a*te,$+=a*ee,k+=a*Z,G+=a*V,z+=a*W,J+=a*X,Y+=a*fe,Q+=a*ce,x+=a*de,S+=a*oe,w+=a*he,f+=a*be,y+=a*ve,K+=a*pe,a=P[9],I+=a*ae,C+=a*ie,$+=a*te,k+=a*ee,G+=a*Z,z+=a*V,J+=a*W,Y+=a*X,Q+=a*fe,x+=a*ce,S+=a*de,w+=a*oe,f+=a*he,y+=a*be,K+=a*ve,q+=a*pe,a=P[10],C+=a*ae,$+=a*ie,k+=a*te,G+=a*ee,z+=a*Z,J+=a*V,Y+=a*W,Q+=a*X,x+=a*fe,S+=a*ce,w+=a*de,f+=a*oe,y+=a*he,K+=a*be,q+=a*ve,re+=a*pe,a=P[11],$+=a*ae,k+=a*ie,G+=a*te,z+=a*ee,J+=a*Z,Y+=a*V,Q+=a*W,x+=a*X,S+=a*fe,w+=a*ce,f+=a*de,y+=a*oe,K+=a*he,q+=a*be,re+=a*ve,se+=a*pe,a=P[12],k+=a*ae,G+=a*ie,z+=a*te,J+=a*ee,Y+=a*Z,Q+=a*V,x+=a*W,S+=a*X,w+=a*fe,f+=a*ce,y+=a*de,K+=a*oe,q+=a*he,re+=a*be,se+=a*ve,ne+=a*pe,a=P[13],G+=a*ae,z+=a*ie,J+=a*te,Y+=a*ee,Q+=a*Z,x+=a*V,S+=a*W,w+=a*X,f+=a*fe,y+=a*ce,K+=a*de,q+=a*oe,re+=a*he,se+=a*be,ne+=a*ve,ue+=a*pe,a=P[14],z+=a*ae,J+=a*ie,Y+=a*te,Q+=a*ee,x+=a*Z,S+=a*V,w+=a*W,f+=a*X,y+=a*fe,K+=a*ce,q+=a*de,re+=a*oe,se+=a*he,ne+=a*be,ue+=a*ve,me+=a*pe,a=P[15],J+=a*ae,Y+=a*ie,Q+=a*te,x+=a*ee,S+=a*Z,w+=a*V,f+=a*W,y+=a*X,K+=a*fe,q+=a*ce,re+=a*de,se+=a*oe,ne+=a*he,ue+=a*be,me+=a*ve,_e+=a*pe,N+=38*Y,R+=38*Q,U+=38*x,j+=38*S,H+=38*w,E+=38*f,m+=38*y,O+=38*K,T+=38*q,I+=38*re,C+=38*se,$+=38*ne,k+=38*ue,G+=38*me,z+=38*_e,p=1,a=N+p+65535,p=Math.floor(a/65536),N=a-p*65536,a=R+p+65535,p=Math.floor(a/65536),R=a-p*65536,a=U+p+65535,p=Math.floor(a/65536),U=a-p*65536,a=j+p+65535,p=Math.floor(a/65536),j=a-p*65536,a=H+p+65535,p=Math.floor(a/65536),H=a-p*65536,a=E+p+65535,p=Math.floor(a/65536),E=a-p*65536,a=m+p+65535,p=Math.floor(a/65536),m=a-p*65536,a=O+p+65535,p=Math.floor(a/65536),O=a-p*65536,a=T+p+65535,p=Math.floor(a/65536),T=a-p*65536,a=I+p+65535,p=Math.floor(a/65536),I=a-p*65536,a=C+p+65535,p=Math.floor(a/65536),C=a-p*65536,a=$+p+65535,p=Math.floor(a/65536),$=a-p*65536,a=k+p+65535,p=Math.floor(a/65536),k=a-p*65536,a=G+p+65535,p=Math.floor(a/65536),G=a-p*65536,a=z+p+65535,p=Math.floor(a/65536),z=a-p*65536,a=J+p+65535,p=Math.floor(a/65536),J=a-p*65536,N+=p-1+37*(p-1),p=1,a=N+p+65535,p=Math.floor(a/65536),N=a-p*65536,a=R+p+65535,p=Math.floor(a/65536),R=a-p*65536,a=U+p+65535,p=Math.floor(a/65536),U=a-p*65536,a=j+p+65535,p=Math.floor(a/65536),j=a-p*65536,a=H+p+65535,p=Math.floor(a/65536),H=a-p*65536,a=E+p+65535,p=Math.floor(a/65536),E=a-p*65536,a=m+p+65535,p=Math.floor(a/65536),m=a-p*65536,a=O+p+65535,p=Math.floor(a/65536),O=a-p*65536,a=T+p+65535,p=Math.floor(a/65536),T=a-p*65536,a=I+p+65535,p=Math.floor(a/65536),I=a-p*65536,a=C+p+65535,p=Math.floor(a/65536),C=a-p*65536,a=$+p+65535,p=Math.floor(a/65536),$=a-p*65536,a=k+p+65535,p=Math.floor(a/65536),k=a-p*65536,a=G+p+65535,p=Math.floor(a/65536),G=a-p*65536,a=z+p+65535,p=Math.floor(a/65536),z=a-p*65536,a=J+p+65535,p=Math.floor(a/65536),J=a-p*65536,N+=p-1+37*(p-1),M[0]=N,M[1]=R,M[2]=U,M[3]=j,M[4]=H,M[5]=E,M[6]=m,M[7]=O,M[8]=T,M[9]=I,M[10]=C,M[11]=$,M[12]=k,M[13]=G,M[14]=z,M[15]=J}function v(M,P){l(M,P,P)}function _(M,P){const A=n();for(let a=0;a<16;a++)A[a]=P[a];for(let a=253;a>=0;a--)v(A,A),a!==2&&a!==4&&l(A,A,P);for(let a=0;a<16;a++)M[a]=A[a]}function g(M,P){const A=new Uint8Array(32),a=new Float64Array(80),p=n(),N=n(),R=n(),U=n(),j=n(),H=n();for(let T=0;T<31;T++)A[T]=M[T];A[31]=M[31]&127|64,A[0]&=248,u(a,P);for(let T=0;T<16;T++)N[T]=a[T];p[0]=U[0]=1;for(let T=254;T>=0;--T){const I=A[T>>>3]>>>(T&7)&1;s(p,N,I),s(R,U,I),h(j,p,R),b(p,p,R),h(R,N,U),b(N,N,U),v(U,j),v(H,p),l(p,R,p),l(R,N,j),h(j,p,R),b(p,p,R),v(N,p),b(R,U,H),l(p,R,c),h(p,p,U),l(R,R,p),l(p,U,H),l(U,N,a),v(N,j),s(p,N,I),s(R,U,I)}for(let T=0;T<16;T++)a[T+16]=p[T],a[T+32]=R[T],a[T+48]=N[T],a[T+64]=U[T];const E=a.subarray(32),m=a.subarray(16);_(E,E),l(m,m,E);const O=new Uint8Array(32);return o(O,m),O}t.scalarMult=g;function D(M){return g(M,i)}t.scalarMultBase=D;function L(M){if(M.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const P=new Uint8Array(M);return{publicKey:D(P),secretKey:P}}t.generateKeyPairFromSeed=L;function F(M){const P=(0,e.randomBytes)(32,M),A=L(P);return(0,r.wipe)(P),A}t.generateKeyPair=F;function B(M,P,A=!1){if(M.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(P.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const a=g(M,P);if(A){let p=0;for(let N=0;N<a.length;N++)p|=a[N];if(p===0)throw new Error("X25519: invalid shared key")}return a}t.sharedKey=B})(yr);var Pn={},rr={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});var je=wr,on=bt,Td=20;function Rd(t,e,r){for(var n=1634760805,i=857760878,c=2036477234,d=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],o=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],b=r[19]<<24|r[18]<<16|r[17]<<8|r[16],l=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],_=r[31]<<24|r[30]<<16|r[29]<<8|r[28],g=e[3]<<24|e[2]<<16|e[1]<<8|e[0],D=e[7]<<24|e[6]<<16|e[5]<<8|e[4],L=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],B=n,M=i,P=c,A=d,a=s,p=o,N=u,R=h,U=b,j=l,H=v,E=_,m=g,O=D,T=L,I=F,C=0;C<Td;C+=2)B=B+a|0,m^=B,m=m>>>32-16|m<<16,U=U+m|0,a^=U,a=a>>>32-12|a<<12,M=M+p|0,O^=M,O=O>>>32-16|O<<16,j=j+O|0,p^=j,p=p>>>32-12|p<<12,P=P+N|0,T^=P,T=T>>>32-16|T<<16,H=H+T|0,N^=H,N=N>>>32-12|N<<12,A=A+R|0,I^=A,I=I>>>32-16|I<<16,E=E+I|0,R^=E,R=R>>>32-12|R<<12,P=P+N|0,T^=P,T=T>>>32-8|T<<8,H=H+T|0,N^=H,N=N>>>32-7|N<<7,A=A+R|0,I^=A,I=I>>>32-8|I<<8,E=E+I|0,R^=E,R=R>>>32-7|R<<7,M=M+p|0,O^=M,O=O>>>32-8|O<<8,j=j+O|0,p^=j,p=p>>>32-7|p<<7,B=B+a|0,m^=B,m=m>>>32-8|m<<8,U=U+m|0,a^=U,a=a>>>32-7|a<<7,B=B+p|0,I^=B,I=I>>>32-16|I<<16,H=H+I|0,p^=H,p=p>>>32-12|p<<12,M=M+N|0,m^=M,m=m>>>32-16|m<<16,E=E+m|0,N^=E,N=N>>>32-12|N<<12,P=P+R|0,O^=P,O=O>>>32-16|O<<16,U=U+O|0,R^=U,R=R>>>32-12|R<<12,A=A+a|0,T^=A,T=T>>>32-16|T<<16,j=j+T|0,a^=j,a=a>>>32-12|a<<12,P=P+R|0,O^=P,O=O>>>32-8|O<<8,U=U+O|0,R^=U,R=R>>>32-7|R<<7,A=A+a|0,T^=A,T=T>>>32-8|T<<8,j=j+T|0,a^=j,a=a>>>32-7|a<<7,M=M+N|0,m^=M,m=m>>>32-8|m<<8,E=E+m|0,N^=E,N=N>>>32-7|N<<7,B=B+p|0,I^=B,I=I>>>32-8|I<<8,H=H+I|0,p^=H,p=p>>>32-7|p<<7;je.writeUint32LE(B+n|0,t,0),je.writeUint32LE(M+i|0,t,4),je.writeUint32LE(P+c|0,t,8),je.writeUint32LE(A+d|0,t,12),je.writeUint32LE(a+s|0,t,16),je.writeUint32LE(p+o|0,t,20),je.writeUint32LE(N+u|0,t,24),je.writeUint32LE(R+h|0,t,28),je.writeUint32LE(U+b|0,t,32),je.writeUint32LE(j+l|0,t,36),je.writeUint32LE(H+v|0,t,40),je.writeUint32LE(E+_|0,t,44),je.writeUint32LE(m+g|0,t,48),je.writeUint32LE(O+D|0,t,52),je.writeUint32LE(T+L|0,t,56),je.writeUint32LE(I+F|0,t,60)}function cf(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var c,d;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),d=c.length-e.length,c.set(e,d)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,d=i}for(var s=new Uint8Array(64),o=0;o<r.length;o+=64){Rd(s,c,t);for(var u=o;u<o+64&&u<r.length;u++)n[u]=r[u]^s[u-o];Cd(c,0,d)}return on.wipe(s),i===0&&on.wipe(c),n}nr.streamXOR=cf;function Nd(t,e,r,n){return n===void 0&&(n=0),on.wipe(r),cf(t,e,r,r,n)}nr.stream=Nd;function Cd(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(rr,"__esModule",{value:!0});var at=wr,sf=bt,Ld=nr,$d=20;function df(t,e,r,n){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var i=of(t,e.subarray(0,16),new Uint8Array(32)),c=new Uint8Array(12);c.set(e.subarray(16),4);var d=Ld.streamXOR(i,c,r,n);return sf.wipe(i),d}rr.streamXOR=df;function Od(t,e,r){return sf.wipe(r),df(t,e,r,r)}rr.stream=Od;function of(t,e,r){for(var n=1634760805,i=857760878,c=2036477234,d=1797285236,s=t[3]<<24|t[2]<<16|t[1]<<8|t[0],o=t[7]<<24|t[6]<<16|t[5]<<8|t[4],u=t[11]<<24|t[10]<<16|t[9]<<8|t[8],h=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=t[19]<<24|t[18]<<16|t[17]<<8|t[16],l=t[23]<<24|t[22]<<16|t[21]<<8|t[20],v=t[27]<<24|t[26]<<16|t[25]<<8|t[24],_=t[31]<<24|t[30]<<16|t[29]<<8|t[28],g=e[3]<<24|e[2]<<16|e[1]<<8|e[0],D=e[7]<<24|e[6]<<16|e[5]<<8|e[4],L=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],B=n,M=i,P=c,A=d,a=s,p=o,N=u,R=h,U=b,j=l,H=v,E=_,m=g,O=D,T=L,I=F,C=0;C<$d;C+=2)B=B+a|0,m^=B,m=m>>>32-16|m<<16,U=U+m|0,a^=U,a=a>>>32-12|a<<12,M=M+p|0,O^=M,O=O>>>32-16|O<<16,j=j+O|0,p^=j,p=p>>>32-12|p<<12,P=P+N|0,T^=P,T=T>>>32-16|T<<16,H=H+T|0,N^=H,N=N>>>32-12|N<<12,A=A+R|0,I^=A,I=I>>>32-16|I<<16,E=E+I|0,R^=E,R=R>>>32-12|R<<12,P=P+N|0,T^=P,T=T>>>32-8|T<<8,H=H+T|0,N^=H,N=N>>>32-7|N<<7,A=A+R|0,I^=A,I=I>>>32-8|I<<8,E=E+I|0,R^=E,R=R>>>32-7|R<<7,M=M+p|0,O^=M,O=O>>>32-8|O<<8,j=j+O|0,p^=j,p=p>>>32-7|p<<7,B=B+a|0,m^=B,m=m>>>32-8|m<<8,U=U+m|0,a^=U,a=a>>>32-7|a<<7,B=B+p|0,I^=B,I=I>>>32-16|I<<16,H=H+I|0,p^=H,p=p>>>32-12|p<<12,M=M+N|0,m^=M,m=m>>>32-16|m<<16,E=E+m|0,N^=E,N=N>>>32-12|N<<12,P=P+R|0,O^=P,O=O>>>32-16|O<<16,U=U+O|0,R^=U,R=R>>>32-12|R<<12,A=A+a|0,T^=A,T=T>>>32-16|T<<16,j=j+T|0,a^=j,a=a>>>32-12|a<<12,P=P+R|0,O^=P,O=O>>>32-8|O<<8,U=U+O|0,R^=U,R=R>>>32-7|R<<7,A=A+a|0,T^=A,T=T>>>32-8|T<<8,j=j+T|0,a^=j,a=a>>>32-7|a<<7,M=M+N|0,m^=M,m=m>>>32-8|m<<8,E=E+m|0,N^=E,N=N>>>32-7|N<<7,B=B+p|0,I^=B,I=I>>>32-8|I<<8,H=H+I|0,p^=H,p=p>>>32-7|p<<7;return at.writeUint32LE(B,r,0),at.writeUint32LE(M,r,4),at.writeUint32LE(P,r,8),at.writeUint32LE(A,r,12),at.writeUint32LE(m,r,16),at.writeUint32LE(O,r,20),at.writeUint32LE(T,r,24),at.writeUint32LE(I,r,28),r}rr.hchacha=of;var uf={},hf={},It={};Object.defineProperty(It,"__esModule",{value:!0});function kd(t,e,r){return~(t-1)&e|t-1&r}It.select=kd;function zd(t,e){return(t|0)-(e|0)-1>>>31&1}It.lessOrEqual=zd;function bf(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}It.compare=bf;function Kd(t,e){return t.length===0||e.length===0?!1:bf(t,e)!==0}It.equal=Kd;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=It,r=bt;t.DIGEST_LENGTH=16;var n=function(){function d(s){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var o=s[0]|s[1]<<8;this._r[0]=o&8191;var u=s[2]|s[3]<<8;this._r[1]=(o>>>13|u<<3)&8191;var h=s[4]|s[5]<<8;this._r[2]=(u>>>10|h<<6)&7939;var b=s[6]|s[7]<<8;this._r[3]=(h>>>7|b<<9)&8191;var l=s[8]|s[9]<<8;this._r[4]=(b>>>4|l<<12)&255,this._r[5]=l>>>1&8190;var v=s[10]|s[11]<<8;this._r[6]=(l>>>14|v<<2)&8191;var _=s[12]|s[13]<<8;this._r[7]=(v>>>11|_<<5)&8065;var g=s[14]|s[15]<<8;this._r[8]=(_>>>8|g<<8)&8191,this._r[9]=g>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return d.prototype._blocks=function(s,o,u){for(var h=this._fin?0:2048,b=this._h[0],l=this._h[1],v=this._h[2],_=this._h[3],g=this._h[4],D=this._h[5],L=this._h[6],F=this._h[7],B=this._h[8],M=this._h[9],P=this._r[0],A=this._r[1],a=this._r[2],p=this._r[3],N=this._r[4],R=this._r[5],U=this._r[6],j=this._r[7],H=this._r[8],E=this._r[9];u>=16;){var m=s[o+0]|s[o+1]<<8;b+=m&8191;var O=s[o+2]|s[o+3]<<8;l+=(m>>>13|O<<3)&8191;var T=s[o+4]|s[o+5]<<8;v+=(O>>>10|T<<6)&8191;var I=s[o+6]|s[o+7]<<8;_+=(T>>>7|I<<9)&8191;var C=s[o+8]|s[o+9]<<8;g+=(I>>>4|C<<12)&8191,D+=C>>>1&8191;var $=s[o+10]|s[o+11]<<8;L+=(C>>>14|$<<2)&8191;var k=s[o+12]|s[o+13]<<8;F+=($>>>11|k<<5)&8191;var G=s[o+14]|s[o+15]<<8;B+=(k>>>8|G<<8)&8191,M+=G>>>5|h;var z=0,J=z;J+=b*P,J+=l*(5*E),J+=v*(5*H),J+=_*(5*j),J+=g*(5*U),z=J>>>13,J&=8191,J+=D*(5*R),J+=L*(5*N),J+=F*(5*p),J+=B*(5*a),J+=M*(5*A),z+=J>>>13,J&=8191;var Y=z;Y+=b*A,Y+=l*P,Y+=v*(5*E),Y+=_*(5*H),Y+=g*(5*j),z=Y>>>13,Y&=8191,Y+=D*(5*U),Y+=L*(5*R),Y+=F*(5*N),Y+=B*(5*p),Y+=M*(5*a),z+=Y>>>13,Y&=8191;var Q=z;Q+=b*a,Q+=l*A,Q+=v*P,Q+=_*(5*E),Q+=g*(5*H),z=Q>>>13,Q&=8191,Q+=D*(5*j),Q+=L*(5*U),Q+=F*(5*R),Q+=B*(5*N),Q+=M*(5*p),z+=Q>>>13,Q&=8191;var x=z;x+=b*p,x+=l*a,x+=v*A,x+=_*P,x+=g*(5*E),z=x>>>13,x&=8191,x+=D*(5*H),x+=L*(5*j),x+=F*(5*U),x+=B*(5*R),x+=M*(5*N),z+=x>>>13,x&=8191;var S=z;S+=b*N,S+=l*p,S+=v*a,S+=_*A,S+=g*P,z=S>>>13,S&=8191,S+=D*(5*E),S+=L*(5*H),S+=F*(5*j),S+=B*(5*U),S+=M*(5*R),z+=S>>>13,S&=8191;var w=z;w+=b*R,w+=l*N,w+=v*p,w+=_*a,w+=g*A,z=w>>>13,w&=8191,w+=D*P,w+=L*(5*E),w+=F*(5*H),w+=B*(5*j),w+=M*(5*U),z+=w>>>13,w&=8191;var f=z;f+=b*U,f+=l*R,f+=v*N,f+=_*p,f+=g*a,z=f>>>13,f&=8191,f+=D*A,f+=L*P,f+=F*(5*E),f+=B*(5*H),f+=M*(5*j),z+=f>>>13,f&=8191;var y=z;y+=b*j,y+=l*U,y+=v*R,y+=_*N,y+=g*p,z=y>>>13,y&=8191,y+=D*a,y+=L*A,y+=F*P,y+=B*(5*E),y+=M*(5*H),z+=y>>>13,y&=8191;var K=z;K+=b*H,K+=l*j,K+=v*U,K+=_*R,K+=g*N,z=K>>>13,K&=8191,K+=D*p,K+=L*a,K+=F*A,K+=B*P,K+=M*(5*E),z+=K>>>13,K&=8191;var q=z;q+=b*E,q+=l*H,q+=v*j,q+=_*U,q+=g*R,z=q>>>13,q&=8191,q+=D*N,q+=L*p,q+=F*a,q+=B*A,q+=M*P,z+=q>>>13,q&=8191,z=(z<<2)+z|0,z=z+J|0,J=z&8191,z=z>>>13,Y+=z,b=J,l=Y,v=Q,_=x,g=S,D=w,L=f,F=y,B=K,M=q,o+=16,u-=16}this._h[0]=b,this._h[1]=l,this._h[2]=v,this._h[3]=_,this._h[4]=g,this._h[5]=D,this._h[6]=L,this._h[7]=F,this._h[8]=B,this._h[9]=M},d.prototype.finish=function(s,o){o===void 0&&(o=0);var u=new Uint16Array(10),h,b,l,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=h,h=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,u[0]=this._h[0]+5,h=u[0]>>>13,u[0]&=8191,v=1;v<10;v++)u[v]=this._h[v]+h,h=u[v]>>>13,u[v]&=8191;for(u[9]-=1<<13,b=(h^1)-1,v=0;v<10;v++)u[v]&=b;for(b=~b,v=0;v<10;v++)this._h[v]=this._h[v]&b|u[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,l=this._h[0]+this._pad[0],this._h[0]=l&65535,v=1;v<8;v++)l=(this._h[v]+this._pad[v]|0)+(l>>>16)|0,this._h[v]=l&65535;return s[o+0]=this._h[0]>>>0,s[o+1]=this._h[0]>>>8,s[o+2]=this._h[1]>>>0,s[o+3]=this._h[1]>>>8,s[o+4]=this._h[2]>>>0,s[o+5]=this._h[2]>>>8,s[o+6]=this._h[3]>>>0,s[o+7]=this._h[3]>>>8,s[o+8]=this._h[4]>>>0,s[o+9]=this._h[4]>>>8,s[o+10]=this._h[5]>>>0,s[o+11]=this._h[5]>>>8,s[o+12]=this._h[6]>>>0,s[o+13]=this._h[6]>>>8,s[o+14]=this._h[7]>>>0,s[o+15]=this._h[7]>>>8,this._finished=!0,this},d.prototype.update=function(s){var o=0,u=s.length,h;if(this._leftover){h=16-this._leftover,h>u&&(h=u);for(var b=0;b<h;b++)this._buffer[this._leftover+b]=s[o+b];if(u-=h,o+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(h=u-u%16,this._blocks(s,o,h),o+=h,u-=h),u){for(var b=0;b<u;b++)this._buffer[this._leftover+b]=s[o+b];this._leftover+=u}return this},d.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},d.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},d}();t.Poly1305=n;function i(d,s){var o=new n(d);o.update(s);var u=o.digest();return o.clean(),u}t.oneTimeAuth=i;function c(d,s){return d.length!==t.DIGEST_LENGTH||s.length!==t.DIGEST_LENGTH?!1:e.equal(d,s)}t.equal=c})(hf);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=nr,r=hf,n=bt,i=wr,c=It;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var d=new Uint8Array(16),s=function(){function o(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return o.prototype.seal=function(u,h,b,l){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(u,v.length-u.length);var _=new Uint8Array(32);e.stream(this._key,v,_,4);var g=h.length+this.tagLength,D;if(l){if(l.length!==g)throw new Error("ChaCha20Poly1305: incorrect destination length");D=l}else D=new Uint8Array(g);return e.streamXOR(this._key,v,h,D,4),this._authenticate(D.subarray(D.length-this.tagLength,D.length),_,D.subarray(0,D.length-this.tagLength),b),n.wipe(v),D},o.prototype.open=function(u,h,b,l){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(u,v.length-u.length);var _=new Uint8Array(32);e.stream(this._key,v,_,4);var g=new Uint8Array(this.tagLength);if(this._authenticate(g,_,h.subarray(0,h.length-this.tagLength),b),!c.equal(g,h.subarray(h.length-this.tagLength,h.length)))return null;var D=h.length-this.tagLength,L;if(l){if(l.length!==D)throw new Error("ChaCha20Poly1305: incorrect destination length");L=l}else L=new Uint8Array(D);return e.streamXOR(this._key,v,h.subarray(0,h.length-this.tagLength),L,4),n.wipe(v),L},o.prototype.clean=function(){return n.wipe(this._key),this},o.prototype._authenticate=function(u,h,b,l){var v=new r.Poly1305(h);l&&(v.update(l),l.length%16>0&&v.update(d.subarray(l.length%16))),v.update(b),b.length%16>0&&v.update(d.subarray(b.length%16));var _=new Uint8Array(8);l&&i.writeUint64LE(l.length,_),v.update(_),i.writeUint64LE(b.length,_),v.update(_);for(var g=v.digest(),D=0;D<g.length;D++)u[D]=g[D];v.clean(),n.wipe(g),n.wipe(_)},o}();t.ChaCha20Poly1305=s})(uf);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=rr,r=uf,n=bt;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var i=function(){function c(d){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,d.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(d)}return c.prototype.seal=function(d,s,o,u){if(d.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var h=e.hchacha(this._key,d.subarray(0,16),new Uint8Array(32)),b=new Uint8Array(12);b.set(d.subarray(16),4);var l=new r.ChaCha20Poly1305(h),v=l.seal(b,s,o,u);return n.wipe(h),n.wipe(b),l.clean(),v},c.prototype.open=function(d,s,o,u){if(d.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(s.length<this.tagLength)return null;var h=e.hchacha(this._key,d.subarray(0,16),new Uint8Array(32)),b=new Uint8Array(12);b.set(d.subarray(16),4);var l=new r.ChaCha20Poly1305(h),v=l.open(b,s,o,u);return n.wipe(h),n.wipe(b),l.clean(),v},c.prototype.clean=function(){return n.wipe(this._key),this},c}();t.XChaCha20Poly1305=i})(Pn);function Ye(t){return we(t,"base64url")}function He(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return le(e,"base64url")}function Mn(t){return le(t,"base58btc")}function Ud(t){return we(t,"base58btc")}function Wr(t){const e=t.startsWith("0x")?t.substring(2):t;return le(e.toLowerCase(),"base16")}function un(t){return Ye(le(t))}function lf(t){return we(He(t))}function nt(t){return we(t,"base16")}function vf(t){return le(t)}function pf({r:t,s:e,recoveryParam:r},n){const i=new Uint8Array(n?65:64);if(i.set(le(t,"base16"),0),i.set(le(e,"base16"),32),n){if(typeof r>"u")throw new Error("Signer did not return a recoveryParam");i[64]=r}return Ye(i)}function Bd(t){const e=He(t);if(e.length<64||e.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${e.length}`);const r=nt(e.slice(0,32)),n=nt(e.slice(32,64)),i=e.length===65?e[64]:void 0;return{r,s:n,recoveryParam:i}}function yf(t,e){return or([He(t),He(e)])}function mt(t){const e=typeof t=="string"?le(t):t;return Ei.hash(e)}function qd(t){return new Uint8Array(da.keccak_256.arrayBuffer(t))}function wf(t){const e=le(t.slice(2),"base16");return`0x${we(qd(e).slice(-20),"base16")}`}function hn(t,e=new Uint8Array(4)){const r=le(t.toString(),"base10");return e.set(r,4-r.length),e}const Xr=t=>or([hn(t.length),t]);function gf(t,e,r,n,i){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const c=or([Xr(le(r)),Xr(typeof n>"u"?new Uint8Array(0):n),Xr(typeof i>"u"?new Uint8Array(0):i),hn(e)]),d=1;return Ei.hash(or([hn(d),t,c]))}new Ct.ec("secp256k1");function jd(t){const e=t;if(e.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${e.length}`);return function(r){try{const n=typeof r=="string"?vf(r):r,i=Nt.sign(e,n);return Promise.resolve(Ye(i))}catch(n){return Promise.reject(n)}}}new Ct.ec("p256");function Dn(t){return typeof t=="object"&&"r"in t&&"s"in t}function Hd(){return function(e,r){try{return Promise.resolve(r(e)).then(function(n){return Dn(n)?pf(n):n})}catch(n){return Promise.reject(n)}}}function ri(t){return function(r,n){try{return Promise.resolve(n(r)).then(function(i){if(Dn(i))return pf(i,t);if(t&&typeof Bd(i).recoveryParam>"u")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return i})}catch(i){return Promise.reject(i)}}}function ni(){return function(e,r){try{return Promise.resolve(r(e)).then(function(n){if(Dn(n))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return n})}catch(n){return Promise.reject(n)}}}const Fd={ES256:Hd(),ES256K:ri(),"ES256K-R":ri(!0),Ed25519:ni(),EdDSA:ni()};function Jd(t){const e=Fd[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}const Kt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ut=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Bt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],qt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],jt=[0,1518500249,1859775393,2400959708,2840853838],Ht=[1352829926,1548603684,1836072691,2053994217,0];function xt(t,e){return t<<e|t>>>32-e}function ii(t,e,r,n,i,c,d,s){return xt(t+(e^r^n)+c+d|0,s)+i|0}function fi(t,e,r,n,i,c,d,s){return xt(t+(e&r|~e&n)+c+d|0,s)+i|0}function ai(t,e,r,n,i,c,d,s){return xt(t+((e|~r)^n)+c+d|0,s)+i|0}function ci(t,e,r,n,i,c,d,s){return xt(t+(e&n|r&~n)+c+d|0,s)+i|0}function si(t,e,r,n,i,c,d,s){return xt(t+(e^(r|~n))+c+d|0,s)+i|0}class _f{constructor(e=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=r=>{if(this._finalized)throw new Error("Digest already called");const n=this._block;let i=0;for(;this._blockOffset+r.length-i>=this._blockSize;){for(let c=this._blockOffset;c<this._blockSize;)n[c++]=r[i++];this._update(),this._blockOffset=0}for(;i<r.length;)n[this._blockOffset++]=r[i++];for(let c=0,d=r.length*8;d>0;++c)this._length[c]+=d,d=this._length[c]/4294967296|0,d>0&&(this._length[c]-=4294967296*d);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const r=this._digest();this._block.fill(0),this._blockOffset=0;for(let n=0;n<4;++n)this._length[n]=0;return r},this._update=()=>{const r=new Array(16),n=new DataView(this._block.buffer);for(let g=0;g<16;++g)r[g]=r[g]=n.getInt32(g*4,!0);let i=this._a|0,c=this._b|0,d=this._c|0,s=this._d|0,o=this._e|0,u=this._a|0,h=this._b|0,b=this._c|0,l=this._d|0,v=this._e|0;for(let g=0;g<80;g+=1){let D,L;g<16?(D=ii(i,c,d,s,o,r[Kt[g]],jt[0],Bt[g]),L=si(u,h,b,l,v,r[Ut[g]],Ht[0],qt[g])):g<32?(D=fi(i,c,d,s,o,r[Kt[g]],jt[1],Bt[g]),L=ci(u,h,b,l,v,r[Ut[g]],Ht[1],qt[g])):g<48?(D=ai(i,c,d,s,o,r[Kt[g]],jt[2],Bt[g]),L=ai(u,h,b,l,v,r[Ut[g]],Ht[2],qt[g])):g<64?(D=ci(i,c,d,s,o,r[Kt[g]],jt[3],Bt[g]),L=fi(u,h,b,l,v,r[Ut[g]],Ht[3],qt[g])):(D=si(i,c,d,s,o,r[Kt[g]],jt[4],Bt[g]),L=ii(u,h,b,l,v,r[Ut[g]],Ht[4],qt[g])),i=o,o=s,s=xt(d,10),d=c,c=D,u=v,v=l,l=xt(b,10),b=h,h=L}const _=this._b+d+l|0;this._b=this._c+s+v|0,this._c=this._d+o+u|0,this._d=this._e+i+h|0,this._e=this._a+c+b|0,this._a=_},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const r=new DataView(this._block.buffer);r.setUint32(56,this._length[0],!0),r.setUint32(60,this._length[1],!0),this._block=new Uint8Array(r.buffer),this._update();const n=new DataView(new Uint8Array(20).buffer);return n.setInt32(0,this._a,!0),n.setInt32(4,this._b,!0),n.setInt32(8,this._c,!0),n.setInt32(12,this._d,!0),n.setInt32(16,this._e,!0),new Uint8Array(n.buffer)},this._block=new Uint8Array(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}const Gd=(t,e)=>{const r=we(Mn(e).slice(0,1),"hex"),n=le(t,"hex"),i=new _f().update(mt(n)).digest(),c=r+we(i,"hex"),d=mt(le(c,"hex")),s=mt(d),o=we(s,"hex").substring(0,8),u=c+o;return Ud(le(u,"hex"))},Wd=Ct.ec,Xd=(t,e)=>{const n=new Wd("secp256k1").keyFromPublic(t,"hex").getPublic().encode("hex",!0),i=le(n,"hex"),c=new _f().update(mt(i)).digest(),d=dn.toWords(c);return dn.encode(e,d).replace(e,"")},Yd=(t,e)=>{if(e){const r=e.split(":");switch(r[0]){case"bip122":r[r.length-1]=Gd(t,r[r.length-1]);break;case"cosmos":r[r.length-1]=Xd(t,r[1]);break;case"eip155":r[r.length-1]=wf(t);break;default:return!1}return r.join(":").toLowerCase()===e.toLowerCase()}return!1},Tn=new Ct.ec("secp256k1"),mf=new Ct.ec("p256");function Zt(t,e=!1){const r=He(t);if(r.length!==(e?65:64))throw new Error("wrong signature length");const n=nt(r.slice(0,32)),i=nt(r.slice(32,64)),c={r:n,s:i};return e&&(c.recoveryParam=r[64]),c}function Tr(t){if(t.publicKeyBase58)return Mn(t.publicKeyBase58);if(t.publicKeyBase64)return He(t.publicKeyBase64);if(t.publicKeyHex)return Wr(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return Wr(Tn.keyFromPublic({x:nt(He(t.publicKeyJwk.x)),y:nt(He(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return Wr(mf.keyFromPublic({x:nt(He(t.publicKeyJwk.x)),y:nt(He(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&t.publicKeyJwk.crv==="Ed25519"&&t.publicKeyJwk.x)return He(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:e,base58btc:r,base64:n,base64url:i}=sa;return e.decoder.or(r.decoder.or(n.decoder.or(i.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function Vd(t,e,r){const n=mt(t),i=Zt(e),d=r.filter(({ethereumAddress:s,blockchainAccountId:o})=>typeof s>"u"&&typeof o>"u").find(s=>{try{const o=Tr(s);return mf.keyFromPublic(o).verify(n,i)}catch{return!1}});if(!d)throw new Error("invalid_signature: Signature invalid for JWT");return d}function Zd(t,e,r){const n=mt(t),i=Zt(e),c=r.filter(({ethereumAddress:o,blockchainAccountId:u})=>typeof o>"u"&&typeof u>"u"),d=r.filter(({ethereumAddress:o,blockchainAccountId:u})=>typeof o<"u"||typeof u<"u");let s=c.find(o=>{try{const u=Tr(o);return Tn.keyFromPublic(u).verify(n,i)}catch{return!1}});if(!s&&d.length>0&&(s=xf(t,e,d)),!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}function xf(t,e,r){let n;if(e.length>86)n=[Zt(e,!0)];else{const d=Zt(e,!1);n=[{...d,recoveryParam:0},{...d,recoveryParam:1}]}const i=d=>{const s=mt(t),o=Tn.recoverPubKey(s,d,d.recoveryParam),u=o.encode("hex"),h=o.encode("hex",!0),b=wf(u).toLowerCase();return r.find(v=>{var _,g,D;const L=nt(Tr(v));return L===u||L===h||((_=v.ethereumAddress)==null?void 0:_.toLowerCase())===b||((g=v.blockchainAccountId)==null||(D=g.split("@eip155"))==null?void 0:D[0].toLowerCase())===b||Yd(u,v.blockchainAccountId)})},c=n.map(i).filter(d=>typeof d<"u");if(c.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return c[0]}function di(t,e,r){const n=vf(t),i=He(e),c=r.find(d=>Nt.verify(Tr(d),n,i));if(!c)throw new Error("invalid_signature: Signature invalid for JWT");return c}const Qd={ES256:Vd,ES256K:Zd,"ES256K-R":xf,Ed25519:di,EdDSA:di};function Sf(t){const e=Qd[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}Sf.toSignatureObject=Zt;const eo=function(t,e,r={},n={}){try{r.alg||(r.alg=to);const i=typeof t=="string"?t:oi(t,n.canonicalize),c=[oi(r,n.canonicalize),i].join("."),d=Jd(r.alg);return Promise.resolve(d(c,e)).then(function(s){return[c,s].join(".")})}catch(i){return Promise.reject(i)}},to="ES256K";function oi(t,e=!1){return un(e?Id(t):JSON.stringify(t))}function ro(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(lf(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function no({header:t,data:e,signature:r},n){return Array.isArray(n)||(n=[n]),Sf(t.alg)(e,r,n)}function io(t,e){const r=ro(t);return no(r,e)}const ui=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function xe(t,e,r){if(!t.s){if(r instanceof St)if(r.s)e&1&&(e=r.s),r=r.v;else{r.o=xe.bind(null,t,e);return}if(r&&r.then){r.then(xe.bind(null,t,e),xe.bind(null,t,2));return}t.s=e,t.v=r;const n=t.o;n&&n(t)}}const St=function(){function t(){}return t.prototype.then=function(e,r){const n=new t,i=this.s;if(i){const c=i&1?e:r;if(c){try{xe(n,1,c(this.v))}catch(d){xe(n,2,d)}return n}else return this}return this.o=function(c){try{const d=c.v;c.s&1?xe(n,1,e?e(d):d):r?xe(n,1,r(d)):xe(n,2,d)}catch(d){xe(n,2,d)}},n},t}();function st(t){return t instanceof St&&t.s&1}function fo(t,e,r){var n=-1,i,c;function d(s){try{for(;++n<t.length&&(!r||!r());)if(s=e(n),s&&s.then)if(st(s))s=s.v;else{s.then(d,c||(c=xe.bind(null,i=new St,2)));return}i?xe(i,1,s):i=s}catch(o){xe(i||(i=new St),2,o)}}return d(),i}function ao(t,e,r){if(typeof t[ui]=="function"){let h=function(b){try{for(;!(i=n.next()).done&&(!r||!r());)if(b=e(i.value),b&&b.then)if(st(b))b=b.v;else{b.then(h,d||(d=xe.bind(null,c=new St,2)));return}c?xe(c,1,b):c=b}catch(l){xe(c||(c=new St),2,l)}};var n=t[ui](),i,c,d;if(h(),n.return){var s=function(b){try{i.done||n.return()}catch{}return b};if(c&&c.then)return c.then(s,function(b){throw s(b)});s()}return c}if(!("length"in t))throw new TypeError("Object is not iterable");for(var o=[],u=0;u<t.length;u++)o.push(t[u]);return fo(o,function(h){return e(o[h])},r)}function co(t,e,r){for(var n;;){var i=t();if(st(i)&&(i=i.v),!i)return c;if(i.then){n=0;break}var c=r();if(c&&c.then)if(st(c))c=c.s;else{n=1;break}if(e){var d=e();if(d&&d.then&&!st(d)){n=2;break}}}var s=new St,o=xe.bind(null,s,2);return(n===0?i.then(h):n===1?c.then(u):d.then(b)).then(void 0,o),s;function u(l){c=l;do{if(e&&(d=e(),d&&d.then&&!st(d))){d.then(b).then(void 0,o);return}if(i=t(),!i||st(i)&&!i.v){xe(s,1,c);return}if(i.then){i.then(h).then(void 0,o);return}c=r(),st(c)&&(c=c.v)}while(!c||!c.then);c.then(u).then(void 0,o)}function h(l){l?(c=r(),c&&c.then?c.then(u).then(void 0,o):u(c)):xe(s,1,c)}function b(){(i=t())?i.then?i.then(h).then(void 0,o):h(i):xe(s,1,c)}}function so(t){if(!(t.protected&&t.iv&&t.ciphertext&&t.tag))throw new Error("bad_jwe: missing properties");t.recipients&&t.recipients.map(e=>{if(!(e.header&&e.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function hi({ciphertext:t,tag:e,iv:r,protectedHeader:n,recipient:i},c){const d={protected:n,iv:Ye(r),ciphertext:Ye(t),tag:Ye(e)};return c&&(d.aad=Ye(c)),i&&(d.recipients=[i]),d}const oo=function(t,e){try{let n=function(u){if(s===null)throw new Error("failure: Failed to decrypt");return s},r;so(t);const i=JSON.parse(lf(t.protected));if(i.enc!==e.enc)throw new Error(`not_supported: Decrypter does not supported: '${i.enc}'`);const c=yf(t.ciphertext,t.tag),d=le(t.aad?`${t.protected}.${t.aad}`:t.protected);let s=null;const o=function(){return i.alg==="dir"&&e.alg==="dir"?Promise.resolve(e.decrypt(c,He(t.iv),d)).then(function(u){s=u}):function(){if(!t.recipients||t.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let u=0;return co(function(){return!s&&u<t.recipients.length},function(){return u++},function(){const h=t.recipients[u];Object.assign(h.header,i);const b=function(){if(h.header.alg===e.alg)return Promise.resolve(e.decrypt(c,He(t.iv),d,h)).then(function(l){s=l})}();if(b&&b.then)return b.then(function(){})})}}()}();return Promise.resolve(o&&o.then?o.then(n):n(o))}catch(r){return Promise.reject(r)}},uo=function(t,e,r={},n){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,r,n)).then(function(i){return hi(i,n)})}else{const i=e[0].enc;if(!e.reduce((o,u)=>o&&u.enc===i,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let c,d;const s=ao(e,function(o){const u=function(){return c?Promise.resolve(o.encryptCek==null?void 0:o.encryptCek(c)).then(function(h){if(h){var b,l;(b=d)==null||(l=b.recipients)==null||l.push(h)}}):Promise.resolve(o.encrypt(t,r,n)).then(function(h){c=h.cek,d=hi(h,n)})}();if(u&&u.then)return u.then(function(){})});return Promise.resolve(s&&s.then?s.then(function(){return d}):d)}}catch(i){return Promise.reject(i)}},ho=function(t,e){try{const r=function(i,c=[]){try{return Promise.resolve(e.resolve(i)).then(function({didResolutionMetadata:d,didDocument:s}){function o(){var b,l;const v=(b=s.keyAgreement)==null||(l=b.map(g=>typeof g=="string"?[...s.publicKey||[],...s.verificationMethod||[]].find(D=>D.id===g):g))==null?void 0:l.filter(g=>typeof g<"u"),_=v?.filter(g=>g.type==="X25519KeyAgreementKey2019"&&Boolean(g.publicKeyBase58))||[];if(!_.length&&!u.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);return _.map(g=>lo(Mn(g.publicKeyBase58),g.id)).concat(...u)}if(c.push(i),d!=null&&d.error||s==null)throw new Error(`resolver_error: Could not resolve ${i}: ${d.error}, ${d.message}`);let u=[];if(!s.controller&&!s.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);const h=function(){if(s.controller){let b=Array.isArray(s.controller)?s.controller:[s.controller];b=b.filter(v=>!c.includes(v));const l=b.map(v=>r(v,c).catch(()=>[]));return Promise.resolve(Promise.all(l)).then(function(v){u=[].concat(...v)})}}();return h&&h.then?h.then(o):o(h)})}catch(d){return Promise.reject(d)}},n=t.map(i=>r(i));return Promise.resolve(Promise.all(n)).then(function(i){return[].concat(...i)})}catch(r){return Promise.reject(r)}};function Ef(t){const e=new Pn.XChaCha20Poly1305(t);return(r,n)=>{const i=lt.randomBytes(e.nonceLength),c=e.seal(i,r,n);return{ciphertext:c.subarray(0,c.length-e.tagLength),tag:c.subarray(c.length-e.tagLength),iv:i}}}function bo(t){const e=function(c,d={},s){try{const o=un(JSON.stringify(Object.assign({alg:i},d,{enc:n}))),u=le(s?`${o}.${Ye(s)}`:o);return Promise.resolve({...r(c,u),protectedHeader:o})}catch(o){return Promise.reject(o)}},r=Ef(t),n="XC20P",i="dir";return{alg:i,enc:n,encrypt:e}}function bi(t){const e=function(n,i,c){try{return Promise.resolve(r.open(i,n,c))}catch(d){return Promise.reject(d)}},r=new Pn.XChaCha20Poly1305(t);return{alg:"dir",enc:"XC20P",decrypt:e}}function lo(t,e){const r=function(s,o={},u){try{Object.assign(o,{alg:void 0});const h=lt.randomBytes(32);return Promise.resolve(bo(h).encrypt(s,o,u)).then(function(b){return Promise.resolve(n(h)).then(function(l){return{...b,recipient:l,cek:h}})})}catch(h){return Promise.reject(h)}},n=function(s){try{const o=yr.generateKeyPair(),u=yr.sharedKey(o.secretKey,t),h=gf(u,c,i),b=Ef(h)(s),l={encrypted_key:Ye(b.ciphertext),header:{alg:i,iv:Ye(b.iv),tag:Ye(b.tag),epk:{kty:"OKP",crv:d,x:Ye(o.publicKey)}}};return e&&(l.header.kid=e),Promise.resolve(l)}catch(o){return Promise.reject(o)}},i="ECDH-ES+XC20PKW",d="X25519";return{alg:i,enc:"XC20P",encrypt:r,encryptCek:n}}function vo(t){if(!(t&&t.epk&&t.iv&&t.tag))throw new Error("bad_jwe: malformed header")}function po(t){const e=function(c,d,s,o){try{let b=function(){const g=gf(v,n,r),D=yf(o.encrypted_key,o.header.tag);return Promise.resolve(bi(g).decrypt(D,He(o.header.iv))).then(function(L){return L===null?null:bi(L).decrypt(c,d,s)})};var u,h;if(vo((u=o)==null?void 0:u.header),o=o,((h=o.header.epk)==null?void 0:h.crv)!==i||typeof o.header.epk.x>"u")return Promise.resolve(null);const l=He(o.header.epk.x);let v;const _=function(){if(t instanceof Uint8Array)v=yr.sharedKey(t,l);else return Promise.resolve(t(l)).then(function(g){v=g})}();return Promise.resolve(_&&_.then?_.then(b):b(_))}catch(b){return Promise.reject(b)}},r="ECDH-ES+XC20PKW",i="X25519";return{alg:r,enc:"XC20P",decrypt:e}}const yo=24;async function wo(t){const e=await Ai({value:t,codec:Ii,hasher:oa});return{cid:e.cid,linkedBlock:e.bytes}}function go(t,e=yo){const r=(e-t.length%e)%e,n=new Uint8Array(t.length+r);return n.set(t,0),n}async function _o(t){return(await Ai({value:t,codec:Ii,hasher:Pi})).cid}function mo(t){if(t=Wt.asCID(t),t.code!==ua)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==Pi.code)throw new Error("CID must use identity multihash");return ha(t.multihash.digest)}async function xo(t,e){return go((await _o(t)).bytes,e)}function So(t){return mo(Wt.decodeFirst(t)[0])}function Eo(){return we(lt.randomBytes(16),"base64")}const Af="base64pad",If="base64url";function Ao(t){return we(t,Af)}function Io(t){return we(t,If)}function Po(t){return le(t,Af)}function Yr(t){return JSON.parse(we(le(t,If)))}function Mo(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}function Do(t,e){if(e){const r=e.toISOString().split(".")[0]+"Z";return`${t}?versionTime=${r}`}else return t}function To(t){return t?Array.isArray(t)?t:[t]:[]}const Ro={...gc()};function No(t){return"registry"in t&&"cache"in t}class Rr{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(e){return new Rr({provider:this._client?.connection,resolver:this._resolver,capability:e,parent:this._parentId})}setProvider(e){if(this._client==null)this._client=new nn(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,r){this._resolver=No(e)?e:new xi(e,r)}async authenticate({provider:e,paths:r=[],aud:n}={}){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");const i=Eo(),c=await this._client.request("did_authenticate",{nonce:i,aud:n,paths:r}),{kid:d}=await this.verifyJWS(c),s=Yr(c.payload);if(!d.includes(s.did))throw new Error("Invalid authencation response, kid mismatch");if(s.nonce!==i)throw new Error("Invalid authencation response, wrong nonce");if(s.aud!==n)throw new Error("Invalid authencation response, wrong aud");if(s.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=s.did,this._id}async createJWS(e,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){const i=this._capability.p.exp;if(i&&Date.parse(i)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");const c=await Ln.fromCacao(this._capability),d=Wt.asCID(c.cid);if(!d)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");r.protected=r.protected||{},r.protected.cap=`ipfs://${d?.toString()}`}const{jws:n}=await this._client.request("did_createJWS",{did:this._id,...r,payload:e});return n}async createDagJWS(e,r={}){const{cid:n,linkedBlock:i}=await wo(e),c=Io(n.bytes);Object.assign(r,{linkedBlock:Ao(i)});const d=await this.createJWS(c,r),s=Wt.asCID(n);if(!s)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(d.link=s,this._capability){const o=await Ln.fromCacao(this._capability);return{jws:d,linkedBlock:i,cacaoBlock:o.bytes}}return{jws:d,linkedBlock:i}}async verifyJWS(e,r={}){r=Object.assign({verifiers:Ro},r),typeof e!="string"&&(e=Mo(e));const n=Yr(e.split(".")[0]).kid;if(!n)throw new Error('No "kid" found in jws');const i=await this.resolve(n);if(!r.disableTimecheck){const u=i.didDocumentMetadata?.nextUpdate;if(u){const b=r.revocationPhaseOutSecs?r.revocationPhaseOutSecs*1e3:0,l=new Date(u).valueOf()+b;if(!(r.atTime&&r.atTime.getTime()<l))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${n}`)}const h=i.didDocumentMetadata?.updated;if(h&&r.atTime&&r.atTime.getTime()<new Date(h).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${n}`)}const d=i.didDocument?.id;if(r.issuer&&r.issuer===r.capability?.p.iss&&d===r.capability.p.aud){if(!r.verifiers)throw new Error("Registered verifiers needed for CACAO");await $n.verify(r.capability,{disableExpirationCheck:r.disableTimecheck,atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}})}else if(r.issuer&&r.issuer!==d){const u=Do(r.issuer,r.atTime),b=(await this.resolve(u)).didDocument?.controller,l=To(b);if(r.capability?.s&&r.capability.p.aud===d&&l.includes(r.capability.p.iss))await $n.verify(r.capability,{atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}});else if(!(d?l.includes(d):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${n}`)}const s=i.didDocument?.verificationMethod||[];io(e,s);let o;try{o=Yr(e.split(".")[1])}catch{}return{kid:n,payload:o,didResolutionResult:i}}async createJWE(e,r,n={}){const i=await ho(r,this._resolver);return uo(e,i,n.protectedHeader,n.aad)}async createDagJWE(e,r,n={}){const i=await xo(e);return this.createJWE(i,r,n)}async decryptJWE(e,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:n}=await this._client.request("did_decryptJWE",{did:this._id,...r,jwe:e});return Po(n)}async decryptDagJWE(e){const r=await this.decryptJWE(e);return So(r)}async resolve(e){const r=await this._resolver.resolve(e);if(r.didResolutionMetadata.error){const{error:n,message:i}=r.didResolutionMetadata,c=i?`, ${i}`:"";throw new Error(`Failed to resolve ${e}: ${n}${c}`)}return r}constructor({provider:e,resolver:r={},resolverOptions:n,capability:i,parent:c}={}){if(e!=null&&(this._client=new nn(e)),i){if(this._capability=i,this._parentId=this._capability.p.iss,c&&this._parentId!==c)throw new Error("Capability issuer and parent not equal")}else c&&(this._parentId=c);this.setResolver(r,n)}}class Co extends Xi{get threeId(){return this._threeId}async authenticate(e,r=!0){const n=await this.connect(e);return await n.authenticate(),r&&(this.ceramic.did=n),n}async connect(e){return await this._threeId.connect(e),new Rr({provider:this._threeId.getDidProvider(),resolver:this.resolver})}constructor(e){super(e),this._threeId=new vc(e.connectNetwork??e.ceramic)}}var Lo=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(c){return function(d){return function(s,o){var u={key:s,value:d[s]},h={key:o,value:d[o]};return c(u,h)}}}(e.cmp),i=[];return function c(d){if(d&&d.toJSON&&typeof d.toJSON=="function"&&(d=d.toJSON()),d!==void 0){if(typeof d=="number")return isFinite(d)?""+d:"null";if(typeof d!="object")return JSON.stringify(d);var s,o;if(Array.isArray(d)){for(o="[",s=0;s<d.length;s++)s&&(o+=","),o+=c(d[s])||"null";return o+"]"}if(d===null)return"null";if(i.indexOf(d)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(d)-1,h=Object.keys(d).sort(n&&n(d));for(o="",s=0;s<h.length;s++){var b=h[s],l=c(d[b]);!l||(o&&(o+=","),o+=JSON.stringify(b)+":"+l)}return i.splice(u,1),"{"+o+"}"}}(t)};const $o="base64pad";function li(t){return JSON.parse(Lo(t))}function Oo(t){const e=new Uint8Array(t.length+2);return e[0]=237,e[1]=1,e.set(t,2),`did:key:z${we(e,"base58btc")}`}function vi(t){const[e,r,n]=t.split(".");return{payload:r,signatures:[{protected:e,signature:n}]}}const pi=async(t,e,r,n={})=>{const i=`${e}#${e.split(":")[2]}`,c=jd(r),d=li(Object.assign(n,{kid:i,alg:"EdDSA"}));return eo(typeof t=="string"?t:li(t),c,d)},ko={did_authenticate:async({did:t,secretKey:e},r)=>{const n=await pi({did:t,aud:r.aud,nonce:r.nonce,paths:r.paths,exp:Math.floor(Date.now()/1e3)+600},t,e);return vi(n)},did_createJWS:async({did:t,secretKey:e},r)=>{if(r.did.split("#")[0]!==t)throw new ot(4100,`Unknown DID: ${t}`);const i=await pi(r.payload,t,e,r.protected);return{jws:vi(i)}},did_decryptJWE:async({secretKey:t},e)=>{const r=po(Nt.convertSecretKeyToX25519(t));try{const n=await oo(e.jwe,r);return{cleartext:we(n,$o)}}catch(n){throw new ot(-32e3,n.message)}}};class zo{constructor(e){const{secretKey:r,publicKey:n}=Nt.generateKeyPairFromSeed(e),i=Oo(n),c=Ri(ko);this._handle=async d=>await c({did:i,secretKey:r},d)}get isDidProvider(){return!0}async send(e){return await this._handle(e)}}function Ko(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Uo(t,e){return e.get?e.get.call(t):e.value}function Bo(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Pf(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function et(t,e){var r=Pf(t,e,"get");return Uo(t,r)}function Vr(t,e,r){Ko(t,e),e.set(t,r)}function Zr(t,e,r){var n=Pf(t,e,"set");return Bo(t,n,r),r}async function yi(t){const e=new zo(t||lt.randomBytes(32)),r=new Rr({provider:e,resolver:Ms.getResolver()});return await r.authenticate(),r}async function qo(t,e){const r=t.withCapability(e);return await r.authenticate(),r}function jo(t){return we(le(JSON.stringify(t)),"base64url")}function Ho(t){return JSON.parse(we(le(t,"base64url")))}function Fo(t){return we(t,"base64pad")}function Jo(t){return le(t,"base64pad")}var Ft=new WeakMap,Qr=new WeakMap,ct=new WeakMap;class Tt{static async authorize(e,r={}){if(!r.resources||r.resources.length===0)throw new Error("Required: resource argument option when authorizing");const n=lt.randomBytes(32),i=await yi(n);if(r.expiresInSecs){const s=new Date(Date.now()+r.expiresInSecs*1e3);r.expirationTime=s.toISOString()}const c=await e.requestCapability(i.id,[],r),d=await qo(i,c);return new Tt({cacao:c,keySeed:n,did:d})}static async initDID(e,r){const n=e.withCapability(r);return await n.authenticate(),n}get did(){return et(this,Ft)}serialize(){const e={sessionKeySeed:Fo(et(this,Qr)),cacao:et(this,ct)};return jo(e)}static async fromSession(e){const{sessionKeySeed:r,cacao:n}=Ho(e),i=Jo(r),c=await yi(i),d=await Tt.initDID(c,n);return new Tt({cacao:n,keySeed:i,did:d})}get hasSession(){return!!et(this,ct)&&!!et(this,Ft)}get isExpired(){const e=et(this,ct).p.exp;return e?Date.parse(e)<Date.now():!1}get expireInSecs(){const e=et(this,ct).p.exp;if(!e)throw new Error("Session does not expire");const r=Date.parse(e)-Date.now();return r<0?0:r/1e3}get authorizations(){return et(this,ct)?.p.resources??[]}get cacao(){return et(this,ct)}isAuthorized(e){return!this.hasSession||this.isExpired?!1:e?e.every(r=>this.authorizations.includes(r)):!0}get id(){return et(this,Ft).parent}constructor(e){Vr(this,Ft,{writable:!0,value:void 0}),Vr(this,Qr,{writable:!0,value:void 0}),Vr(this,ct,{writable:!0,value:void 0}),Zr(this,Qr,e.keySeed),Zr(this,ct,e.cacao),Zr(this,Ft,e.did)}}function Go(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wo(t,e){return e.get?e.get.call(t):e.value}function Xo(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Mf(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function wi(t,e){var r=Mf(t,e,"get");return Wo(t,r)}function Yo(t,e,r){Go(t,e),e.set(t,r)}function Vo(t,e,r){var n=Mf(t,e,"set");return Xo(t,n,r),r}var cr=new WeakMap;class Zo extends Xi{async authenticate(e,r=!0,n){Vo(this,cr,n?await Tt.fromSession(n):await Tt.authorize(e,{resources:["ceramic://*"]}));const i=wi(this,cr).did;return r&&(this.ceramic.did=i),i}get session(){return wi(this,cr)}constructor(...e){super(...e),Yo(this,cr,{writable:!0,value:void 0})}}function Qo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function e0(t,e){return e.get?e.get.call(t):e.value}function t0(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Df(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Jt(t,e){var r=Df(t,e,"get");return e0(t,r)}function r0(t,e,r){Qo(t,e),e.set(t,r)}function n0(t,e,r){var n=Df(t,e,"set");return t0(t,n,r),r}var wt=new WeakMap;class Tf{static async authenticate(e){const{authProvider:r,threeidConnect:n,...i}=e,c=n?new Co(i):new Zo(i);return await c.authenticate(r,!0,i.sessionStr),new Tf({client:c})}get client(){return Jt(this,wt)}get did(){const e=Jt(this,wt).ceramic.did;if(e==null||!e.authenticated)throw new Error("Expected authenticated DID instance to be attached to Ceramic");return e}get id(){return this.did.hasParent?this.did.parent:this.did.id}async get(e){return await Jt(this,wt).dataStore.get(e,this.id)}async set(e,r){return await Jt(this,wt).dataStore.set(e,r)}async merge(e,r){return await Jt(this,wt).dataStore.merge(e,r)}constructor(e){if(r0(this,wt,{writable:!0,value:void 0}),!e.client.ceramic.did?.authenticated)throw new Error("Input DID must be authenticated, use SelfID.authenticate() instead of new SelfID()");n0(this,wt,e.client)}}export{d0 as EthereumAuthProvider,Tf as SelfID,Co as WebClient,Zo as WebClientSession};
